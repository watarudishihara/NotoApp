"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="5e9687bb-0975-5f3f-ad1b-3bcb4ec979f0")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[914],{472207:(e,t,r)=>{r.d(t,{e:()=>n});let n="https://go/figmascope-docs"},787538:(e,t,r)=>{r.d(t,{rf:()=>l,tV:()=>a,zG:()=>i});var n=r(104076),s=r(659062);function i(){return(0,n.jsx)(a,{children:(0,n.jsx)("p",{children:"Reading file..."})})}function l({error:e}){let t="Oops! Something went wrong";return"string"==typeof e?t=e:e instanceof Error&&(t=e.message,console.error(e)),(0,n.jsx)(a,{children:(0,n.jsx)("p",{style:s.sx.colorTextOndanger.colorBgDanger.p16.font20.maxW400.$,children:t})})}function a({children:e}){return(0,n.jsx)("div",{style:s.sx.fillPositionedContainer.flex.itemsCenter.justifyCenter.flexColumn.lh1_5Lines.font16.$,children:e})}},980914:(e,t,r)=>{r.d(t,{J:()=>tg});var n=r(104076),s=r(716976),i=r(737121),l=r(795033),a=r(883765),o=r(222714),c=r(221586),d=r(514223),u=r(659062),h=r(569963),p=r(284068),x=r(383947),f=r(432099),m=r(657878),g=r(377399),j=r(800108),b=(e=>(e[e.Fetched=0]="Fetched",e[e.Fetching=1]="Fetching",e[e.NeverFetched=2]="NeverFetched",e))(b||{});let k=(0,l.eU)(e=>{let t=e(m.OC);return"fullscreen"===t.view?`/api/file/scenegraph_validations/${t.fileKey}`:(0,g.E)(t)&&t.urlParams?.type==="server_file"?`/api/admin/scenegraph_validations/${t.urlParams.key}`:null}),v=(0,l.eU)(e=>null!=e(k)),y=(()=>{let e=(0,l.eU)((0,x.Ok)());return(0,l.eU)(t=>t(e),async(t,r)=>{let n;if(t(e).status===d.r.LOADING)return;let s=t(k);if(s){r(e,(0,x.ux)());try{n=await C(s)}catch(t){r(e,(0,x.uW)(t));return}r(e,(0,x.NY)(n))}})})();async function C(e){let t=await (0,f.GD)(e),r=new j._;for(let e of t.data.meta.data.results.violations)if("always-fail-for-testing"!==e.name)for(let t of e.instances)r.add(t.guid,t.message);return r}var w=r(617748),S=r(707425),N=r(787538),I=r(255054),E=r(843717),D=r(999083),F=r(266808),T=r(824570),P=r(957501),A=r.n(P),$=r(236631),_=r(911990),O=r(585627);let z=(0,S.Sv)("bookmarkSettings",{bookmarks:{}}),B=(0,l.eU)(e=>{let t=e(z),r=e(p.Cc).id;return new Set((t.bookmarks[r]??[]).map(e=>e.id))});function U(){let[e,t]=(0,l.fp)(z),r=(0,l.md)(p.Cc).id,n=s.useCallback(n=>{t({...e,bookmarks:{...e.bookmarks,[r]:n(e.bookmarks[r]||[])}})},[e,r,t]),i=s.useCallback((e,t)=>{n(r=>[...r,{id:e,name:t}])},[n]),a=s.useCallback(e=>{n(t=>t.filter((t,r)=>r!==e))},[n]),o=s.useCallback((e,t)=>{n(r=>r.map((r,n)=>n===e?{...r,name:t}:r))},[n]),c=s.useCallback((e,t)=>{n(r=>r.map((r,n)=>n===e?{...r,id:O.SW.fromString(t)}:r))},[n]);return{addBookmark:i,deleteBookmark:a,moveBookmarkDown:s.useCallback(e=>{n(t=>{if(e>=t.length-1)return t;let r=t.slice(),[n]=r.splice(e,1);return r.splice(e+1,0,n),r})},[n]),moveBookmarkUp:s.useCallback(e=>{n(t=>{if(e<=0)return t;let r=t.slice(),[n]=r.splice(e,1);return r.splice(e-1,0,n),r})},[n]),renameBookmark:o,updateBookmarkId:c,bookmarks:s.useMemo(()=>e.bookmarks[r]||[],[e,r])}}var X=r(674473);function L(e,t,r){return[...e.getObject(r)?.mapDescendants(e=>e.id)??[],...t?.getObject(r)?.mapDescendants(e=>e.id)??[]]}let R=(0,l.FZ)((0,l.eU)({}),(e,t,r)=>{let n=r(p.Cc),s=r(p.lX);switch(t.type){case"toggleExpanded":return(0,X.X9)(e,t.objectId,t.toggleSubtree?L(n,s,t.objectId):[]);case"expandAncestors":return(0,X.nE)(e,function(e,t,r){return[...e.getObject(r)?.mapAncestors(e=>e.id)??[],...t?.getObject(r)?.mapAncestors(e=>e.id)??[]]}(n,s,t.objectId),!0);case"expandDescendants":return(0,X.nE)(e,[t.objectId,...L(n,s,t.objectId)],!0);case"collapseDescendants":return(0,X.IO)(e,[t.objectId,...L(n,s,t.objectId)])}});var M=r(99723),Y=r(382629),H=r(115069);let W=(0,l.eU)({status:"initial"}),J=(0,l.eU)(0),K=(0,l.eU)(!1),V=(0,l.eU)(e=>{if(e(K)){let t=e(J);return`Indexing search results (this may take a moment)... [${t}/???]`}return null}),G=(0,S.Sv)("searchMode",S.Y6.Search),q=(0,l.eU)(e=>{let t=e(W),r=e(p.Cc),n=e(w.Sd);return"initial"===t.status?n.map(e=>r.getObject(e)).filter(Y.Vq).map(e=>({object:e,matches:[]})).reverse():"results"in t&&t.results.length>0?t.results:null}),Z=(0,l.eU)(e=>{let t=e(W);if("searching"===t.status&&0===t.results.length){let t=["Searching..."],r=e(V);return r&&t.push(r),t}if("success"===t.status&&0===t.results.length){let t=["No results found."],r=e(p.Cc);return r instanceof H.G2&&t.push("Some content may be unavailable because of incremental loading"),"hide"===r.sensitiveTextPolicy&&t.push("Searching text fields is limited beacuse text redaction has been applied."),t}return"error"===t.status?["Error searching:",String(t.error)]:null}),Q=(0,l.eU)(e=>{if(e(G)!==S.Y6.Filter)return null;let t=e(W);return"results"in t?t.results.map(e=>e.object):null}),ee=(0,l.eU)(e=>{if(e(G)!==S.Y6.Filter)return null;let t=e(Z);return t?t.join(" "):null}),et=(0,S.Sv)("sortOrder",S.hX.Position),er=(0,l.eU)(e=>{let t=[S.hX.Position,S.hX.Name,S.hX.NodeId];return e(p.Cc).rootObjects[0]?.displayProperties.memoryFraction!=null&&t.push(S.hX.Memory),t.sort(),t}),en=(0,l.eU)(e=>{switch(e(et)){case S.hX.Position:return ei;case S.hX.Name:return es;case S.hX.Memory:return ea;case S.hX.NodeId:return el}});function es(e,t){return e.displayProperties.name.localeCompare(t.displayProperties.name)}function ei(e,t){let[r,n]=eo(e,t);if(r&&n){let e=r.parentIndex?.position,t=n.parentIndex?.position;if(null==e&&null==t)return 0;if(null==t)return 1;if(null==e)return -1;if(e<t)return -1;else if(e>t)return 1}return es(e,t)}function el(e,t){let[r,n]=eo(e,t);if(r&&n){let{sessionID:e,localID:t}=r.guid??{localID:-1,sessionID:-1},{sessionID:s,localID:i}=n.guid??{localID:-1,sessionID:-1};return e-s||t-i}return ei(e,t)}function ea(e,t){return(t.displayProperties.memoryFraction??0)-(e.displayProperties.memoryFraction??0)||ei(e,t)}function eo(e,t){return"nodeChange"in e&&"nodeChange"in t?[e.nodeChange,t.nodeChange]:[null,null]}var ec=r(727989),ed=r(403671),eu=r(110178),eh=r(665261),ep=r(192075),ex=r(770484),ef=r(66293);let em=eh.ms,eg=eh.c$,ej=eh.wv;function eb({contextMenuData:{objectId:e,position:t},onClose:r}){let[i,a]=s.useState(0),o=t.left,c=t.top+i>window.innerHeight?t.top-i:t.top,{canSelectInApp:d,selectInApp:x}=s.useContext(w.H$),f=s.useRef(null);(0,eu.ww)(f,r);let m=(0,l.md)(p.Cc).getObject(e),g=m instanceof ef.R?m:null,j=m instanceof ex.E?m:null,[b,k]=(0,l.fp)(h.Oz),v=(0,l.Xr)(R);if(null==m)return null;let y=e=>()=>{e(),r()},C=m.children.length>0,S=(()=>{if(d?.(m))return y(()=>x(m))})(),N=e=>y(()=>F.glU.triggerAction(e,{guid:m.id})),I=b?.object.id===m.id;return(0,n.jsx)(em,{style:{...u.sx.fixed.$,left:o,top:c},dropdownRef:e=>{e&&a(e.clientHeight)},children:(0,n.jsxs)("div",{ref:f,children:[S&&(0,n.jsx)(eg,{onClick:S,children:"Jump to node"}),C&&(0,n.jsx)(eg,{onClick:y(()=>v({type:"expandDescendants",objectId:e})),children:"Expand descendants"}),C&&(0,n.jsx)(eg,{onClick:y(()=>v({type:"collapseDescendants",objectId:e})),children:"Collapse descendants"}),(S||C)&&(0,n.jsx)(ej,{}),I&&(0,n.jsx)(eg,{onClick:y(()=>k({type:"clear"})),children:"Stop diffing against this node"}),(!I||b?.type!==h.Lp.Layer)&&(0,n.jsx)(eg,{onClick:y(()=>k({type:"start",diffType:h.Lp.Layer,id:e})),children:"Layer diff against this node"}),(!I||b?.type!==h.Lp.Tree)&&(0,n.jsx)(eg,{onClick:y(()=>k({type:"start",diffType:h.Lp.Tree,id:e})),children:"Tree diff against this node"}),g&&(0,n.jsx)(ej,{}),g&&(0,n.jsx)(eg,{onClick:y(()=>{let e=JSON.stringify(g.nodeChange,null,2);navigator.clipboard.writeText(e)}),children:"Copy NodeChange JSON"}),j&&"DOCUMENT"!==j.type&&"CANVAS"!==j.type&&(0,n.jsx)(eg,{onClick:N("debug-print-as-test-code"),children:(0,ep.tx)("fullscreen_actions.debug-print-as-test-code")}),j&&"VECTOR"===j.type&&(0,n.jsx)(eg,{onClick:N("debug-print-vector-network-as-test-code"),children:(0,ep.tx)("fullscreen_actions.debug-print-vector-network-as-test-code")})]})})}var ek=r(62084);let ev=s.memo(function({diffType:e,id:t,primaryId:r,secondaryId:i,leftBadges:l,indent:a,index:o,isExpanded:c,isLeaf:d,isSelected:u,isSelectedSecondary:h,memoryFraction:p,rightBadges:x,name:f,style:m,select:g,toggle:j,showContextMenu:b}){let k=s.useCallback(e=>{e.preventDefault(),b({objectId:t,position:{left:e.clientX,top:e.clientY}})},[t,b]);return(0,n.jsxs)(ek.Z,{changeType:e,indent:a,isExpanded:c,isLeaf:d,isSelected:u,isSelectedSecondary:h,keyboardNavigationPath:[o],onContextMenu:k,onMouseEnter:()=>{F.Ez5&&F.Ez5.editorState().figmaScopeHighlightedNode.set(t)},onMouseLeave:()=>{F.Ez5&&F.Ez5.editorState().figmaScopeHighlightedNode.set("")},select:()=>g(t),style:m,toggleExpanded:e=>j(t,e),children:[(0,n.jsx)(ec.IV,{badges:l}),(0,n.jsx)(ed.nK,{id:r}),i&&(0,n.jsx)(ed.nK,{id:i,secondary:!0}),(0,n.jsx)("div",{title:f,className:$.s.ellipsis.noWrap.overflowHidden.$,children:f}),(0,n.jsx)(_.M,{}),(0,n.jsx)(ec.IV,{badges:x}),null!=p&&(0,n.jsxs)("span",{className:$.s.colorTextSecondary.$,title:"Node memory usage",children:[(100*p).toFixed(3),"%"]})]})});function ey({style:e,data:{displayedObjects:t,selectedId:r,selectedIds:s,...i},index:l}){let a=t[l],o=(0,T.zN)(e);return(0,n.jsx)(ev,{...a,...i,isSelected:r===a.id,isSelectedSecondary:!!a&&s.includes(a.id),style:o,index:l})}let eC=[];function ew({appSelection:e}){let t=(0,l.md)(eS),[r,i]=(0,l.fp)(w.AJ),a=(0,T.k9)(()=>e?.guids??eC,[e?.guids]),[o,c]=s.useState(null),d=s.useRef(null);s.useEffect(()=>{let e=t.findIndex(e=>e.id===r);e>=0&&d.current?.scrollToItem(e,"smart")},[t,r]);let u=(0,l.Xr)(R);s.useEffect(()=>{u({type:"expandAncestors",objectId:r})},[u,r]);let h=s.useCallback((e,t)=>{u({type:"toggleExpanded",objectId:e,toggleSubtree:t})},[u]),p=(0,l.md)(ee);return 0===t.length?(0,n.jsx)("div",{children:p??"Empty Scene"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.A,{disableWidth:!0,children:({height:e})=>(0,n.jsx)(E.Y1,{itemSize:18,itemCount:t.length,height:e,ref:d,itemData:{displayedObjects:t,selectedId:r,selectedIds:a,select:i,toggle:h,showContextMenu:c},width:"100%",children:ey})}),o&&(0,n.jsx)(eb,{contextMenuData:o,onClose:()=>{c(null)}})]})}let eS=(0,l.eU)(e=>{let t=e(B),r=e(p.Cc);return(e(eN)??e(eI)).map(e=>({...e,rightBadges:[...e.rightBadges,...t.has(e.id)?[{type:"bookmark",value:"Bookmarked"}]:[],...r.getAdditionalBadges?.(e.id)||[]]}))}),eN=(0,l.eU)(e=>{let t=e(Q);return t?t.map(e=>({...e.displayProperties,diffType:void 0,id:e.id,indent:0,isExpanded:!1,isLeaf:!0})):null}),eI=(0,l.eU)(e=>{let t=e(p.Cc).rootObjects,r=e(h.sg),n=e(R),s=e(en),i=(()=>{switch(r.type){case h.Lp.Tree:return[r.object];case h.Lp.Full:return r.resource.rootObjects;default:return[]}})(),l={sortFn:s,expandedIds:n};return A()(t,e=>{if(!e)return[];if(0===i.length)return eE(e,0,l);let t=eF(e,i);return t?eD(e,t,0,l):function e(t,r,n,s){let i=t.id,l=t.children,a=0===l.length,o=!!s.expandedIds[i],c=!1,d=A()(l,t=>{let i=(()=>{let i=eF(t,r);if(i)return eD(t,i,n+1,s);let l=r.filter(e=>e.someAncestor(e=>e.id===t.id,{includeSelf:!0}));return l.length>0?e(t,l,n+1,s):eE(t,n+1,s)})();return c=c||i[0]?.diffType!=null,i}),u={...t.displayProperties,diffType:c?"CHILD_MODIFIED":void 0,id:i,indent:n,isExpanded:o,isLeaf:a};return o?[u,...d]:[u]}(e,i,0,l)})});function eE(e,t,r){let n=e.id,s=e.children,i=0===s.length,l=!!r.expandedIds[n],a={...e.displayProperties,diffType:void 0,id:n,indent:t,isExpanded:l,isLeaf:i};return l?[a,...A()(eT(s,r.sortFn),e=>eE(e,t+1,r))]:[a]}function eD(e,t,r,n){let s=e??t;if(!s)throw Error("Diffing two nothings");if(e&&t&&e.id!==t.id)throw Error("Diffing nodes with mismatched keys");let i=s.id,l=eT(e?.children??[],n.sortFn),a=eT(t?.children??[],n.sortFn),o=(0,D.TR)(l,a,e=>e.id),c=!1,d=A()(o,({left:e,right:t})=>{let s=eD(e,t,r+1,n);return c=c||s[0]?.diffType!=null,s}),u=(0,h.wc)(e,t,c),p=e?.displayProperties.name,x=t?.displayProperties.name,f=null!=p&&null!=x&&p!==x?`${p} <=> ${x}`:s.displayProperties.name,m=!!n.expandedIds[i],g={...s.displayProperties,diffType:u,id:i,indent:r,isExpanded:m,isLeaf:0===o.length,name:f};return m?[g,...d]:[g]}function eF(e,t){return t.find(t=>t.id===e.id)}function eT(e,t){return e.slice().sort(t)}var eP=r(812714),eA=r(307829),e$=r(420680),e_=r(119805);r(120440);var eO=r(878604),ez=r(268389),eB=r(162954),eU=r(208754),eX=r(760238),eL=r(216940),eR=r(927287),eM=r(227244);let eY=(0,s.memo)(function(e){return(0,n.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,n.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M7.646 6.404a.5.5 0 0 1 .707 0l2.122 2.121a.5.5 0 0 1-.708.707L8 7.465 6.232 9.232a.5.5 0 0 1-.707-.707z"})})});var eH=r(602755);function eW(e){let{bookmarks:t,deleteBookmark:r,moveBookmarkDown:i,moveBookmarkUp:l,renameBookmark:a,updateBookmarkId:o}=U();return(0,n.jsx)(eO.bL,{defaultPosition:{x:window.innerWidth/2,y:window.innerHeight/2},onClose:e.onClose,width:400,children:(0,n.jsxs)(ez.vo,{children:[(0,n.jsx)(ez.Y9,{children:(0,n.jsx)(ez.hE,{children:"FigmaScope Bookmarks"})}),(0,n.jsx)(ez.nB,{children:(0,n.jsxs)(eB.bL,{className:"xrvj5dj x1nfngrj",children:[0===t.length&&(0,n.jsx)("div",{className:"x6s0dn4 x78zum5 xpyat2d xl56j7k",children:"No bookmarks"}),t.length>0&&(0,n.jsxs)(eU.f,{className:"xrvj5dj xuhvigx xg2d0mh",children:[(0,n.jsx)(eX.fh,{children:"Name"}),(0,n.jsx)(eX.fh,{children:"ID"})]}),t.map((e,c)=>(0,s.createElement)(eU.f,{className:"xrvj5dj xuhvigx xg2d0mh",key:c},(0,n.jsx)(eX.fh,{children:(0,n.jsx)(eL.p,{id:`edit-bookmark-name-${c}`,value:e.name,onChange:e=>a(c,e)})}),(0,n.jsx)(eX.fh,{children:(0,n.jsx)(eL.p,{id:`edit-bookmark-id-${c}`,value:e.id,onChange:e=>o(c,e)})}),(0,n.jsx)(eX.fh,{children:(0,n.jsxs)(eR.e,{"aria-label":`Bookmark actions for ${e.name}`,children:[(0,n.jsx)(e$.K,{"aria-label":"Delete bookmark",onClick:()=>r(c),children:(0,n.jsx)(eM.z,{})}),(0,n.jsx)(e$.K,{"aria-label":"Move bookmark up",disabled:0===c,onClick:()=>l(c),children:(0,n.jsx)(eY,{})}),(0,n.jsx)(e$.K,{"aria-label":"Move bookmark down",disabled:c===t.length-1,onClick:()=>i(c),children:(0,n.jsx)(eH.O,{})})]})})))]})})]})})}function eJ(){let[e,t]=(0,l.fp)(w.AJ),r=(0,l.md)(w.gg),{getTriggerProps:i,manager:a}=eA.b(),{addBookmark:o,bookmarks:c}=U(),[d,u]=s.useState(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eA.bL,{manager:a,children:[(0,n.jsx)("div",{className:"xrybvsa",children:(0,n.jsx)(e$.K,{...i(),"aria-label":"bookmarks",children:(0,n.jsx)(e_.j,{})})}),(0,n.jsxs)(eA.mc,{children:[(0,n.jsxs)(eA.YJ,{title:(0,n.jsx)(eA.r1,{children:"Bookmark settings"}),children:[(0,n.jsx)(eA.q7,{onClick:()=>{let t=r?.displayProperties.name??"Bookmark";o(e,`${t} - ${e}`)},children:"Add bookmark"}),(0,n.jsx)(eA.q7,{onClick:()=>{u(!0)},children:"Manage bookmarks"})]}),c.length?(0,n.jsx)(eA.YJ,{title:(0,n.jsx)(eA.r1,{children:"Bookmark list"}),children:c.map((e,r)=>(0,n.jsx)(eA.q7,{onClick:()=>{t(e.id)},children:e.name},r))}):null]})]}),d&&(0,n.jsx)(eW,{onClose:()=>u(!1)})]})}var eK=r(511570),eV=r.n(eK),eG=r(150062),eq=r(848561);function eZ({searchRef:e}){let t=(0,l.Xr)(w.AJ),r=(0,l.md)(q),i=(0,l.md)(Z),[a,o]=s.useState(!1),c=(0,l.md)(G)!==S.Y6.Filter&&a,d=s.useRef(null);(0,eu.ww)(d,()=>o(!1));let u=s.useCallback(e=>{o(!1),t(e.object.id)},[o,t]);return(0,n.jsxs)(eq.dP,{className:$.s.flex1.$,ref:d,allowVim:!0,children:[(0,n.jsx)(eQ,{searchRef:e,setShowSearchResults:o}),c&&(r?(0,n.jsx)(e1,{searchResults:r,selectResult:u}):i?(0,n.jsx)(e2,{text:i}):null)]})}function eQ({searchRef:e,setShowSearchResults:t}){let r=(0,l.md)(G),i=function(){let e=(0,l.md)(p.Cc),t=(0,l.Xr)(W),r=(0,l.Xr)(J),n=(0,l.Xr)(K),i=s.useRef(0),a=s.useMemo(()=>(0,M.s)(s=>{let l=++i.current;n(!0);let a=new TaskController({priority:"user-visible"});scheduler.postTask(()=>n(!0),{signal:a.signal,delay:300}).catch(()=>{});let o=e.getObject(s);o&&t({status:"searching",results:[{object:o,matches:[{value:s,property:"id",isExact:!0}]}]}),e.getSearch(r).then(e=>e.searchWithText(s)).then(e=>{a.abort(),l===i.current&&t({status:"success",results:e})}).catch(e=>{console.error(e),a.abort(),l===i.current&&t({status:"error",error:e})})},200),[e,r,t,n]);return s.useCallback(e=>0===e.length?t({status:"initial"}):a(e),[a,t])}(),{setKeyboardNavigationElement:a}=(0,eq.M3)({path:[0,0],id:"input"});return(0,n.jsx)("input",{ref:t=>{a(t),e.current=t},type:"text",placeholder:r,className:"search_bar--searchBar--qnpUm",onChange:e=>i(e.target.value),onFocus:()=>t(!0)})}function e0({children:e}){return(0,n.jsx)("div",{className:$.s.absolute.zIndexModal.colorBg.b1.colorBorder.mt2.overflowAuto.$,style:{maxHeight:450,minWidth:500,boxShadow:"0px 2px 14px var(--color-shadow, rgba(0, 0, 0, 0.15))"},children:e})}function e1({searchResults:e,selectResult:t}){return(0,n.jsx)(e0,{children:e.map((e,r)=>(0,n.jsx)(e7,{result:e,index:r,onClick:()=>t(e)},e.object.id))})}function e2({text:e}){return(0,n.jsx)(e0,{children:(Array.isArray(e)?e:[e]).map((e,t)=>(0,n.jsx)("div",{className:$.s.colorBg.colorTextSecondary.px8.py4.$,children:e},t))})}function e7({result:e,index:t,onClick:r}){let{object:i,matches:l}=e,{displayProperties:a}=i,{setKeyboardNavigationElement:o,keyboardNavigationItem:c,isFauxFocused:d}=(0,eq.M3)({path:[1,t],id:i.id});return s.useEffect(()=>{c&&0===t&&c.fauxFocus()},[c,t]),(0,n.jsx)("button",{ref:o,className:eV()($.s.block.wFull.px4.py8.colorText.flex.itemsCenter.alignLeft.$,"search_bar--searchResult--0iOvc",d&&"search_bar--fauxFocus--BYHwu"),onClick:r,children:(0,n.jsxs)(_.Y,{spacing:4,children:[(0,n.jsx)(ec.IV,{badges:a.leftBadges}),(0,n.jsx)(ed.nK,{id:i.displayProperties.primaryId}),(0,n.jsx)(eG.R,{className:$.s.overflowHidden.$,text:a.name}),(0,n.jsx)(_.M,{}),l.filter(({property:e})=>!["id","guid","name","type","phase"].includes(e)).map(({property:e,value:t},r)=>(0,n.jsxs)(_.Y,{spacing:4,width:"hug-contents",children:[(0,n.jsxs)("div",{children:[e,":"]}),(0,n.jsx)("div",{children:t})]},r))]})})}var e6=r(652539);function e5({children:e}){return(0,n.jsx)("div",{className:$.s.colorBorder.px8.py4.bb1.bSolid.$,children:(0,n.jsx)(_.Y,{children:e})})}function e8(e){let t={className:"toolbar_components--iconButton--1-XNe",children:(0,n.jsx)(e6.B,{svg:e.svg}),title:e.label,"aria-label":e.label};return"href"in e?(0,n.jsx)("a",{...t,href:e.href,target:"blank"}):(0,n.jsx)("button",{...t,onClick:e.onClick,disabled:e.disabled})}var e4=r(129503),e9=r(718668);function e3({searchRef:e}){let[t,r]=(0,l.fp)(w.jI),[i,o]=(0,l.fp)(w.JN),c=!!s.useContext(w.H$).selectInApp,[d,u]=(0,l.fp)(G),[h,p]=(0,l.fp)(w.bA),[x,f]=(0,l.fp)(et),m=(0,l.md)(er);return(0,n.jsxs)(e5,{children:[(0,n.jsx)(eZ,{searchRef:e}),(0,n.jsxs)("select",{name:"filter-or-search",title:"Determines whether the text box searches or filters",onChange:e=>{u(e.target.value)},defaultValue:d,children:[(0,n.jsx)("option",{value:S.Y6.Search,children:"Search"}),(0,n.jsx)("option",{value:S.Y6.Filter,children:"Filter"})]}),(0,n.jsx)("select",{name:"sort",title:"Sets the left panel sort order",onChange:e=>{let t=e.target.value;a.az.trackDefinedEvent("figmascope.sort_order_change",{order:function(e){switch(e){case S.hX.Position:return"position";case S.hX.Name:return"name";case S.hX.Memory:return"memory";case S.hX.NodeId:return"node_id"}}(t)}),f(t)},defaultValue:x,children:m.map(e=>(0,n.jsxs)("option",{value:e,children:["Sort by ",e]},e))}),c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{name:"follow-selection",type:"checkbox",checked:h,onChange:e=>p(e.target.checked)}),(0,n.jsx)("label",{htmlFor:"follow-selection",children:"Follow"})]}),(0,n.jsx)(e8,{label:"Select Previous",onClick:()=>{r(),a.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"button"})},disabled:!t,svg:e4.A}),(0,n.jsx)(e8,{label:"Select Next",onClick:()=>{o(),a.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"button"})},disabled:!i,svg:e9.A}),(0,eP.k)().figmascope_bookmarks&&(0,n.jsx)(eJ,{})]})}var te=r(815701),tt=r(577693),tr=r(555013),tn=r(472207),ts=r(380980),ti=r(458609),tl=r(619883),ta=r(821527);function to({selectedObject:e,diffObject:t,onClose:r}){let s=(0,l.md)(v),[i,a]=(0,l.fp)(h.Oz);return(0,n.jsxs)(e5,{children:[e?i&&t?(0,n.jsx)(tu,{selectedObject:e,diffObject:t,diffState:i,setDiffState:a}):(0,n.jsx)(td,{object:e}):t?(0,n.jsx)(td,{object:t}):(0,n.jsx)(_.M,{}),s&&(0,n.jsx)(th,{}),(0,n.jsx)(e8,{label:"Help",href:tn.e,svg:ts.A}),r&&(0,n.jsx)(e8,{label:"Close FigmaScope",onClick:r,svg:ta.A})]})}let tc=$.s.flex1.ml10.my4.$;function td({object:e}){return(0,n.jsx)("div",{className:tc,children:(0,n.jsx)("span",{className:$.s.fontSemiBold.$,children:e.displayProperties.longName})})}function tu({selectedObject:e,diffObject:t,diffState:r,setDiffState:s}){let i=(0,l.Xr)(w.AJ);return(0,n.jsxs)("div",{className:$.s.flex1.ml10.my4.$,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:$.s.colorTextSecondary.$,children:"Diffing "}),(0,n.jsx)("span",{className:$.s.fontSemiBold.$,children:e.displayProperties.longName}),(0,n.jsx)("span",{className:$.s.colorTextSecondary.$,children:" against "}),(0,n.jsx)("span",{className:$.s.fontSemiBold.$,children:t.displayProperties.longName})]}),r&&(0,n.jsx)("div",{className:$.s.colorTextSecondary.mt8.$,children:(0,n.jsxs)(_.Y,{spacing:8,width:"hug-contents",height:"hug-contents",verticalAlignItems:"start",children:[(0,n.jsxs)("span",{children:["Snapshot of"," ",(0,n.jsx)(tr.CY,{onClick:()=>i(r.object.id),className:$.s.colorTextFigjam.fontSemiBold.$,trusted:!0,children:r.object.displayProperties.name}),r.type===h.Lp.Tree&&" and full subtree"," was taken at"," ",r.time.toLocaleTimeString("en-US")]}),(0,n.jsx)(tr.CY,{onClick:()=>s({type:"refresh"}),className:$.s.colorTextDesign.$,trusted:!0,children:"Refresh"}),(0,n.jsx)(tr.CY,{onClick:()=>s({type:"clear"}),className:$.s.colorTextDanger.$,trusted:!0,children:"Finish"})]})})]})}function th(){let[e,t]=(0,l.fp)(y),r=e.status===d.r.LOADING;return s.useEffect(()=>{t()},[t]),(0,n.jsx)(e8,{label:r?"Fetching scene graph validation failures":"Refetch scenegraph validation failures",onClick:t,svg:r?ti.A:tl.A})}var tp=r(171660);function tx({children:e}){return(0,n.jsx)("div",{className:$.s.hFull.$,children:(0,n.jsxs)(_.Y,{direction:"vertical",width:"fill-parent",height:"fill-parent",padding:0,spacing:0,children:[(0,n.jsx)(tf,{}),e]})})}function tf(){let{name:e,metadata:t}=(0,l.md)(p.Cc);return(0,n.jsxs)(_.Y,{direction:"horizontal",width:"fill-parent",height:32,padding:8,spacing:32,backgroundColor:"toolbar",children:[e&&(0,n.jsx)(tp.E,{fontWeight:"bold",color:"toolbar",children:e}),t&&Object.entries(t).map(([e,t])=>t&&(0,n.jsxs)("span",{children:[(0,n.jsxs)(tp.E,{color:"toolbar-secondary",children:[e,": "]}),(0,n.jsx)(tp.E,{color:"toolbar",fontFamily:"monospace",fontWeight:"bold",children:t})]},e))]})}var tm=r(753639);let tg=s.memo(function({embedded:e=!1,emptyStateContent:t,onClose:r,appSelection:s,setAppSelection:i}){let a=(0,l.md)(p.lu);switch(a.status){case d.r.INIT:return t??(0,n.jsx)(N.zG,{});case d.r.LOADING:return(0,n.jsx)(N.zG,{});case d.r.FAILURE:return(0,n.jsx)(N.rf,{error:a.error});case d.r.SUCCESS:}if(0===a.value.primaryResource.rootObjects.length)return(0,n.jsx)(N.rf,{error:"No root objects found. This is likely a bug - please report in #figmascope."});let o=(0,n.jsx)(tj,{appSelection:s,setAppSelection:i,onClose:r});return e?o:(0,n.jsx)(tx,{children:o})});function tj({onClose:e,appSelection:t,setAppSelection:r}){let x=s.useRef(null),f=s.useRef(null),{windowInnerWidth:m}=(0,o.l)(),[g,j]=(0,l.fp)(tb),[b,k]=(0,l.fp)(tk),[v,C]=(0,i.i)({onDrag(e){let t=e.clientX/m;j(`${(100*t).toFixed(2)}%`)}}),[S,N]=(0,i.i)({onDrag(e){let t=f.current;if(!t)return;let r=(e.clientX-t.getBoundingClientRect().left)/t.clientWidth;k(`${(100*r).toFixed(2)}%`)}}),I=(0,l.Xr)(w.jI),E=(0,l.Xr)(w.JN),D=s.useCallback(e=>{let t=x.current;document.activeElement!==t&&(e.keyCode===c.Uz.FORWARD_SLASH&&t?(t.focus(),e.preventDefault()):e.keyCode===c.Uz.BRACKET_LEFT?(a.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"keyboard"}),I()):e.keyCode===c.Uz.BRACKET_RIGHT&&(a.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"keyboard"}),E()))},[I,E]),F=(0,l.md)(p.Cc);window.figmaScope=F,window.figmaScopeScene=F,function(e){let[t,r]=(0,l.fp)(y);t.status===d.r.SUCCESS&&e?.setSceneGraphValidationInfo?.(t.value),(0,s.useEffect)(()=>{r()},[r])}(F);let T=(0,l.md)(w.AJ),P=(0,l.md)(w.gg),A=(0,l.md)(h.tH);return(0,n.jsx)(w.q,{appSelection:t,setAppSelection:r,children:(0,n.jsxs)("div",{className:tm.zr,style:u.sx.if(v||S,{cursor:"ew-resize"}).$,onKeyDown:D,children:[(0,n.jsxs)("div",{className:tm.Pd,style:{width:g},children:[(0,n.jsx)(e3,{searchRef:x}),(0,n.jsxs)(te.o,{className:tm._H,children:[(0,n.jsx)("div",{...C({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),(0,n.jsx)(ew,{appSelection:t})]})]}),(0,n.jsxs)("div",{className:tm.io,children:[(0,n.jsx)(to,{selectedObject:P,diffObject:A,onClose:e}),(P||A)&&(0,n.jsxs)("div",{className:tm._t,ref:f,children:[(0,n.jsxs)(te.o,{className:tm.S3,style:{width:b},children:[(0,n.jsx)("div",{...N({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),(0,n.jsx)(tt.P,{panel:"middle",items:P?.rawProperties,diffItems:A?.rawProperties,extraItems:void 0},T)]}),(0,n.jsx)(te.o,{className:tm.xK,children:(0,n.jsx)(tt.P,{panel:"right",items:P?.computedProperties,diffItems:A?.computedProperties,extraItems:F.getAdditionalProperties?.(T)},T)})]})]})]})})}let tb=(0,S.Sv)("leftPanelWidth","35%"),tk=(0,S.Sv)("rightPanelWidth","50%")}}]);

//# debugId=5e9687bb-0975-5f3f-ad1b-3bcb4ec979f0

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/73da76cca7524bde89feeb964c68fc4f55b15f5d/914-5c91b0e3a3e2cd70.min.js.map