"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="fef746dc-cd35-54e9-8687-2f91027670f4")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[2677],{180390:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity=".8" fill-rule="evenodd" stroke="none" d="m17.122 11.64-.012-.003-6.666-1.9 4.91 4.91c.195-.095.414-.147.646-.147.828 0 1.5.672 1.5 1.5 0 .828-.672 1.5-1.5 1.5-.828 0-1.5-.672-1.5-1.5 0-.232.053-.45.146-.647L9.743 10.45l1.832 6.39.01.037.008.037C12.015 18.961 13.829 20.5 16 20.5c.494 0 .968-.08 1.411-.225l.585-.193.435.435 1.847 1.847 2.122-2.121-1.865-1.865-.43-.43.184-.58c.137-.43.211-.89.211-1.368 0-2.093-1.43-3.854-3.366-4.356l-.012-.003zm5.985 7.895.707.708-.707.707-2.122 2.121-.707.707-.707-.707-1.847-1.847c-.542.18-1.122.276-1.724.276-2.655 0-4.871-1.882-5.387-4.384L8.325 9.132 8 8l1.133.323 8.252 2.353C19.752 11.29 21.5 13.44 21.5 16c0 .582-.09 1.144-.258 1.67z"/></svg>'},302396:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M2 3h5v2H2zM1 5V2h7v3h7v9H1zm7 1H2v7h12V6z"/></svg>'},731272:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M13.5 9h1V7.5c0-.828.672-1.5 1.5-1.5.828 0 1.5.672 1.5 1.5V9H23v15H9V9zm5-1H24v17H8V8h5.5v-.5C13.5 6.12 14.62 5 16 5c1.38 0 2.5 1.12 2.5 2.5zM16 12.5c-1.105 0-2 .895-2 2 0 1.105.895 2 2 2 1.105 0 2-.895 2-2 0-1.105-.895-2-2-2m-3 2c0-1.657 1.343-3 3-3 1.657 0 3 1.343 3 3 0 1.212-.718 2.255-1.752 2.729 1.317.503 2.252 1.778 2.252 3.271v.5h-1v-.5c0-1.38-1.12-2.5-2.5-2.5-1.38 0-2.5 1.12-2.5 2.5v.5h-1v-.5c0-1.493.935-2.768 2.252-3.271C13.718 16.755 13 15.712 13 14.5"/></svg>'},858457:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#000" fill-opacity=".9" fill-rule="evenodd" stroke="none" d="M14 10.443c0-.35.349-.59.676-.468l2 .75c.195.073.324.26.324.468v3.614c0 .208-.13.395-.324.468l-2 .75c-.327.123-.676-.119-.676-.468zm4 3.057v1.307c0 .625-.388 1.185-.973 1.405l-2 .75c-.98.367-2.027-.358-2.027-1.405v-5.114c0-1.047 1.046-1.772 2.027-1.404l1.973.74V9c0-4.418-3.582-8-8-8-4.418 0-8 3.582-8 8v.778l1.973-.74C3.953 8.671 5 9.396 5 10.443v5.114c0 1.047-1.046 1.772-2.027 1.405l-2-.75c-.585-.22-.973-.78-.973-1.405V9c0-4.97 4.03-9 9-9 4.97 0 9 4.03 9 9zm-17 0v-2.307c0-.208.13-.395.324-.468l2-.75c.327-.123.676.119.676.468v5.114c0 .35-.349.59-.676.468l-2-.75c-.195-.073-.324-.26-.324-.468z"/></svg>'},690182:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity=".8" fill-rule="evenodd" stroke="none" d="M15.373 22h1.258c.28-.32.616-.597.995-.819 1.479-.862 4.005-.909 5.386.109H24.5v-9.2c0 0-.797-2.25-4.42-2.25-1.875 0-2.902.602-3.456 1.184-.389.407-.545.804-.6.976h-.049c-.054-.172-.21-.57-.599-.976-.554-.582-1.581-1.184-3.456-1.184-3.623 0-4.42 2.25-4.42 2.25v9.19h1.488c1.382-1.019 3.91-.97 5.388-.105.38.223.717.502.997.825m1.127-9.711v8.457q.293-.236.622-.428c.927-.541 2.115-.796 3.241-.787 1.006.008 2.081.227 2.952.759h.185v-7.973l-.03-.05c-.086-.138-.236-.339-.474-.545-.461-.397-1.33-.882-2.916-.882-1.586 0-2.34.483-2.694.835-.189.186-.296.367-.354.49-.029.061-.045.108-.052.131l-.005.017.001-.006.002-.008v-.005l.001-.002v-.002l-.005-.001zm-1 0h-.475l-.005.001v.002l.001.002.001.005.002.008.001.006q.001.001-.005-.017c-.007-.023-.024-.07-.053-.131-.057-.123-.164-.303-.353-.49-.354-.352-1.108-.835-2.694-.835-1.585 0-2.455.485-2.916.882-.238.206-.388.407-.474.545l-.03.05v7.963h.185c.872-.533 1.948-.752 2.954-.759 1.128-.008 2.316.249 3.243.792q.326.191.618.426z"/></svg>'},1757:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="m13 10.098.765.478 8 5 .678.424-.678.424-8 5-.765.478zm1 1.804v8.196L20.557 16z"/></svg>'},809027:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"><path fill="#b3b3b3" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M8 14h15v1H8z"/></svg>'},97605:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"><path fill="#b3b3b3" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M15 15v7h1v-7h7v-1h-7V7h-1v7H8v1z"/></svg>'},100203:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M16.708 6.895c-1.39 0-2.518 1.127-2.518 2.518 0 1.391 1.127 2.52 2.518 2.52 1.391 0 2.52-1.129 2.52-2.52 0-1.39-1.129-2.518-2.52-2.518m-3.314 2.518c0-1.83 1.484-3.314 3.314-3.314 1.83 0 3.315 1.484 3.315 3.314 0 1.65-1.205 3.017-2.781 3.272 2.76.246 4.968 2.38 4.968 5.04v1.565H2.458v-1.565c0-2.66 2.207-4.794 4.968-5.04-1.577-.255-2.781-1.623-2.781-3.272 0-1.83 1.484-3.314 3.314-3.314 1.83 0 3.314 1.484 3.314 3.314 0 1.65-1.204 3.017-2.78 3.272 1.554.138 2.933.875 3.841 1.968.907-1.093 2.283-1.83 3.84-1.968-1.576-.255-2.78-1.623-2.78-3.272M3.253 17.725c0-2.325 2.073-4.268 4.706-4.268 2.633 0 4.706 1.943 4.706 4.268v.77H3.253zm10.207.77h7.954v-.77c0-2.325-2.072-4.268-4.706-4.268-1.63 0-3.055.75-3.897 1.876.414.71.65 1.523.65 2.392v.77zM5.44 9.412c0-1.39 1.128-2.518 2.52-2.518 1.39 0 2.518 1.127 2.518 2.518 0 1.391-1.128 2.52-2.519 2.52-1.391 0-2.519-1.129-2.519-2.52"/></svg>'},817229:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#000" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M.2 9h17.6l.2.4v.6H0v-.6zm0 0h17.6l.2.4v.6H0v-.6zM0 17h18v1H0zm0 0h18v1H0zM7 6h4v1H7zm0 0h4v1H7zm0-6h4v1H7zm0 0h4v1H7zm5 3h2.8l3 6h-1.105L14.2 4H12zM6 3H3.2l-3 6h1.105L3.8 4H6zm-6 7h1v7H0zm0 0h1v7H0zm17 0h1v7h-1zm0 0h1v7h-1zM6 0h1v7H6zm0 0h1v7H6zm5 0h1v7h-1zm0 0h1v7h-1z"/></svg>'},213788:(e,t,a)=>{a.d(t,{$P:()=>p,Dz:()=>i,E8:()=>x,G8:()=>T,Jh:()=>d,Mm:()=>c,Ms:()=>v,Q$:()=>j,QB:()=>f,VA:()=>y,Vf:()=>_,W2:()=>m,_R:()=>u,b:()=>n,gt:()=>E,hx:()=>l,jG:()=>g,o:()=>r,oE:()=>h,y3:()=>S,yH:()=>o,yl:()=>s});let s="org_upgrade_single_team_modal--modal--ksTCZ",r="org_upgrade_single_team_modal--planModalHeader--NF9Rm",i="org_upgrade_single_team_modal--planModalHeaderText--ooJle",l="org_upgrade_single_team_modal--planModalTitle--i2U18 text--fontPos24--YppUD text--_fontBase--QdLsd",n="org_upgrade_single_team_modal--closeButton--xlW3E",d="org_upgrade_single_team_modal--planModalHeaderDivider--h1IPt",o="org_upgrade_single_team_modal--planGrid--vjBAw",c="org_upgrade_single_team_modal--planGrid__vertDivided--GAHYl",m="org_upgrade_single_team_modal--seeAllFeatures--86diJ",_="org_upgrade_single_team_modal--teamPlan--K5SN-",u="org_upgrade_single_team_modal--itemList--pQSea",p="org_upgrade_single_team_modal--planItem--BQHfH",h="org_upgrade_single_team_modal--checkIcon--vhgrx",x="org_upgrade_single_team_modal--planSelectButton--CKoDi",g="org_upgrade_single_team_modal--scrollContainer--sufjZ",y="org_upgrade_single_team_modal--subtitle--nt2Dh",f="org_upgrade_single_team_modal--planNameBase--R8WKM text--fontPos16--oMC-G text--_fontBase--QdLsd",v="org_upgrade_single_team_modal--planPriceView--L7aSJ",S="org_upgrade_single_team_modal--priceRow--jzozY text--fontPos11--2LvXf text--_fontBase--QdLsd",T="org_upgrade_single_team_modal--priceFigureWithFigjam--0E8M8 text--fontPos16--oMC-G text--_fontBase--QdLsd",j="org_upgrade_single_team_modal--figmaPriceWithDevMode--k-2WW",E="org_upgrade_single_team_modal--devModeText--EKgJM"},723347:(e,t,a)=>{a.d(t,{$g:()=>c,DI:()=>o,Eh:()=>l,GK:()=>r,J1:()=>d,KV:()=>i,b:()=>s,cr:()=>h,jG:()=>m,kz:()=>_,nW:()=>p,o8:()=>u,u1:()=>n,wv:()=>x});let s="universal_upgrade_sequence--closeButton--Us7fC",r="universal_upgrade_sequence--modalTitle--j-zLx text--fontPos18--rYXJb text--_fontBase--QdLsd",i="universal_upgrade_sequence--modalSubtitle--ucPxW text--fontPos14--OL9Hp text--_fontBase--QdLsd",l="universal_upgrade_sequence--createTeamInput--kWzFx basic_form--labeledInputGroup--aeD6L text--fontPos14--OL9Hp text--_fontBase--QdLsd",n="universal_upgrade_sequence--spinner--CvsHJ",d="universal_upgrade_sequence--tileUpgradeButton--GxMSU",o="universal_upgrade_sequence--nextButtonSmall--tUSIb universal_upgrade_sequence--nextButton--F2XJ4",c="universal_upgrade_sequence--createTeamSection--XhWMJ",m="universal_upgrade_sequence--scrollContainer--BQFbB",_="universal_upgrade_sequence--scrollContainerTopBorder--yuAD-",u="universal_upgrade_sequence--scrollContainerBottomBorder--CwNTV",p="universal_upgrade_sequence--teamTileContainer--kS2oM org_self_serve--teamLargeTileContainer--3M0cY",h="universal_upgrade_sequence--teamTile--WZEIz org_self_serve--teamTileLarge--HawGF text--fontPos14--OL9Hp text--_fontBase--QdLsd",x="universal_upgrade_sequence--lastTeamTile--zfV5W universal_upgrade_sequence--teamTile--WZEIz org_self_serve--teamTileLarge--HawGF text--fontPos14--OL9Hp text--_fontBase--QdLsd"},468896:(e,t,a)=>{a.d(t,{$y:()=>m,Bb:()=>E,ER:()=>A,Ed:()=>g,Et:()=>r,I1:()=>x,Jo:()=>u,K6:()=>b,M7:()=>s,N5:()=>p,Nd:()=>l,O2:()=>T,Qv:()=>h,Uu:()=>o,W:()=>n,Xq:()=>y,aK:()=>d,cc:()=>v,i9:()=>c,iv:()=>f,jg:()=>j,kH:()=>N,li:()=>i,nm:()=>S,uD:()=>_});let s="org_self_serve_figjam--stepContent--PmiVT",r="org_self_serve_figjam--stepContentTeamCreation--aecM6",i="org_self_serve_figjam--menuContainer--2R9vL",l="org_self_serve_figjam--cancelMenuItem--xWgkC",n="org_self_serve_figjam--pageTitle--FnN-D",d="org_self_serve_figjam--summaryDivider--Mcrvf",o="org_self_serve_figjam--flex--zpEBd",c="org_self_serve_figjam--svgText--d64Nk org_self_serve_figjam--flex--zpEBd",m="org_self_serve_figjam--helpIcon--i-O5F",_="org_self_serve_figjam--textLink--oq58H org_self_serve_figjam--billingSubText--0-Z4w",u="org_self_serve_figjam--confirmationBox---MCFL org_self_serve_figjam--stepRect--eHVrW org_self_serve_figjam--boxBorder--AaC8L",p="org_self_serve_figjam--flexBox--wb7nK",h="org_self_serve_figjam--confirmationPageText--OPG5S text--fontPos13--xW8hS text--_fontBase--QdLsd",x="org_self_serve_figjam--confirmationCharge--V8Lpo org_self_serve_figjam--confirmationPageText--OPG5S text--fontPos13--xW8hS text--_fontBase--QdLsd",g="org_self_serve_figjam--confirmationRow--0-0Jf",y="org_self_serve_figjam--confirmationHomeButton--bokpb text--fontNeg13--7Ebf5 text--_fontBase--QdLsd text--_negText--j9g-L",f="org_self_serve_figjam--confirmationAmountDue--LoEoe",v="org_self_serve_figjam--confirmationHeading--3108k",S="org_self_serve_figjam--confirmationLoadingText--uJKaf org_self_serve_figjam--msaLabelText--HQg1L",T="org_self_serve_figjam--greenCheck--wvkO-",j="org_self_serve_figjam--confirmationPage---8XoA",E="org_self_serve_figjam--createTeamContainer--o7rw4",N="org_self_serve_figjam--teamsContainer--oOa2W",b="org_self_serve_figjam--teamCheckboxContainer--Mznj-",A="org_self_serve_figjam--selectTeamsIcon--V-xyE"},233790:(e,t,a)=>{a.r(t),a.d(t,{EduReviewPage:()=>N});var s=a(104076),r=a(716976),i=a(903927),l=a(514223),n=a(555013),d=a(614735),o=a(13543),c=a(640718),m=a(101880),_=a(186180),u=a(652539),p=a(236631),h=a(192075),x=a(239904),g=a(218662),y=a(147046),f=a(483200),v=a(935167),S=a(111297),T=a(412469),j=a(821527);let E=e=>{let t=(0,i.d4)(t=>{let a=v.Xw.loadingKeyForPayload({teamId:e});return t.loadingState[a]}),a=(0,i.d4)(t=>t.teamUserByTeamId[e]||{}),s=(0,i.wA)();r.useEffect(()=>{s(v.Xw({teamId:e}))},[s,e]);let n=t!==l.r.SUCCESS;return r.useEffect(()=>{if(!n){let e=Object.keys(a).length;s(f.Az({numWhiteboardEditors:e})),s(f.js({numDesignEditors:e}))}},[s,n,a]),n};function N({selectedView:e}){let{teamId:t}=e,a=E(t),r=(0,i.wA)(),l=()=>{r(f.Nj({teamId:t,onCloseOrComplete:e.onCloseOrComplete}))};return(0,s.jsx)(S.fu,{name:"Edu Review",properties:{teamId:t},children:(0,s.jsx)("div",{children:(0,s.jsxs)(o.O,{menu:(0,s.jsx)(d.X,{onClick:()=>{r(y.sf({view:"team",teamId:t})),e.onCloseOrComplete?.()},children:(0,s.jsx)(u.B,{svg:j.A,className:"edu_review--modalCloseX--PeJlf",dataTestId:"close-button"})}),children:[(0,s.jsx)("span",{className:e.showBreadcrumbs?void 0:"edu_review--hidden--p1Flp",children:(0,s.jsx)(g.J,{index:3})}),(0,s.jsxs)("div",{className:p.s.flex.flexColumn.itemsCenter.alignCenter.$,children:[(0,s.jsx)(_.JR,{children:(0,h.tx)("edu.almost_done_everything_look_good")}),(0,s.jsx)(n.Kz,{multiple:4}),(0,s.jsx)(m.x,{isLoading:a,children:()=>(0,s.jsx)(c.o,{children:(0,s.jsx)(x.d,{selectedView:e,onClickConfirm:l,currency:(0,T.LN)(),canSeeBillingAddressExp:!1})})})]})]})})})}},963566:(e,t,a)=>{a.d(t,{f:()=>r});var s=a(716976);function r({tableContainerRef:e}){let[t,a]=s.useState(window.innerHeight),r=()=>{a(window.innerHeight)};s.useEffect(()=>(window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}),[]);let i=e.current?.getBoundingClientRect();return Math.max(t-(i?.top||0)-49-8-56,150)}},138105:(e,t,a)=>{a.d(t,{W:()=>i});var s=a(649693),r=a(599448);function i(e,t,a){if(0===e.length&&a)return{eligibleTeamsByTeamId:{},selectedTeamIds:new Set,eligibleUsersByUserId:{[a.user.id]:{...l(a.user),recommendedSeatTypeByTeamId:{},teamIds:[]}},selectedUserSeatTypes:{[a.user.id]:a.recommended_seat_type?.key??s.ud.EXPERT}};let i=e.reduce((e,t)=>(e[t.id]={...t,eligibleUsers:new Set},e),{}),n=new Set(Object.keys(i)),d={};t.forEach(e=>{let t=e.user,a=t.id;d[a]||(d[a]={...l(t),recommendedSeatTypeByTeamId:{},teamIds:[]}),d[a].recommendedSeatTypeByTeamId[e.team_id]=e.recommended_seat_type?.key??s.Gu.VIEW,d[a].teamIds.push(e.team_id),i[e.team_id]&&i[e.team_id].eligibleUsers.add(a)});let o=(0,r.h)({eligibleTeamsByTeamId:i,selectedTeamIds:n,eligibleUsersByUserId:d,selectedUserSeatTypes:{},currentUpgradingUserId:a?.user.id});return{eligibleTeamsByTeamId:i,selectedTeamIds:n,eligibleUsersByUserId:d,selectedUserSeatTypes:o}}function l(e){return{id:e.id,email:e.email,handle:e.handle,img_url:e.img_url}}},560806:(e,t,a)=>{a.d(t,{s:()=>r});var s=a(192075);function r({eligibleUsersByUserId:e,eligibleTeamsByTeamId:t,selectedTeamIds:a,currentUpgradingUserId:r}){let i=[];return 0===a.length&&r?i.push({id:r,handle:e[r].handle,email:e[r].email,img_url:e[r].img_url}):Object.values(e).filter(e=>e.teamIds.some(e=>a.includes(e))).forEach(e=>{let r=e.teamIds,l=a.filter(e=>r.includes(e)).map(e=>t[e]),n=1===l.length?l[0].name:(0,s.t)("checkout.multiple_teams_label");i.push({id:e.id,handle:e.handle,email:e.email,img_url:e.img_url,teams:n})}),i}},414085:(e,t,a)=>{a.d(t,{f:()=>s});var s=(e=>(e.SELECT_TEAMS="select_teams",e.ORG_CONFIRMATION="confirmation",e.SELECT_SEATS="select_seats",e.PAYMENT_AND_ADDRESS="payment_and_address",e.REVIEW="review",e))(s||{})},599448:(e,t,a)=>{a.d(t,{h:()=>r});var s=a(236753);function r({eligibleTeamsByTeamId:e,selectedTeamIds:t,eligibleUsersByUserId:a,selectedUserSeatTypes:r,currentUpgradingUserId:i}){if(0===t.size&&i)return{[i]:r[i]};let l={},n={};return t.forEach(t=>{e[t].eligibleUsers.forEach(e=>{if(!l[e]){if(r[e])l[e]=r[e];else{let s=a[e];n[e]||(n[e]=[]),n[e].push(s.recommendedSeatTypeByTeamId[t])}}})}),{...l,...Object.keys(n).reduce((e,t)=>(e[t]=(0,s.Up)(n[t]),e),{})}}},975687:(e,t,a)=>{a.r(t),a.d(t,{OrgUpgradeMultiTeamModal:()=>er});var s=a(104076),r=a(716976),i=a(903927),l=a(638004),n=a(207321),d=a(755444),o=a(833805),c=a(114339),m=a(769109),_=a(1188),u=a(555013),p=a(72138),h=a(652539),x=a(236631),g=a(192075),y=a(659062),f=a(525980),v=a(147046),S=a(366535),T=a(244205),j=a(111297),E=a(205729),N=a(649693),b=a(418149),A=a(449250),w=a(412469),C=a(104836),I=a(608175),R=a(826160),P=a(434225),k=a(354174),M=a(951002),O=a(382629),D=a(423128),L=a(517796),U=a(130249),B=a(906356),V=a(454967),G=a(871898),z=a(232362),$=a(781611),F=a(944350),H=a(295253);function q({currency:e,hideModal:t,choosePlan:a,TeamIllustration:r,upsellSource:l}){let n=(0,i.wA)();return(0,s.jsxs)("div",{className:x.s.flex.flexColumn.gap8.$,style:y.sx.add({padding:"48px 56px",maxWidth:"650px"}).$,children:[(0,s.jsx)("p",{className:x.s.textHeadingLarge.$,children:(0,g.tx)("org_upgrade.multi_team.bring_your_teams_together")}),(0,s.jsx)("p",{className:x.s.textHeadingMedium.$,style:y.sx.add({fontWeight:400}).$,children:(0,g.tx)("plan_comparison.campfire.org.description")}),(0,s.jsx)(U.e6,{className:"campfire_org_upgrade_multi_team_modal--closeButton--THg83",onClick:t,children:(0,s.jsx)(D.A,{})}),(0,s.jsxs)("div",{className:x.s.flex.gap16.$,children:[(0,s.jsxs)("div",{className:x.s.flex.flexColumn.gap16.flex1.mt16.$,children:[(0,s.jsx)(W,{currency:e}),(0,s.jsxs)("div",{children:[(0,s.jsx)(U.Ih,{onClick:a,children:(0,g.tx)("plan_comparison.campfire.choose_plan")}),(0,s.jsx)("div",{className:x.s.font11.lh16.alignCenter.mt4.$,children:(0,g.tx)("plan_comparison.campfire.or_contact_sales",{contactSalesLink:(0,s.jsx)("button",{className:x.s.colorTextBrand.cursorPointer.$,onClick:()=>n(S.to({type:B.lk,data:{source:V.B.ORG_SELF_SERVE_UPGRADE_MODAL}})),children:(0,g.tx)("plan_comparison.campfire.contact_sales")})})})]}),(0,s.jsx)("div",{className:x.s.bt1.bSolid.colorBorder.$}),(0,s.jsx)(X,{upsellSource:l})]}),(0,s.jsx)("div",{className:x.s.flex.flex1.itemsCenter.justifyCenter.$,children:r})]})]})}function W({currency:e}){let t={currency:e,tier:I.Ju.ORG,renewalTerm:I.IX.YEAR,unit:I.IX.MONTH},a=(0,E.jv)({billableProductKeys:b.N_,baseQuery:t}),[r]=(0,o.mI)(a);if(null===r.data)throw Error("Price data is null");let i=new w.vr(e);return(0,s.jsx)("div",{className:x.s.flex.flexColumn.$,children:b.N_.sort($.AG).map(e=>(0,O.uy)(r.data[e])?null:(0,s.jsxs)("div",{className:x.s.flex.justifyBetween.$,children:[(0,s.jsxs)("div",{className:x.s.flex.gap4.itemsCenter.$,children:[(0,G.B)({type:e,size:"24",removeBackgroundColor:!0}),(0,s.jsx)("p",{className:x.s.textBodyLarge.$,children:function(e){switch(e){case N.ud.EXPERT:return(0,g.t)("nux.campfire.full_seat");case N.ud.DEVELOPER:return(0,g.t)("nux.campfire.dev_seat");case N.ud.COLLABORATOR:return(0,g.t)("nux.campfire.collab_seat");case N.ud.CONTENT:return(0,g.t)("nux.campfire.content_seat");default:(0,M.xb)(e)}}(e)})]}),(0,s.jsx)("p",{className:x.s.textBodyMedium.$,children:(0,g.tx)("nux.price_per_month",{price:(0,s.jsx)("span",{className:x.s.textBodyLargeStrong.$,children:i.formatMoney(r.data[e].amount)})})})]},e))})}function X(e){let t=e.upsellSource===H.b.CONNECTED_PROJECTS_MAXIMUM_CONNECTIONS,a=[t?(0,g.tx)("plan_comparison.campfire.org.feature.org_connected_projects",{orgConnectionsLimit:z.b[F.Ag.ORG]}):null,(0,g.tx)("plan_comparison.campfire.org.feature.unlimited_teams"),(0,g.tx)("plan_comparison.campfire.org.feature.branching"),(0,g.tx)("plan_comparison.campfire.org.feature.security"),(0,g.tx)("plan_comparison.campfire.org.feature.scim"),(0,g.tx)("plan_comparison.campfire.org.feature.customizations")].filter(Boolean);return(0,s.jsx)("div",{children:a.map((e,a)=>{let r=t&&0===a?(0,s.jsx)("span",{className:x.s.textBodyLargeStrong.$,children:e}):(0,s.jsx)("span",{children:e});return(0,s.jsxs)("div",{className:x.s.flex.$,children:[(0,s.jsx)(L.g,{className:x.s.minW24.$,style:{"--color-icon":"var(--color-icon-secondary)"}}),(0,s.jsx)("p",{className:x.s.textBodyLarge.$,children:r})]},a)})})}let Y="org_upgrade_multi_team_modal--planModalDivider--Rnmy0";var J=a(213788),K=a(7452);let Z=(0,d.ck)("50ae1752a504eea59f2a3efac6b0f2d1ed74435a"),Q=(0,d.ck)("e2148969d5a469e76c053a23b6647d487e6d64ee"),ee=(0,d.ck)("fc0fcfadcfe50c96f4dcf859aabe1952c822ae2a");function et(e){return(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--planItem--P4LRr",children:[(0,s.jsx)(h.B,{svg:K.A,className:"org_upgrade_multi_team_modal--checkIcon--KnZJe"}),(0,s.jsx)("p",{children:e.text})]})}function ea(e){let t=(0,i.wA)(),a=()=>{t(S.Ce())},l=(0,f.s)(),d=r.useMemo(()=>[(0,g.t)("org_upgrade.multi_team.plan_items.shared_design_libraries"),(0,g.t)("org_upgrade.multi_team.plan_items.shared_fonts_and_styles"),(0,g.t)("org_upgrade.multi_team.plan_items.centralized_billing_and_admin_controls"),(0,g.t)("org_upgrade.multi_team.plan_items.single_sign_on_sso_integrations")],[]),_=()=>{a(),t(v.sf({view:"orgSelfServe",upsellSource:e.upsellSource}))},j=e=>(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--teamListEntry---bU9i",children:[(0,s.jsx)(R.Ro,{size:10,hideFallbackInitial:!0,entity:e,shape:"SQUARE"}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamListEntryName--aJZdJ ellipsis--ellipsis--Tjyfa",children:e.name})]},e.id),A=r.useMemo(()=>{switch(Object.keys(e.teams).length){case 2:return 184;case 3:return 192;default:return 221}},[e.teams]),C=J.G8,P=(0,w.wU)(),M=b.Oq.dict(e=>({currency:P.currency,billableProductKey:e,billableProductVariantKey:null,tier:I.Ju.ORG,renewalTerm:I.IX.YEAR,unit:I.IX.MONTH})),O=(0,E.SK)(M,E.Fq.UPSELL_MODALS),[D]=(0,o.mI)(O);if(null===D.data)throw Error("Price data is null");let L=D.data,U=(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamIllustrationLeftSection--MLN4f",style:y.sx.if(l,y.sx.add({width:"200px"})).$,children:(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--dynamicTeamListSection--KE5ZD",children:[(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--teamListHeader--Eyf-F",children:[(0,s.jsx)("img",{className:"org_upgrade_multi_team_modal--placeholderOrgLogo--vYLRQ",src:ee,draggable:!1,alt:""}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamListOrgName--EKk6-",children:(0,g.tx)("org_upgrade.multi_team.acme_inc")}),(0,s.jsx)(h.B,{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M12 16.05V9h1v7.05c1.141.232 2 1.24 2 2.45 0 1.21-.859 2.218-2 2.45V23h-1v-2.05c-1.141-.232-2-1.24-2-2.45 0-1.21.859-2.218 2-2.45m2 2.45c0 .828-.672 1.5-1.5 1.5-.828 0-1.5-.672-1.5-1.5 0-.828.672-1.5 1.5-1.5.828 0 1.5.672 1.5 1.5m5 4.5h1v-7.05c1.141-.232 2-1.24 2-2.45 0-1.21-.859-2.218-2-2.45V9h-1v2.05c-1.141.232-2 1.24-2 2.45 0 1.21.859 2.218 2 2.45zm2-9.5c0-.828-.672-1.5-1.5-1.5-.828 0-1.5.672-1.5 1.5 0 .828.672 1.5 1.5 1.5.828 0 1.5-.672 1.5-1.5"/></svg>',className:"org_upgrade_multi_team_modal--multiTeamOrgUpgradeAdjustSvg--V4dem"})]}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamListDivider--A9NYP"}),(()=>{let t=e.unsortedTeamIds,a=[];for(var r=0;r<Math.min(4,t.length);r++){let s=e.teams[t[r]];a.push(j(s))}return(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamList--rzATA",children:a})})(),(0,s.jsxs)("div",{className:l?"org_upgrade_multi_team_modal--campfireTeamIllustrationRightSection--fHW0n":"org_upgrade_multi_team_modal--teamIllustrationRightSection--irt0w",children:[(0,s.jsx)("img",{className:"org_upgrade_multi_team_modal--filesIllustration--teK60",src:Q,draggable:!1,alt:""}),(0,s.jsx)("img",{src:Z,draggable:!1,alt:""})]}),l&&(0,s.jsxs)("div",{className:x.s.flex.b1.bRadius3.itemsCenter.absolute.pr4.py4.ml36.$,style:y.sx.add({top:"100%",marginTop:"15px",maxWidth:"100px"}).$,children:[(0,s.jsx)(n.s,{className:x.s.minW16.$}),(0,s.jsx)("p",{className:x.s.textBodySmallStrong.$,children:(0,g.tx)("org_upgrade.illustration.sign_in_with_sso")}),(0,s.jsx)("div",{className:x.s.absolute.mt32.$,style:y.sx.add({right:"-8px"}).$,children:(0,s.jsx)(es,{})})]})]})});return(0,s.jsx)(k.ey,{className:"org_upgrade_multi_team_modal--modal--fVO2l",hide:a,size:"fitContent",useModalViewScroll:!1,children:l?(0,s.jsx)(q,{currency:P.currency,hideModal:a,choosePlan:_,TeamIllustration:U,upsellSource:e.upsellSource}):(0,s.jsxs)(p.P,{className:"org_upgrade_multi_team_modal--scrollContainer--ZL-IQ",children:[(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--planModalHeader--drD3M",style:{height:64,marginBottom:32},children:[(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--planModalTitle--YP3RJ text--fontPos24--YppUD text--_fontBase--QdLsd",style:{fontWeight:600},children:(0,g.tx)("org_upgrade.multi_team.bring_your_teams_together_with_the_figma_organization_plan")}),(0,s.jsx)(m.Jn,{className:"org_upgrade_multi_team_modal--closeButton--x3l-2",onClick:a,innerText:"close"})]}),(0,s.jsx)("div",{className:Y}),(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--planDetails--Fu8GW",children:[(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--planDetailsLeft--mBwlh",children:[(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--billingCadence--WBrj-",children:(0,g.tx)("org_upgrade.multi_team.annual_billing_only")}),(0,s.jsxs)("div",{className:J.y3,children:[(0,s.jsxs)("p",{className:J.Q$,children:[(0,g.tx)("org_upgrade.multi_team.figma"),(0,s.jsx)("div",{className:J.gt,children:(0,s.jsx)(c.G,{})})]}),(0,s.jsx)("div",{children:(0,g.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:(0,s.jsx)("span",{className:J.G8,children:P.formatMoney(L[N.ud.DESIGN].amount)})})})]}),(0,s.jsxs)("div",{className:J.y3,children:[(0,g.tx)("org_upgrade.multi_team.dev_mode"),(0,s.jsx)("div",{children:(0,g.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:(0,s.jsx)("span",{className:J.G8,children:P.formatMoney(L[N.ud.DEV_MODE].amount)})})})]}),(0,s.jsxs)("div",{className:J.y3,children:[(0,g.tx)("org_upgrade.multi_team.fig_jam"),(0,s.jsx)("div",{children:(0,g.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:(0,s.jsx)("span",{className:C,children:P.formatMoney(L[N.ud.FIGJAM].amount)})})})]}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--planText--MQX-G",children:(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--itemList--SC-iA",children:[d.map((e,t)=>(0,s.jsx)("div",{children:(0,s.jsx)(et,{text:e})},t)),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--seeAll--8WNIM",children:(0,s.jsx)(u.Us,{href:"https://www.figma.com/pricing/#cid-57mfNh6t0Xo7z8Q95Ww9ZV",target:"_blank",trusted:!0,children:(0,g.tx)("org_upgrade.multi_team.see_all_features")})})]})})]}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamIllustrationSection--xl3pT",style:{height:A},children:U})]}),(0,s.jsx)("div",{className:Y}),(0,s.jsx)(u.vd,{onClick:_,className:"org_upgrade_multi_team_modal--continueButton--Zo9V7",trackingProperties:{trackingDescriptor:T.c.UPGRADE_TO_ORGANIZATION,upsellSource:e.upsellSource},children:(0,g.tx)("org_upgrade.multi_team.continue")}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--spaceFiller--f9bwU"})]})})}function es(){return(0,s.jsxs)("svg",{width:"15",height:"17",viewBox:"0 0 15 17",fill:"none",children:[(0,s.jsxs)("mask",{id:"path-1-outside-1_15_11117",maskUnits:"userSpaceOnUse",x:"-0.5",y:"0.5",width:"16",height:"16",fill:"black",children:[(0,s.jsx)("rect",{fill:"white",x:"-0.5",y:"0.5",width:"16",height:"16"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.7753 2.25C4.7753 1.83579 5.11109 1.5 5.5253 1.5C5.93951 1.5 6.2753 1.83579 6.2753 2.25V7C6.2753 7.27614 6.49916 7.5 6.7753 7.5C7.05144 7.5 7.2753 7.27614 7.2753 7V6.25C7.2753 5.83579 7.61109 5.5 8.0253 5.5C8.43951 5.5 8.7753 5.83579 8.7753 6.25V7C8.7753 7.27614 8.99916 7.5 9.2753 7.5C9.55144 7.5 9.7753 7.27614 9.7753 7V6.75C9.7753 6.33579 10.1111 6 10.5253 6C10.9395 6 11.2753 6.33579 11.2753 6.75V6.99997C11.2753 7.27613 11.4992 7.5 11.7753 7.5H12.0254C12.1634 7.5 12.2754 7.38807 12.2754 7.25C12.2754 6.83579 12.6111 6.5 13.0254 6.5C13.4396 6.5 13.7754 6.83579 13.7754 7.25V9.75C13.7754 9.75099 13.7754 9.75197 13.7754 9.75296V11C13.7754 13.4853 11.7606 15.5 9.27535 15.5C7.72857 15.5 6.36406 14.7196 5.55409 13.531C4.83873 12.7173 3.72389 11.8364 2.76078 11.0754L2.76074 11.0754L2.76055 11.0753C2.45467 10.8336 2.16409 10.604 1.90649 10.3925C1.42761 9.99926 1.3593 9.26798 1.7686 8.80273C2.47277 8.00228 3.67449 9.08737 4.40263 9.86608C4.41077 9.87478 4.41894 9.88354 4.42715 9.89237C4.54973 10.0242 4.77535 9.93924 4.77535 9.75922L4.7753 9.75V2.25Z"})]}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.7753 2.25C4.7753 1.83579 5.11109 1.5 5.5253 1.5C5.93951 1.5 6.2753 1.83579 6.2753 2.25V7C6.2753 7.27614 6.49916 7.5 6.7753 7.5C7.05144 7.5 7.2753 7.27614 7.2753 7V6.25C7.2753 5.83579 7.61109 5.5 8.0253 5.5C8.43951 5.5 8.7753 5.83579 8.7753 6.25V7C8.7753 7.27614 8.99916 7.5 9.2753 7.5C9.55144 7.5 9.7753 7.27614 9.7753 7V6.75C9.7753 6.33579 10.1111 6 10.5253 6C10.9395 6 11.2753 6.33579 11.2753 6.75V6.99997C11.2753 7.27613 11.4992 7.5 11.7753 7.5H12.0254C12.1634 7.5 12.2754 7.38807 12.2754 7.25C12.2754 6.83579 12.6111 6.5 13.0254 6.5C13.4396 6.5 13.7754 6.83579 13.7754 7.25V9.75C13.7754 9.75099 13.7754 9.75197 13.7754 9.75296V11C13.7754 13.4853 11.7606 15.5 9.27535 15.5C7.72857 15.5 6.36406 14.7196 5.55409 13.531C4.83873 12.7173 3.72389 11.8364 2.76078 11.0754L2.76074 11.0754L2.76055 11.0753C2.45467 10.8336 2.16409 10.604 1.90649 10.3925C1.42761 9.99926 1.3593 9.26798 1.7686 8.80273C2.47277 8.00228 3.67449 9.08737 4.40263 9.86608C4.41077 9.87478 4.41894 9.88354 4.42715 9.89237C4.54973 10.0242 4.77535 9.93924 4.77535 9.75922L4.7753 9.75V2.25Z",fill:"white"}),(0,s.jsx)("path",{d:"M13.7754 9.75296L12.7754 9.7491V9.75296H13.7754ZM5.55409 13.531L6.38045 12.9679L6.34578 12.917L6.30513 12.8708L5.55409 13.531ZM2.76078 11.0754L3.38075 10.2908L3.37466 10.286L3.36849 10.2813L2.76078 11.0754ZM2.76074 11.0754L2.13996 11.8594L2.14646 11.8645L2.15303 11.8696L2.76074 11.0754ZM2.76055 11.0753L3.38133 10.2913L3.38052 10.2906L2.76055 11.0753ZM1.90649 10.3925L1.27191 11.1653L1.27191 11.1653L1.90649 10.3925ZM1.7686 8.80273L1.01778 8.14221H1.01778L1.7686 8.80273ZM4.40263 9.86608L5.13306 9.18309L5.13306 9.18309L4.40263 9.86608ZM4.7753 9.75H3.77528L3.77532 9.75602L4.7753 9.75ZM4.42715 9.89237L3.69482 10.5733L4.42715 9.89237ZM5.5253 0.5C4.5588 0.5 3.7753 1.2835 3.7753 2.25H5.7753C5.7753 2.38807 5.66337 2.5 5.5253 2.5V0.5ZM7.2753 2.25C7.2753 1.2835 6.4918 0.5 5.5253 0.5V2.5C5.38723 2.5 5.2753 2.38807 5.2753 2.25H7.2753ZM7.2753 7V2.25H5.2753V7H7.2753ZM6.2753 6.25V7H8.2753V6.25H6.2753ZM8.0253 4.5C7.0588 4.5 6.2753 5.2835 6.2753 6.25H8.2753C8.2753 6.38807 8.16337 6.5 8.0253 6.5V4.5ZM9.7753 6.25C9.7753 5.2835 8.9918 4.5 8.0253 4.5V6.5C7.88723 6.5 7.7753 6.38807 7.7753 6.25H9.7753ZM9.7753 7V6.25H7.7753V7H9.7753ZM8.7753 6.75V7H10.7753V6.75H8.7753ZM10.5253 5C9.5588 5 8.7753 5.7835 8.7753 6.75H10.7753C10.7753 6.88807 10.6634 7 10.5253 7V5ZM12.2753 6.75C12.2753 5.7835 11.4918 5 10.5253 5V7C10.3872 7 10.2753 6.88807 10.2753 6.75H12.2753ZM12.2753 6.99997V6.75H10.2753V6.99997H12.2753ZM12.0254 6.5H11.7753V8.5H12.0254V6.5ZM13.2754 7.25C13.2754 7.38807 13.1634 7.5 13.0254 7.5V5.5C12.0589 5.5 11.2754 6.2835 11.2754 7.25H13.2754ZM13.0254 7.5C12.8873 7.5 12.7754 7.38807 12.7754 7.25H14.7754C14.7754 6.2835 13.9919 5.5 13.0254 5.5V7.5ZM12.7754 7.25V9.75H14.7754V7.25H12.7754ZM12.7754 9.75L12.7754 9.7491L14.7753 9.75683C14.7754 9.75455 14.7754 9.75228 14.7754 9.75H12.7754ZM14.7754 11V9.75296H12.7754V11H14.7754ZM9.27535 16.5C12.3129 16.5 14.7754 14.0376 14.7754 11H12.7754C12.7754 12.933 11.2084 14.5 9.27535 14.5V16.5ZM4.72773 14.0942C5.716 15.5444 7.38393 16.5 9.27535 16.5V14.5C8.07321 14.5 7.01213 13.8948 6.38045 12.9679L4.72773 14.0942ZM2.14081 11.8601C3.12768 12.6398 4.1605 13.4604 4.80305 14.1913L6.30513 12.8708C5.51696 11.9742 4.32011 11.033 3.38075 10.2908L2.14081 11.8601ZM2.15303 11.8696L2.15308 11.8696L3.36849 10.2813L3.36845 10.2812L2.15303 11.8696ZM2.13977 11.8592L2.13996 11.8594L3.38152 10.2914L3.38133 10.2913L2.13977 11.8592ZM1.27191 11.1653C1.53818 11.3839 1.83659 11.6197 2.14058 11.8599L3.38052 10.2906C3.07274 10.0474 2.79 9.82399 2.54106 9.61959L1.27191 11.1653ZM1.01778 8.14221C0.225175 9.04318 0.36732 10.4226 1.27191 11.1653L2.54106 9.61959C2.52173 9.60372 2.50406 9.57558 2.50055 9.53613C2.49713 9.49765 2.50911 9.47495 2.51941 9.46324L1.01778 8.14221ZM5.13306 9.18309C4.76 8.78412 4.18894 8.21906 3.5653 7.86975C3.25213 7.69434 2.84133 7.52445 2.38081 7.5217C1.87057 7.51865 1.38659 7.72299 1.01778 8.14221L2.51941 9.46324C2.52177 9.46056 2.50353 9.48113 2.46192 9.49972C2.42048 9.51823 2.385 9.52176 2.36888 9.52166C2.35449 9.52158 2.42166 9.52154 2.58795 9.61468C2.92326 9.80249 3.31712 10.1693 3.6722 10.5491L5.13306 9.18309ZM5.15947 9.21142C5.15063 9.20191 5.14183 9.19247 5.13306 9.18309L3.6722 10.5491C3.6797 10.5571 3.68724 10.5652 3.69482 10.5733L5.15947 9.21142ZM3.77532 9.75602L3.77537 9.76525L5.77534 9.7532L5.77528 9.74398L3.77532 9.75602ZM3.7753 2.25V9.75H5.7753V2.25H3.7753ZM3.69482 10.5733C4.40798 11.3403 5.77535 10.8889 5.77535 9.75922H3.77535C3.77535 8.98963 4.69149 8.70813 5.15947 9.21142L3.69482 10.5733ZM9.2753 8.5C10.1037 8.5 10.7753 7.82843 10.7753 7H8.7753C8.7753 6.72386 8.99916 6.5 9.2753 6.5V8.5ZM6.7753 8.5C7.60373 8.5 8.2753 7.82843 8.2753 7H6.2753C6.2753 6.72386 6.49916 6.5 6.7753 6.5V8.5ZM10.2753 6.99997C10.2753 7.82841 10.9469 8.5 11.7753 8.5V6.5C12.0515 6.5 12.2753 6.72384 12.2753 6.99997H10.2753ZM7.7753 7C7.7753 7.82843 8.44687 8.5 9.2753 8.5V6.5C9.55144 6.5 9.7753 6.72386 9.7753 7H7.7753ZM12.0254 8.5C12.7157 8.5 13.2754 7.94036 13.2754 7.25H11.2754C11.2754 6.83579 11.6111 6.5 12.0254 6.5V8.5ZM5.2753 7C5.2753 7.82843 5.94687 8.5 6.7753 8.5V6.5C7.05144 6.5 7.2753 6.72386 7.2753 7H5.2753Z",fill:"black",fillOpacity:"0.8",mask:"url(#path-1-outside-1_15_11117)"})]})}let er=(0,i.Ng)(e=>{let{teams:t}=e;return{teams:t,unsortedTeamIds:(0,C._L)(e.user,e.roles,e.teams)}})((0,j.kp)(function(e){return(0,s.jsx)(_.tH,{boundaryKey:"OrgUpgradeMultiTeamModal",team:l.e.BILLING_EXPERIENCE,fallback:(0,s.jsx)(A.K,{}),children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(P.N,{hiddenTitle:(0,g.tx)("org_upgrade.multi_team.bring_your_teams_together_with_the_figma_organization_plan"),estimatedWidth:500,estimatedHeight:500}),children:(0,s.jsx)(ea,{...e})})})},"Multi-Team Org Upgrade Modal"))},571184:(e,t,a)=>{a.r(t),a.d(t,{OrgUpgradeSingleTeamModal:()=>z,PlanWithFigjamPriceView:()=>V});var s=a(104076),r=a(716976),i=a(903927),l=a(638004),n=a(511570),d=a.n(n),o=a(833805),c=a(114339),m=a(769109),_=a(1188),u=a(555013),p=a(72138),h=a(652539),x=a(192075),g=a(525980),y=a(147046),f=a(366535),v=a(244205),S=a(111297),T=a(205729),j=a(649693),E=a(418149),N=a(449250),b=a(571430),A=a(944350),w=a(412469),C=a(904017),I=a(104836),R=a(608175),P=a(498726),k=a(434225),M=a(354174),O=a(103345),D=a(213788),L=a(871993);function U(e){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.B,{svg:e.isArrow?'<svg xmlns="http://www.w3.org/2000/svg" width="9" height="7" viewBox="0 0 9 7"><path fill="#000" fill-opacity=".8" fill-rule="nonzero" stroke="none" d="m3.586 7 .602-.602L1.71 3.93h6.414v-.86H1.711L4.187.594 3.587 0l-3.5 3.5 3.5 3.5z"/></svg>':L.A,className:D.oE}),(0,s.jsx)("p",{children:e.text})]})}function B(e){return(0,s.jsx)("div",{className:D.Vf,children:(0,s.jsxs)("div",{className:D._R,children:[e.features.map((e,t)=>(0,s.jsx)("div",{className:D.$P,children:(0,s.jsx)(U,{text:e.text,isArrow:e.isArrow})},t)),e.plan===A.Ag.ORG&&(0,s.jsx)("div",{className:D.W2,children:(0,s.jsx)(u.Us,{href:"https://www.figma.com/pricing/#cid-57mfNh6t0Xo7z8Q95Ww9ZV",target:"_blank",trusted:!0,children:(0,x.tx)("org_upgrade.single_team.see_all_features")})}),e.plan===A.Ag.ORG&&(0,s.jsx)(u.vd,{onClick:e.onUpgrade,className:D.E8,trackingProperties:{trackingDescriptor:v.c.UPGRADE_TO_ORGANIZATION,upsellSource:e.upsellSource},children:(0,x.tx)("org_upgrade.single_team.upgrade_to_an_organization")})]})})}function V(e){return(0,s.jsxs)("div",{className:D.Ms,style:{padding:e.padding},"data-testid":e.dataTestId,children:[(0,s.jsx)("h2",{className:D.QB,children:e.name}),(0,s.jsx)("p",{className:D.VA,children:e.subtitle}),(0,s.jsxs)("div",{className:D.y3,children:[(0,s.jsxs)("p",{className:D.Q$,children:[(0,x.tx)("plan_details.figma"),(0,s.jsx)("div",{className:D.gt,children:(0,s.jsx)(c.G,{})})]}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:D.G8,children:e.prices[j.ud.DESIGN]})})]}),e.prices[j.ud.DEV_MODE]&&(0,s.jsxs)("div",{className:D.y3,children:[(0,s.jsx)("p",{children:(0,x.tx)("plan_details.dev_mode_only")}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:D.G8,children:e.prices[j.ud.DEV_MODE]})})]}),(0,s.jsxs)("div",{className:D.y3,children:[(0,s.jsx)("p",{children:(0,x.tx)("plan_details.fig_jam")}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:D.G8,children:e.prices[j.ud.FIGJAM]})})]})]})}function G(e){let t=(0,C.XP)({reportErrorsToTeam:l.e.BILLING_EXPERIENCE}),a={planParentId:t.key.parentId||"",planType:t.key.type},r=(0,T.vK)(a),[n]=(0,o.mI)(r),c=(0,T.vu)(n);if(null===c.data)throw Error("Contract prices currency was null");let _=c.data,u=E.Oq.exclude([j.ud.DEV_MODE]),h=u.dict(e=>({currency:_,billableProductKey:e,billableProductVariantKey:null,tier:R.Ju.PRO,renewalTerm:R.IX.YEAR,unit:R.IX.MONTH})),g=(0,T.ic)(h,a,T.Fq.UPSELL_MODALS_CONTRACT),v=(0,T.jv)({billableProductKeys:E.Oq,baseQuery:{currency:_,tier:R.Ju.ORG,renewalTerm:R.IX.YEAR,unit:R.IX.MONTH}}),[S,N]=(0,o.mI)(g,v),b=(0,T.vu)(S);if(null===b.data)throw Error("Contract price data was null");let I=(0,T.vu)(N);if(null===I.data)throw Error("Sticker price data was null");let P=b.data,k=I.data,O=(0,i.wA)(),L=()=>{O(f.Ce())},U=new w.vr(_);return(0,s.jsx)(M.ey,{className:D.yl,hide:L,size:586,useModalViewScroll:!1,children:(0,s.jsxs)(p.P,{className:D.jG,children:[(0,s.jsxs)("div",{className:D.o,children:[(0,s.jsx)("div",{className:D.Dz,children:(0,s.jsx)("div",{className:D.hx,children:(0,x.tx)("org_upgrade.single_team.get_more_out_of_figma_as_you_grow")})}),(0,s.jsx)(m.Jn,{className:D.b,onClick:L,innerText:"close"})]}),(0,s.jsxs)("div",{className:d()(D.yH,D.Mm),children:[(0,s.jsx)(V,{dataTestId:"pro-prices",name:(0,x.t)("org_upgrade.single_team.professional_plan"),subtitle:(0,x.t)("org_upgrade.single_team.price_when_billed_annually"),prices:u.dict(e=>`${U.formatMoney(P[e].amount)}`),padding:"16px 31px 16px 36px"}),(0,s.jsx)(V,{dataTestId:"org-prices",name:(0,x.t)("org_upgrade.single_team.organization_plan"),subtitle:(0,x.t)("org_upgrade.single_team.annual_billing_only"),prices:E.Oq.dict(e=>`${U.formatMoney(k[e]?.amount??0)}`),padding:"16px 32px 16px 33px"})]}),(0,s.jsx)("div",{className:D.Jh}),(0,s.jsxs)("div",{className:D.yH,children:[(0,s.jsx)(B,{plan:A.Ag.PRO,features:[{text:(0,x.t)("org_upgrade.single_team.unlimited_design_files_and_projects_in_one_team")},{text:(0,x.t)("org_upgrade.single_team.design_library_within_one_team")},{text:(0,x.t)("org_upgrade.single_team.audio_conversations_in_files")}]}),(0,s.jsx)(B,{plan:A.Ag.ORG,features:[{text:(0,x.t)("org_upgrade.single_team.everything_in_professional_plus"),isArrow:!0},{text:(0,x.t)("org_upgrade.single_team.unlimited_teams_and_unlimited_projects")},{text:(0,x.t)("org_upgrade.single_team.cross_team_design_libraries_and_fonts")},{text:(0,x.t)("org_upgrade.single_team.control_file_sharing_inside_and_outside_of_your_organization")},{text:(0,x.t)("org_upgrade.single_team.single_sign_on_sso_integration")},{text:(0,x.t)("org_upgrade.single_team.private_plugins_and_plugin_management")},{text:(0,x.t)("org_upgrade.single_team.full_content_ownership")}],onUpgrade:()=>{L(),O(y.sf({view:"orgSelfServe",upsellSource:e.upsellSource}))},upsellSource:e.upsellSource})]})]})})}let z=(0,S.kp)(function(e){let t=(0,g.s)(),a=(0,I.ol)();return(0,s.jsx)(_.tH,{boundaryKey:"OrgUpgradeSingleTeamModal",team:l.e.BILLING_EXPERIENCE,fallback:(0,s.jsx)(N.K,{}),children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(k.N,{hiddenTitle:(0,x.tx)("org_upgrade.single_team.get_more_out_of_figma_as_you_grow"),estimatedWidth:586,estimatedHeight:586}),children:t?(0,s.jsx)(O.bP,{team:a,resource:P.Bi.ORG,currentPlan:b.F.Plan.PRO,upsellPlan:b.F.Plan.ORG,editorType:A._Y.DESIGN,upsellSource:e.upsellSource}):(0,s.jsx)(G,{...e})})})},"Single-Team Org Upgrade Modal")},532832:(e,t,a)=>{a.r(t),a.d(t,{ResubscribeModal:()=>j});var s=a(104076),r=a(716976),i=a(903927),l=a(293422),n=a(929302),d=a(91478),o=a(268389);a(120440);var c=a(653899),m=a(192075),_=a(373533),u=a(366535),p=a(174461),h=a(244205),x=a(111297),g=a(400136),y=a(657878),f=a(412469),v=a(469229);let S=(0,x.tf)(l.$n),T=(0,x.tf)(l.$n);function j(e){let{upsellSource:t,paymentMethod:a,nextBillDate:l,amount:j,team:E,monthlySub:N=null,annualSub:b=null,currency:A,canSeeBillingAddressExp:w}=e,C=(0,i.wA)(),I=(0,y._6)(),R=(0,i.d4)(e=>(0,v.Np)(e,I)),[P,k]=(0,r.useState)(!1),{saveWithPaymentMethod:M,createPaymentElement:O,unmountPaymentElement:D}=(0,g.lo)({setupIntentParams:{redirect_url:R,subtotal_estimate:j,success_message:(0,m.t)("resubscribe_modal.success_message"),currency:A,teamId:E.id},paymentFlowSource:g.wn.PRO_REACTIVATE,customerInfo:{teamId:E.id,orgId:void 0},defaultCountry:(0,f.ub)(),currency:A,canSeeBillingAddressExp:w,isCheckout:!1});(0,c.h)(()=>(O({ready:()=>{k(!0)}}),()=>{D()}));let L=n.wQ({defaultOpen:!0}),U=a?.object.last4,B=(0,_.up)(j,A??"usd",{showCents:!0});return(0,s.jsxs)(x.fu,{name:"Resubscribe Modal",properties:{upsellSource:t},children:[(0,s.jsx)(d.bL,{manager:L,width:"fit-content",children:(0,s.jsxs)(o.vo,{children:[(0,s.jsx)(o.Y9,{children:(0,s.jsx)(o.hE,{children:(0,m.tx)("resubscribe_modal.title")})}),(0,s.jsx)(o.nB,{className:"x1dc814f",children:(0,s.jsx)("p",{children:(0,m.tx)("resubscribe_modal.body",{last4:U,formattedAmount:B,nextBillDate:l})})}),(0,s.jsx)(o.wi,{children:(0,s.jsxs)(o.jk,{children:[(0,s.jsx)(T,{variant:"secondary",disabled:!P,onClick:()=>{C((0,u.Ce)()),(0,p.C8)({team:E,dispatch:C,cancelling:!0,monthlySub:N,annualSub:b,currency:A,canSeeBillingAddressExp:w,estimatedChargeCents:j})},trackingProperties:{trackingDescriptor:h.c.UPDATE_PAYMENT},children:(0,m.tx)("resubscribe_modal.different_payment_method")}),(0,s.jsx)(S,{variant:"primary",disabled:!P,onClick:e=>{let t=async()=>{e.preventDefault(),await M(a),k(!0)};k(!1),t()},trackingProperties:{trackingDescriptor:h.c.REACTIVATE_YOUR_PROFESSIONAL_PLAN},children:(0,m.tx)("resubscribe_modal.reactivate_plan")})]})})]})}),(0,s.jsx)("div",{id:g.Ix,className:"x1s85apg"})]})}},410555:(e,t,a)=>{a.r(t),a.d(t,{UniversalUpgradeSequence:()=>z});var s=a(104076),r=a(716976),i=a(903927),l=a(633065),n=a(653899),d=a(769109),o=a(555013),c=a(192075),m=a(454307),_=a(111679),u=a(147046),p=a(366535),h=a(483200),x=a(111297),g=a(937505),y=a(657878),f=a(412469),v=a(853039),S=a(984887),T=a(377026),j=a(354174),E=a(99723),N=a(432099),b=a(99725),A=a(388816),w=a(679359),C=a(381640),I=a(25112),R=a(952385),P=a(459494),k=a(249586),M=a(592726),O=a(336971),D=a(953050),L=a(723347);let U=(0,C.nF)((e,{teamName:t,selectedView:a,currency:s,onSuccess:r,onError:i,onBillingCompleteRedirectInfo:l})=>{let n;N.Ay.post("/api/teams/create",{team_name:t}).then(({data:t})=>(n="team"in t.meta?t.meta.team:t.meta,e.dispatch(R.bE({team:n})),(0,k._J)("Team Created",n.id,e.getState()),D.G.getTeam({teamId:n.id}))).then(({data:t})=>{for(let a of t.meta)e.dispatch(I.bE({role:a}));r(),e.dispatch(h.WX({teamId:n.id,selectedView:a,newTeam:!0,currency:s,...l?{onBillingCompleteRedirectInfo:l}:{}}))}).catch(()=>{i()})});function B(e){let t=(0,i.wA)(),a=(0,M.TA)(),l=(0,i.d4)(O.P),n=(0,i.d4)(e=>e.roles.byTeamId),[d,m]=r.useState(!1),[_,u]=r.useState(!1),[h,x]=r.useState(""),g=(0,f.LN)(),y=()=>{t(p.Ce())},v=(0,E.s)(()=>{m(!0),h?t(U({teamName:h,selectedView:e.selectedView,currency:g,onSuccess:y,onError:()=>{m(!1),u(!0)},onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})):(m(!1),u(!0))});return a&&!(0,P.e5)({userId:a,teams:Object.values(l),rolesByTeamId:n})?(0,s.jsxs)("div",{"data-testid":"createTeamToUpgradeView",children:[(0,s.jsx)("p",{className:L.KV,children:(0,c.tx)("universal_upgrade_sequence.subtitle")}),_&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.I,{message:(0,c.t)("universal_upgrade_sequence.error"),marginTop:16}),(0,s.jsx)(o.Kz,{multiple:1})]}),(0,s.jsx)(o.Kz,{multiple:2}),(0,s.jsxs)("div",{className:L.$g,children:[(0,s.jsx)("div",{className:L.Eh,children:(0,s.jsx)(A.L,{dataTestId:"createTeamInput",placeholder:(0,c.t)("universal_upgrade_sequence.team_name.placeholder"),value:h||"",onChange:e=>{x(e.target.value)},required:!0,maxLength:255})}),(0,s.jsx)(o.vd,{dataTestId:"nextButton",className:L.DI,disabled:!h||d,onClick:v,children:d?(0,s.jsx)(w.kt,{className:L.u1}):(0,c.tx)("universal_upgrade_sequence.next")})]})]}):null}var V=a(312156),G=a(555590);function z(e){let[t,a]=r.useState("selectTeam"),E=(0,i.wA)(),N=(0,y._6)(),b=(0,g.FC)(),A=(0,i.d4)(e=>e.payment.promo),w=(0,i.d4)(e=>e.payment.billingPeriod),C=()=>{E(p.Lo())},I=()=>{E(p.Ce()),e.onDone?.()},R=t=>{"teamUpgrade"===N.view?E(u.sf({...N,teamFlowType:T.SC.UPGRADE_EXISTING_TEAM,teamId:t.id,paymentStep:(0,m.kR)(N.paymentStep,T.SC.UPGRADE_EXISTING_TEAM,N.billingPeriod||null,A,N.planType||T.Sc.UNDETERMINED,A?S.tn.CONFIRM_PAY:S.tn.CHOOSE_PLAN),billingPeriod:e.billingPeriod||w,entryPoint:e.entryPoint})):E(h.WX({teamId:t.id,selectedView:N,newTeam:!1,currency:(0,f.LN)(),billingPeriod:e.billingPeriod,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo,entryPoint:e.entryPoint,openInNewTab:e.openInNewTab})),I()},P=()=>{0===(0,v.PS)(b).length?(E(_.Dw({openInNewTab:!l.eD})),a("createTeam")):a("selectTeam")};return((0,n.h)(()=>{e.plan===V.I.PRO&&P()}),"selectTeam"===t)?(()=>{let t=(0,v.PS)(b);return(0,s.jsx)(x.fu,{name:"Upgrade Select Team Modal",children:(0,s.jsxs)(j.ey,{hide:C,size:436,children:[(0,s.jsx)("h1",{"data-testid":"modalTitle",className:L.GK,children:(0,c.tx)("universal_upgrade_sequence.title")}),(0,s.jsx)(d.Jn,{dataTestId:"closeButton",className:L.b,onClick:C,innerText:(0,c.t)("universal_upgrade_sequence.close_modal")}),(0,s.jsx)(o.Kz,{multiple:2}),(0,s.jsx)(G.I,{eligibleTeams:t,selectTeam:R}),(0,s.jsx)(o.Kz,{multiple:2}),(0,s.jsx)(B,{selectedView:N,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})]})})})():(0,s.jsx)(s.Fragment,{})}},555590:(e,t,a)=>{a.d(t,{I:()=>u});var s=a(104076),r=a(716976),i=a(555013),l=a(72138),n=a(192075),d=a(244205),o=a(111297),c=a(853039),m=a(826160),_=a(723347);function u({customUpgradeText:e,eligibleTeams:t,selectTeam:a,numDesignFilesPerTeam:u,showEditorCount:p=!0}){let[h,x]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1);r.useEffect(()=>{x(t.length>=5)},[t]);let f=`${_.jG}`;h&&(f+=` ${_.o8}`),g&&(f+=` ${_.kz}`);let v=t[t.length-1],S=u&&u.length===t.length;return(0,s.jsx)(l.P,{onScroll:(e,a)=>{let s=t.length>=5,r=s&&0!==e,i=s&&e+a.trackHeight!==a.scrollHeight;i!==h&&x(i),r!==g&&y(r)},className:f,scrollingDisabled:!1,children:(0,s.jsx)("div",{className:_.nW,children:t.map((t,r)=>(0,s.jsxs)(o.jm,{className:t===v?_.wv:_.cr,onClick:()=>a(t),trackingProperties:{teamId:t.id,trackingDescriptor:d.c.UPGRADE},innerText:"Upgrade",children:[(0,s.jsxs)("div",{className:"org_self_serve--teamInfo--7YTKY",children:[(0,s.jsx)(m.Ro,{className:"org_self_serve--teamIcon--DqZPm",entity:t,size:40,shape:"SQUARE"}),(0,s.jsxs)("div",{className:"org_self_serve--teamText--Uh2zO",children:[(0,s.jsx)("p",{className:"org_self_serve--teamName--a1LGY text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",children:t.name}),(0,s.jsxs)("p",{className:"org_self_serve--teamEditors--2hBWh text--fontPos11--2LvXf text--_fontBase--QdLsd",children:[!S&&p&&(0,n.tx)("universal_upgrade.select_team.editor_count.seat_rename",{editors:t.editors}),S&&u&&(0,n.tx)("universal_upgrade.select_team.files_per_team_figma_files_used",{numFilesUsed:u[r],numFreeFilesAllowed:c.WW})]})]})]}),(0,s.jsx)(i.nR,{className:_.J1,dataTestId:"select_team.upgrade",children:e??(0,n.tx)("universal_upgrade.select_team.upgrade")})]},t.id))})})}},843735:(e,t,a)=>{a.r(t),a.d(t,{UpgradeContactSalesModal:()=>w});var s=a(104076),r=a(716976),i=a(903927),l=a(99723),n=a(310725),d=a(432099),o=a(769109),c=a(99725),m=a(555013),_=a(652539),u=a(192075),p=a(366535),h=a(111297),x=a(959834),g=a(757381),y=a(354174),f=a(147107);let v="upgrade_contact_sales_modal--closeButton--715WY";var S=a(364616),T=a(933949);let j=()=>[{name:(0,u.t)("contact_sales.topic.request_a_sales_demo_or_talk_to_sales"),value:"request_a_sales_demo_or_talk_to_sales"},{name:(0,u.t)("contact_sales.topic.billing_and_invoicing"),value:"billing_and_invoicing"},{name:(0,u.t)("contact_sales.topic.technical_and_product_support"),value:"technical_and_product_support"},{name:(0,u.t)("contact_sales.topic.educators_and_students"),value:"educators_and_students"}],E=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"",disabled:!0,children:(0,u.t)("contact_sales.which_topic_best_fits_your_needs")}),j().map(e=>(0,s.jsx)("option",{value:e.value,"data-testid":`select-option-${e.value}`,children:e.name},e.value))]}),N=()=>[{name:(0,u.t)("contact_sales.plan.starter"),value:"starter"},{name:(0,u.t)("contact_sales.plan.professional"),value:"professional"},{name:(0,u.t)("contact_sales.plan.organization"),value:"organization"},{name:(0,u.t)("contact_sales.plan.enterprise"),value:"enterprise"},{name:(0,u.t)("contact_sales.plan.figma_for_government"),value:"figma_for_government"},{name:(0,u.t)("contact_sales.plan.not_sure"),value:"not_sure"}],b=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"",disabled:!0,children:(0,u.t)("contact_sales.what_figma_plan_are_you_inquiring_about")}),N().map(e=>(0,s.jsx)("option",{value:e.value,"data-testid":`select-option-${e.value}`,children:e.name},e.value))]}),A=(0,x.Ju)(function({hideModal:e}){return(0,s.jsx)(h.fu,{name:"Upgrade Contact Sales Success Modal",children:(0,s.jsxs)(y.ey,{hide:e,size:480,children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--successModalWrapper--xA5Mp",children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--successModalTitle--Xgt1f upgrade_contact_sales_modal--modalTitle--7k87R text--fontPos13--xW8hS text--_fontBase--QdLsd",children:[(0,s.jsx)(_.B,{className:"upgrade_contact_sales_modal--successIcon---zT4I",svg:T.A}),(0,u.tx)("universal_upgrade.contact_sales.thank_you")]}),(0,s.jsx)(o.Jn,{className:v,onClick:e,innerText:"close"})]}),(0,s.jsx)("div",{className:"upgrade_contact_sales_modal--successModalText--f1aRe text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,u.tx)("universal_upgrade.contact_sales.sales_will_reach_out")})]})})},"ContactSalesSuccessModal");function w(e){let t=(0,i.wA)(),a=(0,i.d4)(e=>e.user),[x,T]=(0,r.useState)({email:a?.email??"",name:a?.handle??"",overridePlaceholderText:e.overridePlaceholderText,freeText:"",result:void 0,companyName:void 0,companySize:"",jobTitle:"",topic:"",plan:"",product:"",phone:"",formErrors:{}}),j=()=>{t(p.Lo())},N=()=>{t((0,p.to)({type:A,data:{hideModal:()=>t(p.Ce())}}))},w=()=>({email:x.email,name:x.name,company_name:x.companyName,topic:x.topic,plan:x.plan,phone:x.phone,message:x.freeText,source:e.source,form_name:"topic_v1"}),C=(0,l.s)(()=>{let e={},t=(0,u.t)("universal_upgrade.this_field_is_required");if(x.email?(0,n.xf)(x.email)||(e.email=(0,u.t)("universal_upgrade.please_provide_a_valid_email_address")):e.email=t,x.name||(e.name=t),x.companyName||(e.companyName=t),x.topic||(e.topic=t),x.plan||(e.plan=t),T(t=>({...t,formErrors:e,result:void 0})),0===Object.keys(e).length){let e=w();d.Ay.post("/api/form_post/org-lead-gen",e).then(()=>{T(e=>({...e,result:"success"})),N()}).catch(()=>T(e=>({...e,result:"error"})))}}),I=e=>x.formErrors[e]?"upgrade_contact_sales_modal--error--8vAcf basic_form--labeledInputGroup--aeD6L":void 0,R=e=>{let t=x.formErrors[e];return t?(0,s.jsx)("div",{"data-testid":"form-error",className:"upgrade_contact_sales_modal--errorMessage--FfxPx text--fontPos11--2LvXf text--_fontBase--QdLsd",children:t}):null},P=(e,t,a=!1)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Lf,{htmlName:t,label:e,value:x[t]||"",onChange:e=>{let a={[t]:e.target.value};T(e=>({...e,...a}))},disabled:a,className:I(t)}),R(t)]}),k=(e,t,a)=>{let r=I(t)||f.Os;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:r,children:(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--select--sFfZ- address_form--selectRowFull--8DtEB",children:[(0,s.jsx)(m.VE,{name:t,placeholder:e,defaultValue:"","data-testid":`${t}-select`,onChange:e=>{let a={[t]:e.target.value};T(e=>({...e,...a}))},required:!0,children:a}),(0,s.jsx)(_.B,{className:f.nO,svg:S.A})]})}),R(t)]})};return(0,s.jsx)(h.fu,{name:"Upgrade Contact Sales Modal",children:(0,s.jsxs)(y.ey,{className:"upgrade_contact_sales_modal--contactSalesModal--ExFaV",hide:j,size:480,children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--titleWrapper--mKMG2",children:[(0,s.jsx)("h1",{className:"upgrade_contact_sales_modal--modalTitle--7k87R text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,u.tx)("universal_upgrade.contact_sales_title")}),(0,s.jsx)(o.Jn,{className:v,onClick:j,innerText:"close"})]}),(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--modalBody--FTi91",children:["error"===x.result&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.I,{message:(0,u.t)("universal_upgrade.there_was_an_error_processing_your_information_please_try_again")}),(0,s.jsx)(m.Kz,{multiple:.5})]}),(0,s.jsxs)("fieldset",{children:[P((0,u.t)("universal_upgrade.email_address"),"email"),P((0,u.t)("universal_upgrade.full_name"),"name"),P((0,u.t)("universal_upgrade.company_name"),"companyName"),k((0,u.t)("contact_sales.which_topic_best_fits_your_needs"),"topic",E()),k((0,u.t)("contact_sales.what_figma_plan_are_you_inquiring_about"),"plan",b()),P((0,u.t)("contact_sales.phone_number_optional"),"phone")]}),(0,s.jsx)(m.Kz,{multiple:1}),(0,s.jsx)("p",{children:(0,u.tx)("universal_upgrade.how_can_we_help_optional")}),(0,s.jsx)(m.Kz,{multiple:1}),(0,s.jsx)(g.v,{className:"upgrade_contact_sales_modal--freeTextInput--fE033 text--fontPos13--xW8hS text--_fontBase--QdLsd",value:x.freeText,onChange:e=>T(t=>({...t,freeText:e.target.value})),placeholder:x.overridePlaceholderText??(0,u.t)("universal_upgrade.e_g_i_m_looking_to_set_up_a_demo_of_figma"),maxLength:500})]}),(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--modalFooter--WNk7P",children:[(0,s.jsx)(m.tM,{onClick:j,children:(0,u.tx)("general.cancel")}),(0,s.jsx)(m.vd,{onClick:C,children:(0,u.tx)("universal_upgrade.submit")})]})]})})}},876668:(e,t,a)=>{a.r(t),a.d(t,{OrgHeader:()=>e9,OrgSelfServeBillingRemodelPage:()=>e4,OrgSelfServeBillingRemodelPageInner:()=>e3});var s=a(104076),r=a(716976),i=a(903927),l=a(951002),n=a(638004),d=a(883765),o=a(310725),c=a(219199),m=a(653899),_=a(833805),u=a(550209),p=a(432099),h=a(1188),x=a(520741),g=a(652539),y=a(236631),f=a(256384),v=a(259161),S=a(192075),T=a(281684),j=a(659062),E=a(138105),N=a(373533),b=a(560806),A=a(236753),w=a(788499),C=a(599448),I=a(906356),R=a(454967),P=a(812714),k=a(114339),M=a(6817),O=a(903853),D=a(769109),L=a(555013),U=a(72138),B=a(911990),V=a(151538),G=a(171660),z=a(104034),$=a(366535),F=a(675477),H=a(111297),q=a(249586),W=a(649693),X=a(418149),Y=a(781611),J=a(412469),K=a(894210),Z=a(959834),Q=a(826160),ee=a(25080),et=a(432786),ea=a(354174);let es=(0,a(560201).ex)("org_upgrade_user_info_extended",function({teamIds:e,teamNames:t}){return(0,s.jsx)("div",{children:e.map((e,a)=>{let r=(0,ee.$L)(e,ee.us);return(0,s.jsxs)("div",{className:"org_self_serve_modal_tooltip_content--tooltipRow--CyDdQ",children:[(0,s.jsx)("div",{style:j.sx.add({backgroundColor:r,minWidth:"10px",height:"10px",margin:"8px",borderRadius:"2px"}).$}),(0,s.jsx)("div",{children:t[a]})]},e)})})},e=>{let t=e.getAttribute("data-tooltip-team-names"),a=e.getAttribute("data-tooltip-team-ids");return{teamNames:t.split(","),teamIds:a.split(",")}}),er="org_self_serve_modals--modalContainer--dX-kq",ei="org_self_serve_modals--modalWrapperSmall--A6JUB org_self_serve_modals--modalWrapper--swqMp",el="org_self_serve_modals--modalHeader--nTa0e",en="org_self_serve_modals--modalText--VYdf5";var ed=a(433566);function eo(e){return(0,s.jsx)("div",{style:{height:e.height||12}})}function ec(e){return(0,s.jsx)(et.OJ,{containerClassName:er,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349,children:(0,s.jsxs)("div",{className:ei,children:[(0,s.jsx)("div",{className:el,children:(0,S.tx)("org_self_serve.modals.invalid_email.figma_organization_only_allows_work_emails")}),(0,s.jsx)("div",{className:en,children:(0,S.tx)("org_self_serve.modals.invalid_email.change_email_address_to_proceed")}),(0,s.jsx)(eo,{height:12}),(0,s.jsx)("a",{onClick:e.onFileBrowserClick,children:(0,S.tx)("org_self_serve.modals.invalid_email.go_to_the_file_browser")})]})})}function em(e){return(0,s.jsx)(et.OJ,{containerClassName:er,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349,children:(0,s.jsxs)("div",{className:ei,children:[(0,s.jsx)("div",{className:el,children:(0,S.tx)("org_self_serve.modals.existing_org_admin.figma_organization_already_purchased")}),(0,s.jsx)("div",{className:en,children:(0,S.tx)("org_self_serve.modals.existing_org_admin.if_you_need_another_organization",{contactSales:(0,s.jsx)("a",{onClick:e.onContactSales,children:(0,S.tx)("org_self_serve.modals.existing_org_admin.contact_sales")})})}),(0,s.jsx)(eo,{height:4}),(0,s.jsx)(eo,{height:12}),(0,s.jsx)("a",{onClick:e.onFileBrowserClick,children:(0,S.tx)("org_self_serve.modals.existing_org_admin.go_to_the_file_browser")})]})})}(0,Z.Ju)(function(e){let t=e.isProTeam?X.Oq.exclude([W.ud.DEV_MODE]):X.Oq,[a,i]=(0,r.useState)(t.dict(t=>e.seatDataByLicenseType[t]?.currentSeats||0)),[l,n]=(0,r.useState)(null),d=e=>{let t=a[e];void 0!==t&&t<99&&i({...a,[e]:t+1})},o=t=>{let s=e.seatDataByLicenseType[t],r=a[t];null!=s&&null!=r&&r>s.minSeats&&i({...a,[t]:r-1})},c=(e,t)=>{if(""===e.target.value){t(0);return}let a=parseInt(e.target.value);isNaN(a)||t(a)},m=new J.vr(e.currency),_=a[W.ud.FIGJAM],u={[W.ud.DESIGN]:{headerString:(0,S.t)("all_carts.figma_design_editors.seat_rename"),totalSeatCount:a[W.ud.DESIGN],shouldShowDevModeIncludedText:!0},[W.ud.FIGJAM]:{headerString:(0,S.t)("all_carts.figjam_editors.seat_rename"),totalSeatCount:_,shouldShowDevModeIncludedText:!1},[W.ud.DEV_MODE]:{headerString:(0,S.t)("all_carts.dev_mode_only_seats"),totalSeatCount:a[W.ud.DEV_MODE]??0,shouldShowDevModeIncludedText:!1}};return(0,s.jsxs)(et.Dd,{onSubmit:()=>{let s=!1;if(t.forEach(t=>{let r=a[t],i=e.seatDataByLicenseType[t]?.minSeats||0;void 0!==r&&!1===s&&(r<i||r>99)&&(n(t),s=!0)}),s)return;let r=t.reduce((e,t)=>e+(a[t]||0),0);e.minTotalSeats&&r<e.minTotalSeats?n("total"):(e.dispatch($.Ce()),e.updateAdditionalSeats(a))},confirmText:(0,S.t)("all_carts.save"),cancelText:(0,S.t)("all_carts.cancel"),title:(0,S.t)("all_carts.add_additional_editors.seat_rename"),children:[(0,s.jsx)("div",{className:"org_self_serve_modals--bannerContainer--ly-u-",children:l&&(0,s.jsxs)("div",{className:"org_self_serve_modals--errorBanner--EeUdZ",children:[(0,s.jsx)(g.B,{className:"org_self_serve_modals--errorSvg--h8gsO",svg:ed.A}),(0,s.jsxs)("div",{className:"org_self_serve_modals--errorBannerText--srvT- org_self_serve_modals--headerModalText--h0Go9",children:[l===W.ud.DESIGN&&(0,S.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[W.ud.DESIGN].minSeats}),l===W.ud.FIGJAM&&(0,S.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[W.ud.FIGJAM].minSeats}),l===W.ud.DEV_MODE&&(0,S.tx)("all_carts.you_need_a_minimum_n_dev_mode_seats",{minSeatsCount:e.seatDataByLicenseType[W.ud.DEV_MODE]?.minSeats||0}),"total"===l&&!!e.minTotalSeats&&((0,P.k)().org_checkout_min_seat_info_copy?(0,S.tx)("all_carts.minimum_seats",{minTotalSeats:e.minTotalSeats,minDesignSeats:e.seatDataByLicenseType[W.ud.DESIGN].minSeats,seatsText:(0,S.tx)("checkout.seats_text",{numOfSeats:e.minTotalSeats}),designSeatsText:(0,S.tx)("checkout.seats_text",{numOfSeats:e.seatDataByLicenseType[W.ud.DESIGN].minSeats})}):(0,S.tx)("all_carts.you_need_a_minimum_n_editors.seat_rename",{minSeatsCount:e.minTotalSeats}))]})]})}),t.sort(Y.AG).map(t=>{let r=u[t],l=e.seatDataByLicenseType[t],n=a[t];return void 0===r||void 0===l||void 0===n?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)("div",{children:[(0,s.jsx)(eo,{height:16}),(0,s.jsx)("div",{className:"org_self_serve_modals--headerModalBoldText--uhAfp org_self_serve_modals--headerModalText--h0Go9",children:r.headerString}),r.shouldShowDevModeIncludedText&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eo,{height:4}),(0,s.jsx)(k.G,{})]}),(0,s.jsx)(eo,{height:12}),(0,s.jsx)(M.s,{"data-testid":t+"-seat_counter",billableProductKey:(0,Y.Zx)(t),incrementSeats:()=>d(t),decrementSeats:()=>o(t),numSeats:n,minSeatsCount:l.minSeats,headerText:m.formatMoney(r.totalSeatCount*l.seatUnitCostInCents*(e.showAnnualPrice?12:1)),headerSubText:(0,z.mx)(e.showAnnualPrice,r.totalSeatCount,!0,l.seatUnitCostInCents,e.currency),updateAdditionalSeatsText:e=>c(e,e=>{i({...a,[t]:e})})})]},t)}),(0,s.jsx)(eo,{height:18}),(0,s.jsx)("div",{className:"org_self_serve_modals--divider--cY9-m"})]})},"AdditionalEditorsModal");var e_=(e=>(e[e.NONE=0]="NONE",e[e.DESIGN=1]="DESIGN",e[e.WHITEBOARD=2]="WHITEBOARD",e[e.TOTAL=3]="TOTAL",e))(e_||{});function eu({userData:e,checkboxHandler:t}){let[a,l]=(0,r.useState)(0),n=(0,i.wA)(),d=({rect:e,designChecked:s,...r})=>{if(t(r),r.newVal&&a<3){l(e=>e+1);let t=s?(0,S.t)("checkout.switch_seat_from_design_to_devmode"):(0,S.t)("checkout.enabled_devmode");n(F.eB({target:{kind:K.Ui.TEXT,text:t},targetRect:{top:e.top,right:e.right+8,bottom:e.bottom,left:e.left+8,width:e.width,height:e.height},textAlign:"left",position:K.Zj.RIGHT,hideAfterDelay:1e3}))}};return(0,s.jsx)(s.Fragment,{children:e.map((a,r)=>(0,s.jsxs)("div",{"data-testid":"user-data-row",children:[(0,s.jsxs)(ep,{rowType:"data",children:[(0,s.jsx)(Q.az,{entity:a.user,includeUserEmailAddress:!0,size:24}),(0,s.jsx)(eg,{userInfo:a}),(0,s.jsx)(V.S,{checked:a.designEditor,onChange:e=>{t({userId:a.user.id,type:"designEditor",newVal:e.currentTarget.checked})}}),(0,s.jsx)(L.tB,{checked:a.devMode,className:"org_self_serve_modals--devModeCheckbox--M-CsB",onChange:e=>{d({designChecked:a.designEditor,userId:a.user.id,type:"devMode",newVal:e.currentTarget.checked,rect:e.currentTarget.getBoundingClientRect()})}}),(0,s.jsx)(L.tB,{checked:a.figjamEditor,className:"org_self_serve_modals--figjamCheckbox---FJmg",onChange:e=>{t({userId:a.user.id,type:"figjamEditor",newVal:e.currentTarget.checked})}})]}),r!==e.length-1&&(0,s.jsx)(eh,{})]},a.user.id))})}function ep({rowType:e,children:t}){let a="footer"===e?["55%","15%","15%","15%"]:["35%","20%","15%","15%","15%"];return(0,s.jsx)(B.Y,{dataTestId:"seat-table-row",verticalAlignItems:"center",horizontalAlignItems:"start",padding:{top:"data"===e?14:16,right:16,bottom:"data"===e?14:16,left:16},backgroundColor:"header"===e?"hover":"default",spacing:0,children:t.map((e,t)=>(0,s.jsx)(B.Y,{width:a[t],horizontalAlignItems:"start",verticalAlignItems:"center",padding:{right:16},children:e},t))})}function eh(){return(0,s.jsx)("div",{className:y.s.wFull.colorBgTertiary.h1.$})}function ex({teamId:e}){return(0,s.jsx)("div",{className:y.s.w8.h8.bRadius2.minW8.$,style:j.sx.add({backgroundColor:(0,ee.$L)(e,ee.us)}).$})}function eg({userInfo:e}){return e.teams.length>1?(0,s.jsx)("div",{"data-tooltip-show-immediately":!0,"data-tooltip-type":K.Ib.SPECIAL,"data-tooltip":es,"data-tooltip-team-names":e.teams.map(e=>e.name).join(","),"data-tooltip-team-ids":e.teams.map(e=>e.id).join(","),"data-tooltip-show-right":!0,"data-tooltip-light-mode":!0,children:(0,s.jsx)(G.E,{color:"default",children:(0,S.tx)("all_carts.editor_table.multiple_teams")})}):(0,s.jsxs)(B.Y,{spacing:8,verticalAlignItems:"center",horizontalAlignItems:"start",children:[(0,s.jsx)(ex,{teamId:e.teamIds[0]}),(0,s.jsx)("div",{className:y.s.noWrap.ellipsis.overflowHidden.$,children:(0,s.jsx)(G.E,{color:"default",children:e.teams[0]?.name})})]})}(0,Z.Ju)(function({users:e,updateSelectedEditors:t,updateAdditionalEmptySeats:a,currency:i,minTotalSeats:l,dispatch:n,seatInfo:d,monthlyPriceByProduct:o}){let[c,m]=(0,r.useState)(e),[_,u]=(0,r.useState)({design:d.design.additionalSeatCount,figjam:d.figjam.additionalSeatCount,dev_mode:d.dev_mode.additionalSeatCount}),p=(0,r.useMemo)(()=>{let e=0,t=0,a=0;for(let s of Object.values(c))s.designEditor&&e++,s.devMode&&a++,s.figjamEditor&&t++;return(e+=_.design,a+=_.dev_mode,t+=_.figjam,l&&e+t+a<l)?3:e<d.design.minCount||e>99?1:t<d.figjam.minCount||t>99?2:0},[_,c,l,d]),h=e=>{_[e]>=99||u(t=>({...t,[e]:t[e]+1}))},x=e=>{_[e]<=0||u(t=>({...t,[e]:t[e]-1}))},g=(e,t)=>{let a=""===e.target.value?0:parseInt(e.target.value);isNaN(a)||u(e=>({...e,[t]:a}))},y=new J.vr(i),f=()=>{n($.Ce())};return(0,s.jsx)(H.fu,{name:"Select Editors Modal",children:(0,s.jsxs)(ea.ey,{size:864,maxHeight:672,hide:()=>n($.Ce()),className:"org_self_serve_modals--selectEditorsModal--D0yWS",children:[(0,s.jsxs)("div",{className:"org_self_serve_modals--selectEditorModalHeader--wPo15 org_self_serve_modals--headerModalText--h0Go9",children:[(0,S.tx)("checkout.add_or_remove_editors"),(0,s.jsx)(D.s_,{customStyle:{position:"initial"},dispatch:n,onClose:f})]}),(0,s.jsx)(eh,{}),(0,s.jsxs)(ep,{rowType:"header",children:[(0,s.jsx)(G.E,{color:"default",fontWeight:"medium",children:(0,S.tx)("all_carts.editor_table.Name")}),(0,s.jsx)(G.E,{color:"default",fontWeight:"medium",children:(0,S.tx)("all_carts.editor_table.Teams")}),(0,s.jsxs)(B.Y,{direction:"vertical",spacing:0,horizontalAlignItems:"start",verticalAlignItems:"center",children:[(0,s.jsx)(G.E,{color:"default",fontWeight:"medium",children:(0,S.tx)("general.figma_design")}),(0,s.jsxs)("div",{children:[(0,s.jsx)(G.E,{color:"handoff",fontWeight:"medium",children:(0,S.tx)("general.dev_mode")}),"\xa0",(0,s.jsx)(G.E,{color:"default",fontWeight:"medium",children:(0,S.tx)("checkout.dev_mode_included_text_formatted.included")})]})]}),(0,s.jsx)(G.E,{color:"default",fontWeight:"medium",children:(0,S.tx)("general.dev_mode")}),(0,s.jsx)(G.E,{color:"default",fontWeight:"medium",children:(0,S.tx)("general.figjam")})]}),(0,s.jsx)(eh,{}),(0,s.jsx)(U.P,{maxHeight:426,children:(0,s.jsx)(eu,{userData:Object.values(c),checkboxHandler:({userId:e,type:t,newVal:a})=>{let s={...c[e],[t]:a};"devMode"===t&&a&&(s.designEditor=!1),"designEditor"===t&&a&&(s.devMode=!1),m(t=>({...t,[e]:s})),(0,q.Cu)({name:"org_checkout_select_editors_checkbox",licenseType:t,checked:a})}})}),(0,s.jsx)(eh,{}),(0,s.jsxs)(ep,{rowType:"footer",children:[(0,s.jsxs)(B.Y,{spacing:0,direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center",children:[(0,s.jsx)(G.E,{color:"default",fontWeight:"medium",children:(0,S.tx)("all_carts.add_additional_editors.seat_rename")}),(0,s.jsx)(G.E,{fontWeight:"regular",color:"secondary",children:(0,S.tx)("all_carts.add_additional_editors_description.seat_rename")})]}),(0,s.jsx)(M.s,{billableProductKey:W.ud.DESIGN,incrementSeats:()=>h(W.ud.DESIGN),decrementSeats:()=>x(W.ud.DESIGN),numSeats:_.design,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>g(e,W.ud.DESIGN)}),(0,s.jsx)(M.s,{billableProductKey:W.ud.DEV_MODE,incrementSeats:()=>h(W.ud.DEV_MODE),decrementSeats:()=>x(W.ud.DEV_MODE),numSeats:_.dev_mode,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>g(e,W.ud.DEV_MODE)}),(0,s.jsx)(M.s,{billableProductKey:W.ud.FIGJAM,incrementSeats:()=>h(W.ud.FIGJAM),decrementSeats:()=>x(W.ud.FIGJAM),numSeats:_.figjam,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>g(e,W.ud.FIGJAM)})]}),(0,s.jsxs)("div",{className:"org_self_serve_modals--selectEditorModalActions--ng3b0 org_self_serve_modals--selectEditorModalFooter--8vKi7",children:[0!==p?(()=>{switch(p){case 0:default:return;case 1:return(0,s.jsx)(G.E,{color:"danger",children:(0,S.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:d.design.minCount})});case 2:return(0,s.jsx)(G.E,{color:"danger",children:(0,S.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:d.figjam.minCount})});case 3:return(0,s.jsx)(G.E,{color:"danger",children:(0,S.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:l})})}})():(0,s.jsx)(G.E,{fontWeight:"regular",color:"secondary",children:(0,S.tx)("all_carts.new_total",{total:y.formatMoney(function(e,t,a){let s=t.design,r=t.figjam,i=t.dev_mode;for(let t in e)e[t].designEditor?s++:e[t].devMode&&i++,e[t].figjamEditor&&r++;return s*a[W.ud.DESIGN]*12+r*a[W.ud.FIGJAM]*12+i*a[W.ud.DEV_MODE]*12}(c,_,o),{showCents:!0})})}),(0,s.jsxs)("div",{className:"org_self_serve_modals--buttonGroup--U5iQn",children:[(0,s.jsx)(O.nR,{onClick:f,children:(0,S.t)("general.cancel")}),(0,s.jsx)(L.$$,{onClick:()=>{0===p&&(a(_),t(c),n($.Ce()))},disabled:0!==p,children:(0,S.t)("checkout.update_seats")})]})]})]})})},"SelectEditorsModal");var ey=a(917296),ef=a(186180),ev=a(608175),eS=a(647070),eT=a(984887),ej=a(377026),eE=a(468896);let eN=(0,H.tf)(function(e){return(0,s.jsx)("div",{className:eE.Nd,onClick:e.onClick,children:(0,S.tx)("org_self_serve.headers.cancel")})});function eb(e){if(e.currentStep===eS.X1.Confirmation)return null;let t=[],a=null;if(e.newTeamProps){let s={step:eS.X1.ChoosePlan,name:(0,S.t)("org_self_serve.headers.choose_plan")},r={step:eS.X1.CreateTeam,name:(0,S.t)("org_self_serve.headers.create_team")};switch(e.newTeamProps?.teamFlowType){case ej.SC.CREATE:t.push({step:eS.X1.PseudoCreateTeam,name:(0,S.t)("org_self_serve.headers.create_team")}),t.push({step:eS.X1.AddCollaborators,name:(0,S.t)("org_self_serve.headers.add_team_members")}),t.push(s);break;case ej.SC.CREATE_AND_UPGRADE:t.push(s),t.push(r),a=eS.X1.CreateTeam;break;case ej.SC.UPGRADE_EXISTING_TEAM:t.push(s)}}e.canSeeTeamAndSeatSelectionSteps&&(t.push({step:eS.X1.TeamSelect,name:(0,S.t)("org_self_serve.headers.teams_to_upgrade")}),e.isCampfireCart&&t.push({step:eS.X1.SeatSelect,name:(0,S.t)("checkout.choose_seats")}),a=a??eS.X1.TeamSelect),e.isCampfireCart?a=a??eS.X1.Payment:(t.push({step:eS.X1.Details,name:(0,S.t)("org_self_serve.headers.organization_details")}),a=a??eS.X1.Details),t.push({step:eS.X1.Payment,name:(0,S.t)("org_self_serve.headers.payment")}),t.push({step:eS.X1.Review,name:(0,S.t)("org_self_serve.headers.review")}),t[t.findIndex(e=>e.step===a)].step=eS.X1.Initial;let r=0;for(let a=0;a<t.length;a++)if(t[a].step===e.currentStep){r=a;break}return(0,s.jsxs)("div",{className:eE.li,children:[(0,s.jsx)(eN,{onClick:e.onFileBrowserClick}),(0,s.jsx)("div",{className:eE.Uu,"data-testid":"stepBreadcrumbs",children:t.map((t,a)=>(0,s.jsx)(ef.On,{selected:e.currentStep===t.step,number:a+1,text:t.name,onClick:()=>{d.az.trackDefinedEvent("monetization_upgrades.checkout_breadcrumb_navigation",{fromStep:e.currentStep,toStep:t.step,tier:ev.Ju.ORG,isCampfireCart:!!e.isCampfireCart});let a=function(e){switch(e){case eS.X1.ChoosePlan:return eT.tn.PLAN_COMPARISON;case eS.X1.AddCollaborators:return eT.tn.ADD_COLLABORATORS;case eS.X1.PseudoCreateTeam:return eT.tn.CREATE_TEAM;default:return null}}(t.step);a&&e.onSelectTeamUpgradeStep?e.onSelectTeamUpgradeStep(a):e.setStep(t.step)},canClick:a<r,lightText:!0},a+1))})]})}var eA=a(784219),ew=a(183058),eC=a(473893),eI=a(935835),eR=a(785034),eP=a(542663),ek=a(147046),eM=a(483200),eO=a(443192),eD=a(459494),eL=a(244205),eU=a(205729),eB=a(400136),eV=a(449250),eG=a(134391),ez=a(537307),e$=a(944350),eF=a(644075),eH=a(411224),eq=a(943325),eW=a(613936),eX=a(563554),eY=a(562552),eJ=a(913610),eK=a(262181),eZ=a(768399),eQ=a(876299),e0=a(134798),e1=a(948058);let e5=({selectedTeamIds:e,selectedUserSeatTypes:t,additionalSeatsCount:a,onChangeSeat:s,onChangeAdditionalSeats:i})=>{let l=(0,e0.wh)(e,t,a),[n,d]=(0,r.useState)(l),o=(0,r.useCallback)(e=>{try{d(t=>(function(e,t){let a=(0,e0.n5)(e,t);switch(a.type){case"success":return a.value;case"validation":throw Error("failed validation");case"error":throw Error("sent error")}})(t,e))}catch(e){}},[]);return{changeUserSeatType:(0,r.useCallback)((e,t)=>{o({type:"changeSeatType",userId:e,seatType:t}),s(e,t)},[s,o]),setAdditionalSeats:(0,r.useCallback)(e=>{o({type:"setAdditionalSeats",additionalSeatCounts:e}),i(e)},[i,o]),selectSeatsState:n}};function e2({users:e,selectedUserSeatTypes:t,selectedTeamIds:a,additionalSeatsCount:r,onChangeSeat:i,onChangeAdditionalSeats:l,currency:n}){let d=(0,eQ.G)({currency:n,tier:ev.Ju.ORG,renewalTerm:ev.IX.YEAR,showCents:!1}),[o]=(0,_.mI)(d);if(null===o.data)throw Error("No seat types data");let c=o.data,{changeUserSeatType:m,selectSeatsState:u,setAdditionalSeats:p}=e5({selectedTeamIds:a,selectedUserSeatTypes:t,additionalSeatsCount:r,onChangeSeat:i,onChangeAdditionalSeats:l});return(0,s.jsx)("div",{"data-testid":"select-seats-step-org",children:(0,s.jsx)(e1.T,{users:e,seatTypes:c,changeUserSeatType:m,selectSeatsState:u,setAdditionalSeats:p,tier:ev.Ju.ORG})})}var e7=a(388041);class e3 extends r.Component{constructor(e){super(e),this.canSeeTeamAndSeatSelectionSteps=()=>Object.keys(this.state.eligibleTeamsByTeamId).length>0||this.state.loading||!!this.props.newTeamProps,this.effectiveStep=()=>this.props.step===eS.X1.Initial||this.props.step===eS.X1.ChoosePlan?this.props.newTeamProps?.teamFlowType===ej.SC.CREATE_AND_UPGRADE?eS.X1.CreateTeam:this.canSeeTeamAndSeatSelectionSteps()?eS.X1.TeamSelect:eS.X1.Payment:this.props.step,this.setStep=e=>{this.props.dispatch(ek.sf({view:"orgSelfServe",step:e,orgMigrated:!1,newTeamProps:this.props.newTeamProps,upsellSource:this.props.upsellSource})),this.setState(e=>({payment:{...e.payment,card:null}}))},this.trackError=e=>{d.az.trackDefinedEvent("monetization_upgrades.checkout_payment_error",{message:e,paymentFlow:eB.wn.ORG_UPGRADE,paymentMethodType:eq.lB.CARD,isCampfireCart:!0})},this.onSubmit=()=>{let e=this.effectiveStep();switch(e){case eS.X1.CreateTeam:this.state.newTeamName?.trim()&&this.setStep(eS.X1.TeamSelect);break;case eS.X1.AddCollaborators:this.setStep(eS.X1.Payment);break;case eS.X1.PseudoCreateTeam:this.setStep(eS.X1.TeamSelect);break;case eS.X1.TeamSelect:let t=(0,C.h)({eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,selectedTeamIds:this.state.selectedTeamIds,eligibleUsersByUserId:this.state.eligibleUsersByUserId,selectedUserSeatTypes:this.state.selectedUserSeatTypes});this.setState({selectedUserSeatTypes:t}),this.setStep(eS.X1.SeatSelect);break;case eS.X1.SeatSelect:this.setStep(eS.X1.Payment);break;case eS.X1.Payment:this.onSubmitPaymentAndAddress();break;case eS.X1.Review:this.onSubmitPurchaseOrder();break;case eS.X1.Confirmation:break;default:(0,l.wc)(e)}},this.getNextButtonText=()=>{let e=this.effectiveStep();switch(e){case eS.X1.CreateTeam:case eS.X1.PseudoCreateTeam:case eS.X1.AddCollaborators:return(0,S.t)("org_self_serve.create_team_step.next_select_team");case eS.X1.TeamSelect:return(0,S.t)("checkout.org_self_serve.next_select_seats");case eS.X1.SeatSelect:return(0,S.t)("org_self_serve.payment_step.next_payment");case eS.X1.Payment:return(0,S.t)("org_self_serve.review_step.next_review");case eS.X1.Review:case eS.X1.Confirmation:return"";default:(0,l.wc)(e)}},this.getIsNextButtonDisabled=()=>{let e=this.effectiveStep();switch(e){case eS.X1.CreateTeam:case eS.X1.PseudoCreateTeam:return!this.state.newTeamName;case eS.X1.TeamSelect:return this.state.loading;case eS.X1.Payment:return this.state.apiPending||!this.state.orgDetails.legalOrgName;case eS.X1.Review:case eS.X1.Confirmation:case eS.X1.AddCollaborators:case eS.X1.SeatSelect:return!1;default:(0,l.wc)(e)}},this.getIsNextButtonLoading=()=>this.state.loading||this.state.apiPending,this.onTeamToggle=e=>{let t=!this.state.selectedTeamIds.has(e);d.az.trackDefinedEvent("monetization_upgrades.checkout_change_team_selection",{teamId:e,selectedTeam:t}),t?this.setState(t=>({selectedTeamIds:t.selectedTeamIds.add(e)})):this.setState(t=>(t.selectedTeamIds.delete(e),{selectedTeamIds:t.selectedTeamIds}))},this.onCardReady=e=>{let t={...this.state.payment,card:e};this.setState({payment:t})},this.onAddressChange=e=>{let t={...this.state.payment,address:e};this.setState({payment:t})},this.onShippingAddressChange=e=>{this.setState({shippingAddress:e})},this.onNameOnPaymentMethodChange=e=>{this.setState({nameOnPaymentMethod:e.trim()})},this.onClearToken=()=>{let e={...this.state.payment,token:null};this.setState({payment:e})},this.onVatIdChange=e=>{this.setState({vatId:e})},this.onRegionalVatIdChange=e=>{this.setState({regionalVatId:e})},this.onVatValidationFail=e=>{this.trackError(e),this.setState({apiPending:!1,paymentError:e})},this.onChangeNewTeamName=e=>{this.setState({newTeamName:e.trim()})},this.onChangeOrgDetails=e=>{let t=e.target.name,a=e.target.value;if(!t){e.preventDefault(),console.error("HTMLInputElement is missing name attribute:",e.target);return}let s=this.state.orgDetails;switch(t){case"actor_name":s.actorName=a.trim();break;case"legal_org_name":s.legalOrgName=a.trim();break;case"org_name":s.orgName=a.trim()}this.setState({orgDetails:s})},this.contactSales=()=>{this.props.dispatch((0,$.to)({type:I.lk,data:{source:R.B.ORG_SELF_SERVE_UPGRADE_MODAL}}))},this.onFileBrowserClick=()=>{this.props.newTeamProps&&(0,eG.Al)(this.props.user.id),c.Ay.redirect("/files/recent")},this.updateAdditionalEmptySeats=e=>{this.setState({additionalSeatCounts:e})},this.renderPurchaseSummary=()=>{let e=this.effectiveStep()===eS.X1.TeamSelect?null:(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts);return(0,s.jsx)(eC.z,{billingInterval:eT.NW.YEAR,buttonText:this.getNextButtonText(),canEnforcePaidSeatMinimum:this.effectiveStep()===eS.X1.SeatSelect,countByBillableProductKey:e,currency:this.state.currency,footer:(0,s.jsxs)("div",{className:eE.i9,children:[(0,s.jsx)(g.B,{svg:e7.A,className:eE.$y}),(0,s.jsx)("p",{children:(0,S.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:(0,s.jsx)("span",{className:eE.uD,onClick:this.contactSales,children:(0,S.tx)("org_self_serve.purchase_summary.contact_our_sales_team")})})})]}),isButtonDisabled:this.getIsNextButtonDisabled(),isLoading:this.getIsNextButtonLoading(),onClickNext:this.onSubmit,onSwitchCurrency:e=>{this.props.dispatch(eM.MN({currency:e})),this.setState({currency:e})},tier:ev.Ju.ORG,title:(0,S.t)("checkout.your_organization_plan"),trackingProperties:{selectedTeamIds:(0,w.gu)(Array.from(this.state.selectedTeamIds)),selectedUserSeatTypes:(0,w.Tj)(this.state.selectedUserSeatTypes),countBySeatType:(0,w.gS)(e)}})},this.state={loading:!0,eligibleTeamsByTeamId:{},selectedTeamIds:new Set,eligibleUsersByUserId:{},selectedUserSeatTypes:{},additionalSeatCounts:{collaborator:0,developer:0,expert:0},payment:{card:null,last4:null,address:(0,eT.EB)((0,J.aE)())},apiPending:!1,stripeCustomerId:null,taxRate:0,orgDetails:{actorName:"",actorEmail:this.props.user.email,legalOrgName:"",orgName:""},paymentError:null,currency:this.props.currency,shippingAddress:(0,eT.EB)((0,J.aE)()),nameOnPaymentMethod:"",vatId:null,regionalVatId:null,newTeamName:this.props.newTeamProps?.newTeamName||null,inviteEmails:this.props.newTeamProps?.inviteEmails||[]}}componentDidMount(){this.fetchTeamEligibleUpgrades()}fetchTeamEligibleUpgrades(){return eY.Eh.getEligibleUpgrades().catch(e=>{let t=e.data.message;return this.props.dispatch(ek.sf({view:"recentsAndSharing"})),this.props.dispatch(f.s.error(t||(0,S.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again"))),this.setState({loading:!1}),Promise.reject()}).then(({data:e})=>{(0,w.R9)({eligibleTeamIds:e.meta.eligible_teams.map(e=>e.id),eligibleTeamUsers:e.meta.eligible_team_users,tier:ev.Ju.ORG,step:this.effectiveStep()});let{eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r}=(0,E.W)(e.meta.eligible_teams,e.meta.eligible_team_users);this.setState({loading:!1,eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r})})}componentDidUpdate(e,t){(0,o.zN)(e.user.email)!==(0,o.zN)(this.props.user.email)&&c.Ay.redirect("/purchase-organization")}getSubtotal(){let e=(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||X.N_.dict(e=>0);return(0,N.Vh)(e,(0,A.s$)(this.props.productPriceBySeatType))}getTaxTotal(){let e=(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||X.N_.dict(e=>0);return(0,N.kV)(e,(0,A.s$)(this.props.productPriceBySeatType),this.state.taxRate)}getTotal(){let e=(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||X.N_.dict(e=>0);return(0,N.N9)(e,(0,A.s$)(this.props.productPriceBySeatType),this.state.taxRate)}getDisplayedCostBreakdown(){let e=this.getSubtotal(),t=this.getTaxTotal(),a=this.getTotal();return(0,A.GL)({subtotal:e,taxTotal:t,total:a})}async onSubmitPaymentAndAddress(){let e=this.state.payment.address,t=this.state.payment.card,a=this.state.vatId,s=this.state.regionalVatId;if(null===t){let e=(0,S.t)("org_self_serve.payment_step.sorry_please_wait");this.trackError(e),this.setState({paymentError:e});return}if(this.setState({apiPending:!0}),a&&!await (0,eJ.V)(a,e.country,()=>{},this.onVatValidationFail))return;if(this.props.canSeeBillingAddressExp&&!this.state.nameOnPaymentMethod){let e=(0,S.t)("org_self_serve.payment_step.name_on_payment_method_is_required");this.trackError(e),this.setState({apiPending:!1,paymentError:e});return}if(s&&!await (0,eJ.V)(s,e.country,()=>{},this.onVatValidationFail,e.region))return;let r=this.props.canSeeBillingAddressExp?{name:this.state.nameOnPaymentMethod,address_line1:e.line1,address_line2:e.line2,address_country:e.country,address_city:e.city,address_state:e.region,address_zip:e.postal_code}:void 0;(0,eq.Ey)(t,r).then(t=>{if(!t.error&&t.token)return(0,eq.To)(t.token.id,this.getSubtotal(),this.state.currency).then(t=>this.props.canSeeBillingAddressExp?p.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,billing_address:e,shipping_address:(0,eT.$V)(this.state.shippingAddress)?null:this.state.shippingAddress,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null}):p.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,address:e,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null})).catch(e=>{let t=e.data?.message||e.message;return this.trackError(t),this.setState({apiPending:!1,paymentError:t}),Promise.reject()}).then(({data:e})=>{this.setState(a=>({payment:{...a.payment,last4:t.token?.card?.last4||null},stripeCustomerId:e.meta.stripe_customer_id,taxRate:e.meta.tax_percent,apiPending:!1}),()=>this.setStep(eS.X1.Review))});{let e=t.error?.message||(0,S.t)("org_self_serve.payment_step.there_was_an_error_processing_your_payment_please_try_again");this.trackError(e),this.setState({apiPending:!1,paymentError:e})}})}onSubmitPurchaseOrder(){this.props.dispatch(eO.b({completed_org_cart_flow:!0}));let e=(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts),t=this.getDisplayedCostBreakdown(),a=(0,A.vm)(this.props.productPriceBySeatType),s={legal_org_name:this.state.orgDetails.legalOrgName,org_name:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,team_ids:Array.from(this.state.selectedTeamIds),requested_seats:e,selected_user_seat_types:(0,A.VB)(this.state.selectedUserSeatTypes),stripe_customer_id:this.state.stripeCustomerId,selected_currency:this.state.currency,vat_gst_id:this.state.vatId||null,regional_vat_gst_id:this.state.regionalVatId||null,displayed_cost_breakdown:t,displayed_price_keys:a};this.state.newTeamName&&(s.new_team_options={team_name:this.state.newTeamName,add_to_org:!0}),this.setState({apiPending:!0}),p.Ay.post("/api/orgs",s).catch(s=>(this.props.dispatch(f.s.error((0,T.J)(s,s.data?.message||(0,S.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again")))),(0,u.$D)(n.e.BILLING_EXPERIENCE,Error(`[Billing] Org checkout API failed: ${s.data?.message}`),{extra:{eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,eligibleUsersByUserId:this.state.eligibleUsersByUserId,selectedUserSeatTypes:this.state.selectedUserSeatTypes,selectedTeamIds:Array.from(this.state.selectedTeamIds),userId:this.props.user.id,countBySeatType:e,displayedCostBreakdown:t,displayedPriceKeys:a}}),this.setState({apiPending:!1}),Promise.reject())).then(e=>{this.setState({apiPending:!1},()=>this.setStep(eS.X1.Confirmation)),this.state.inviteEmails.length&&e.data.meta.new_team&&this.props.dispatch((0,eH.rq)({emails:this.state.inviteEmails,resourceType:e$.vt.TEAM,resourceIdOrKey:e.data.meta.new_team.id,level:eW.e6.EDITOR,teamId:e.data.meta.new_team.id})),this.state.newTeamName&&e.data.meta.new_team&&(0,eG.Al)(this.props.user.id),(0,d.sx)("Self Serve Org Purchased (GTM)"),(0,q.uE)("Self Serve Org Purchased",{user:this.props.user},{org_name:s.org_name,upsellSource:this.props.upsellSource})})}render(){let e;let t=this.effectiveStep(),a=(0,A.Ds)(Object.values(this.state.eligibleTeamsByTeamId));if(t===eS.X1.Review){let t=(0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||{};e=(0,s.jsx)(ew.j,{billingAddress:this.state.payment.address,billingInterval:eT.NW.YEAR,countByBillableProductKey:t,currency:this.state.currency,displayName:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,isRequestPending:this.state.apiPending,legalName:this.state.orgDetails.legalOrgName,navigateToEditDetails:()=>this.setStep(eS.X1.Payment),onSubmit:this.onSubmit,onSubmitTrackingProperties:{selectedTeamIds:(0,w.gu)(Array.from(this.state.selectedTeamIds)),selectedUserSeatTypes:(0,w.Tj)(this.state.selectedUserSeatTypes),countBySeatType:(0,w.gS)((0,A.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)),domain:(0,o.zN)(this.props.user.email),taxPercent:this.state.taxRate,subtotal:this.getSubtotal(),taxTotal:this.getTaxTotal(),total:this.getTotal()},shippingAddress:this.state.shippingAddress,taxPercent:this.state.taxRate,tier:ev.Ju.ORG,title:(0,S.t)("checkout.upgrade_to_an_organization_plan"),userEmail:this.state.orgDetails.actorEmail})}else e=t===eS.X1.Confirmation?(0,s.jsx)(ey._,{totalCents:this.getTotal(),orgMigrated:this.props.orgMigrated,onFileBrowserClick:this.onFileBrowserClick,orgPayment:this.state.payment,currency:this.state.currency}):(0,s.jsxs)(s.Fragment,{children:[this.props.isOrgAdmin&&(0,s.jsx)(em,{onContactSales:this.contactSales,onFileBrowserClick:this.onFileBrowserClick}),(0,o.qe)(this.props.user.email)&&(0,s.jsx)(ec,{onFileBrowserClick:this.onFileBrowserClick}),(0,s.jsxs)("div",{style:j.sx.if(t===eS.X1.CreateTeam,j.sx.flex.justifyCenter,j.sx.grid.add({gridTemplateColumns:"1fr 280px",gap:"48px"})).$,children:[t===eS.X1.CreateTeam&&(0,s.jsx)("div",{className:eE.Bb,children:(0,s.jsx)(eI.y,{type:eI.I.ORG,teamName:this.state.newTeamName||"",setTeamName:this.onChangeNewTeamName,onNext:this.onSubmit})}),t===eS.X1.TeamSelect&&(this.state.loading?(0,s.jsx)(eR.f,{}):(0,s.jsx)(eZ.t,{teams:a,selectedTeamIds:this.state.selectedTeamIds,onToggle:this.onTeamToggle,newTeamName:this.state.newTeamName})),t===eS.X1.SeatSelect&&(this.state.loading?(0,s.jsx)(eR.f,{}):(0,s.jsx)(e2,{users:(0,b.s)({eligibleUsersByUserId:this.state.eligibleUsersByUserId,eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,selectedTeamIds:Array.from(this.state.selectedTeamIds)}),selectedTeamIds:Array.from(this.state.selectedTeamIds),selectedUserSeatTypes:this.state.selectedUserSeatTypes,additionalSeatsCount:this.state.additionalSeatCounts,currency:this.state.currency,onChangeSeat:(e,t)=>{this.setState({selectedUserSeatTypes:{...this.state.selectedUserSeatTypes,[e]:t}})},onChangeAdditionalSeats:this.updateAdditionalEmptySeats})),t===eS.X1.Payment&&(0,s.jsxs)("form",{"data-testid":"org-payment-and-details-step",children:[(0,s.jsx)(eZ.h,{orgDetails:this.state.orgDetails,onChangeFormInput:this.onChangeOrgDetails}),(0,s.jsx)("div",{className:y.s.pt24.$,children:(0,s.jsxs)(eA.x,{title:(0,S.t)("checkout.payment_details"),children:[this.state.paymentError&&(0,s.jsx)("div",{className:y.s.mb20.$,children:(0,s.jsx)(x._,{color:x.S.ERROR,text:this.state.paymentError})}),(0,s.jsx)(eK.n,{allowFullWidthForm:!0,billingAddress:this.state.payment.address,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp,cardId:"team-upgrade-page-card",id:"team-upgrade-page-form",isCheckoutFlow:!0,isCommunityCheckout:!1,nameOnPaymentMethod:this.state.nameOnPaymentMethod,onBillingAddressChange:this.onAddressChange,onCardReady:this.onCardReady,onClearToken:this.onClearToken,onRegionalVatIdChange:this.onRegionalVatIdChange,onShippingAddressChange:this.onShippingAddressChange,onVatIdChange:this.onVatIdChange,regionalVatId:this.state.regionalVatId,setNameOnPaymentMethod:this.onNameOnPaymentMethodChange,shippingAddress:this.state.shippingAddress,vatId:this.state.vatId})]})})]}),t!==eS.X1.CreateTeam&&this.renderPurchaseSummary()]})]});return(0,s.jsxs)(H.fu,{name:eX.e0.ORG_CHECKOUT_FLOW,properties:{step:t,currency:this.state.currency,upsellSource:this.props.upsellSource,entryPoint:this.props.entryPoint,eligibleTeamIds:(0,w.gu)(Object.keys(this.state.eligibleTeamsByTeamId)),prices:(0,w.Jh)(this.props.productPriceBySeatType)},enabled:!this.state.loading,trackingOptions:(0,eP.u)(),children:[t!==eS.X1.Confirmation&&(0,s.jsx)("div",{className:y.s.sticky.top0.zIndexTopBar.selectNone.$,children:(0,s.jsx)(eb,{currentStep:this.props.step,setStep:this.setStep,canSeeTeamAndSeatSelectionSteps:this.canSeeTeamAndSeatSelectionSteps(),onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:e=>{this.props.dispatch(ek.sf({teamId:null,...this.props.newTeamProps?.previousView,view:"teamUpgrade",paymentStep:e,teamFlowType:this.props.newTeamProps?.teamFlowType||ej.SC.CREATE_AND_UPGRADE}))},isCampfireCart:!0})}),(0,s.jsxs)("div",{className:y.s.selectNone.$,style:j.sx.mxAuto.add({padding:"48px",maxWidth:"1400px"}).$,children:[(0,s.jsx)(e9,{step:t}),e]})]})}}function e4(e){let t=(0,i.wA)(),a=(0,i.d4)(e=>e.user),r=(0,i.d4)(e=>(0,eF.x9)(e.orgUsersByOrgId,e.user.id).some(e=>e.permission===e$._D.ADMIN)),l=(0,eD.Mh)(),d=(0,i.d4)(e=>e.payment).currency||(0,J.LN)();(0,m.h)(()=>{let e=document.createElement("div");return e.style.position="fixed",e.style.inset="0",e.style.background="var(--color-bg-secondary)",e.style.zIndex="-1",document.body.appendChild(e),()=>{document.body.removeChild(e)}});let o=(0,eU.jv)({billableProductKeys:X.N_,baseQuery:{currency:d,tier:ev.Ju.ORG,renewalTerm:ev.IX.YEAR,unit:ev.IX.YEAR}}),[c]=(0,_.mI)(o);if("loaded"!==c.status)return(0,s.jsx)(eV.K,{});let u=c.data;return(0,s.jsx)(h.tH,{team:n.e.MONETIZATION_UPGRADES,boundaryKey:"OrgSelfServeBillingRemodelPage",fallback:h.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:ez.y4,children:(0,s.jsx)(e3,{...e,dispatch:t,user:a,isOrgAdmin:r,canSeeBillingAddressExp:l,productPriceBySeatType:u,currency:d})})}function e9({step:e}){let t=function(e){switch(e){case eS.X1.TeamSelect:return(0,S.t)("checkout.org_self_serve.select_teams_title");case eS.X1.SeatSelect:return(0,S.t)("checkout.org_self_serve.select_seats_header");case eS.X1.Payment:return(0,S.t)("checkout.enter_your_payment_details");case eS.X1.Review:return(0,S.t)("checkout.everything_look_good");default:return null}}(e),a=function(e){let t=(0,s.jsx)(v.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:eL.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,S.tx)("checkout.learn_more_about_seats")});switch(e){case eS.X1.TeamSelect:return(0,S.t)("checkout.org_self_serve.select_teams_subtitle");case eS.X1.SeatSelect:return(0,S.tx)("checkout.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:t});case eS.X1.Review:return(0,S.t)("checkout.confirm_your_plan_seats_and_payment_details_then_you_re_all_set");default:return null}}(e);return t?(0,s.jsxs)("div",{className:y.s.mb32.$,"data-testid":"cart-org-header",children:[(0,s.jsx)("h2",{className:y.s.font15.lh24.fontMedium.$,children:t}),a&&(0,s.jsx)("p",{className:y.s.colorTextSecondary.font13.mt8.$,children:a})]}):null}e3.displayName="OrgSelfServePage"},768399:(e,t,a)=>{a.d(t,{h:()=>x,t:()=>p});var s=a(104076);if(443==a.j)var r=a(554875);if(443==a.j)var i=a(517796);var l=a(555013),n=a(236631),d=a(192075),o=a(659062),c=a(142914),m=a(784219),_=a(468896),u=a(691138);function p({teams:e,selectedTeamIds:t,onToggle:a,newTeamName:r}){return(0,s.jsx)("div",{"data-testid":"org-select-teams-step",children:(0,s.jsxs)("div",{className:_.kH,children:[r&&(0,s.jsx)(h,{team:{id:"new-team",name:r,numMembers:1},isSelected:!0,onToggle:a},"new-team"),e.map(e=>(0,s.jsx)(h,{team:e,isSelected:t.has(e.id),onToggle:a},e.id))]})})}function h({team:e,isSelected:t,onToggle:a}){return(0,s.jsxs)("div",{"data-testid":`select_team--${e.id}`,children:[(0,s.jsx)(r.F,{className:u.Q,checked:t,onChange:()=>a(e.id),id:`select-team-${e.id}`,disabled:"new-team"===e.id,"aria-disabled":"new-team"===e.id}),(0,s.jsxs)("label",{htmlFor:`select-team-${e.id}`,className:_.K6,style:o.sx.if(t,o.sx.colorBorderSelected.colorBgSelectedTertiary,o.sx.colorBg.add({borderColor:"var(--color-bg)"})).$,children:[(0,s.jsx)(c.nl,{team:e}),(0,s.jsxs)("span",{className:n.s.maxWFull.$,children:[(0,s.jsx)("span",{className:n.s.block.maxWFull.font14.fpl__textBodyLargeLineHeight.colorText.truncate.$,children:e.name}),(0,s.jsx)("span",{className:n.s.block.font11.colorTextSecondary.ellipsis.$,children:(0,d.tx)("checkout.org_select_teams_member_count",{count:e.numMembers})})]}),t&&(0,s.jsx)("div",{className:_.ER,children:(0,s.jsx)(i.g,{})})]})]},e.id)}function x({orgDetails:e,onChangeFormInput:t}){return(0,s.jsx)(m.x,{title:(0,d.t)("checkout.organization_details"),children:(0,s.jsxs)("div",{className:n.s.font13.$,children:[(0,s.jsx)(l.Lf,{htmlName:"legal_org_name",label:(0,d.t)("org_self_serve.details_step.legal_company_name"),value:e.legalOrgName,onChange:t}),(0,s.jsx)(l.Lf,{htmlName:"org_name",label:(0,d.t)("org_self_serve.details_step.company_display_name"),placeholder:(0,d.t)("org_self_serve.details_step.company_display_name__different_from_company_name_sub_text"),value:e.orgName,onChange:t})]})})}},917296:(e,t,a)=>{a.d(t,{W:()=>p,_:()=>h});var s=a(104076),r=a(511570),i=a.n(r),l=a(555013),n=a(679359),d=a(652539),o=a(192075),c=a(412469),m=a(468896);if(443==a.j)var _=a(933949);function u(e){return(0,s.jsx)("div",{style:{height:e.height||12}})}function p(){return(0,s.jsx)("span",{children:(0,o.tx)("org_self_serve.review_step.i_agree_to_msa_and_renewal_links",{msaLink:(0,s.jsx)(l.CY,{href:"/ssa",target:"_blank",trusted:!0,children:(0,o.tx)("org_self_serve.review_step.software_services_agreement")}),renewalLink:(0,s.jsx)(l.CY,{href:(0,o.dS)("/renewal-and-cancellation"),target:"_blank",trusted:!0,children:(0,o.tx)("org_self_serve.review_step.renewal_and_cancellation_terms")})})})}function h(e){let t=new c.vr(e.currency);return(0,s.jsx)("div",{className:m.jg,children:(0,s.jsxs)("div",{className:i()(m.M7,m.Et),children:[(0,s.jsxs)("div",{className:m.cc,children:[(0,s.jsx)(d.B,{svg:_.A,className:m.O2,useOriginalSrcFills_DEPRECATED:!0,autosize:!0,width:"32px",height:"32px"}),(0,s.jsx)("div",{className:m.W,children:(0,o.tx)("org_self_serve.confirmation_step.you_re_all_set")})]}),(0,s.jsxs)("div",{className:m.Jo,children:[(0,s.jsx)("div",{className:m.Qv,children:(0,o.tx)("org_self_serve.confirmation_step.order_confirmation_message")}),(0,s.jsx)(u,{height:24}),(0,s.jsx)("div",{className:m.aK}),(0,s.jsx)(u,{height:24}),(0,s.jsxs)("div",{className:m.N5,children:[(0,s.jsxs)("div",{className:m.I1,children:[(0,o.tx)("org_self_serve.confirmation_step.total_amount_to_be_charged_to_card_ending_in_last4",{last4:e.orgPayment.last4}),(0,s.jsx)("span",{className:m.iv,children:t.formatMoney(e.totalCents,{showCents:!1})})]}),(0,s.jsx)(u,{height:24}),(0,s.jsx)("div",{className:m.aK}),(0,s.jsx)(u,{height:32}),(0,s.jsxs)("div",{className:m.Ed,children:[!e.orgMigrated&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.kt,{}),(0,s.jsx)("div",{className:m.nm,children:(0,o.tx)("org_self_serve.confirmation_step.we_re_setting_up_your_organization")})]}),(0,s.jsx)(l.$$,{disabled:!e.orgMigrated,className:m.Xq,onClick:e.onFileBrowserClick,dataTestId:"go-to-file-browser-button",children:(0,o.tx)("org_self_serve.confirmation_step.go_to_the_file_browser")})]})]})]})]})})}},103378:(e,t,a)=>{a.r(t),a.d(t,{PromoReviewPage:()=>x});var s=a(104076),r=a(903927),i=a(572761),l=a(640718),n=a(101880),d=a(192075),o=a(239904),c=a(147046),m=a(483200),_=a(432135),u=a(111297),p=a(412469),h=a(71004);function x(e){let{selectedView:t,promo:a}=e,x=(0,r.wA)(),g=(0,h.Ud)({teamId:t.teamId}),y=()=>{(0,i._H)(),x(m.Ay({promo:null})),x(c.sf(e.selectedView.previousView||{view:"team",teamId:t.teamId}))},f=()=>{x(_.S_({teamId:t.teamId,teamName:t.teamName,promoCode:a?.code||"",onSuccess:y,onError:y}))};return a?(0,s.jsx)(u.fu,{name:"Redeem Promo Code > Confirm",properties:{teamId:t.teamId},children:(0,s.jsxs)("div",{className:"promo_modals--promoReviewInner--O81Uu",children:[(0,s.jsx)("div",{className:"promo_modals--cancelRow--Zrs8S",children:(0,s.jsx)("button",{type:"button",className:"promo_modals--cancelButton--ho2Ks text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:y,children:(0,d.tx)("promo.promo_review.cancel")})}),(0,s.jsx)("div",{className:"promo_modals--promoReviewTitle--fatmf text--fontPos20--Bcz97 text--_fontBase--QdLsd",children:(0,d.tx)("promo.promo_review.redeem_your_days_of_free_professional_plan",{days:a.promo_value})}),(0,s.jsx)("div",{className:"promo_modals--promoReviewDescription--uLn0D text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,d.tx)("promo.promo_review.any_additional_editors_invited_to_selected_view_team_name_will_also_be_free_of_charge_for_the_next_days.seat_rename",{teamName:t.teamName,days:a.promo_value})}),(0,s.jsx)("div",{children:(0,s.jsx)(n.x,{isLoading:g,children:()=>(0,s.jsx)(l.o,{children:(0,s.jsx)(o.d,{selectedView:t,onClickConfirm:f,currency:(0,p.LN)(),canSeeBillingAddressExp:!1})})})})]})}):(y(),null)}},755462:(e,t,a)=>{a.d(t,{m:()=>E});var s=a(104076),r=a(716976),i=a(903927),l=a(382629),n=a(929302),d=a(91478),o=a(268389),c=a(293422);if(443==a.j)var m=a(995639);var _=a(883765),u=a(6817),p=a(236631),h=a(130249),x=a(192075),g=a(911990);if(443==a.j)var y=a(542663);var f=a(366535),v=a(781611),S=a(959834),T=a(134798);let j=(0,S.Ju)(function(e){let{seatTypes:t,additionalSeatCounts:a,setAdditionalSeats:i,open:m,onClose:h}=e,y=n.hS({open:m,onClose:h}),[f,S]=(0,r.useState)(a),j=e=>t=>{S((0,T.$$)(f,t,e))},E=j(1),N=j(-1),b=r.useCallback(e=>t=>S((0,T.$$)(f,e,t-(f[e]||0))),[f]);return(0,s.jsx)(d.bL,{manager:y,width:264,htmlAttributes:{"data-testid":"additional-seats--modal"},children:(0,s.jsxs)(o.vo,{children:[(0,s.jsx)(o.Y9,{children:(0,s.jsx)(o.hE,{children:(0,x.tx)("checkout.additional_seats.add_or_remove_unassigned_seats")})}),(0,s.jsxs)(o.nB,{children:[(0,s.jsx)("div",{className:p.s.pt8.pb24.colorTextSecondary.$,children:(0,s.jsx)("p",{children:(0,x.tx)("checkout.additional_seats.pre_purchase_seats_for_your_team_to_help_you_budget_and_save_time_later_on")})}),(0,s.jsx)(g.Y,{direction:"vertical",spacing:16,padding:{bottom:16},children:Object.keys(f).sort(v.AG).map(e=>(0,l.uy)(t[e])||(0,l.uy)(f[e])?null:(0,s.jsx)("div",{"data-testid":`additional-seats--${e}`,children:(0,s.jsx)(u.s,{billableProductKey:e,numSeats:f[e],minSeatsCount:0,headerText:(0,x.t)("checkout.additional_seats.seat_label",{seatType:t[e].displayName}),headerSubText:(0,x.t)("checkout.price_per_month",{price:t[e].displayPrice}),incrementSeats:()=>E(e),decrementSeats:()=>N(e),updateAdditionalSeatsText:(0,u.K)(b(e))})},e))})]}),(0,s.jsx)(o.wi,{children:(0,s.jsxs)(o.jk,{children:[(0,s.jsx)(c.$n,{variant:"secondary",onClick:h,htmlAttributes:{"data-testid":"additional-seats--cancel"},children:(0,x.tx)("checkout.additional_seats.cancel")}),(0,s.jsx)(c.$n,{variant:"primary",onClick:()=>{_.az.trackDefinedEvent("monetization_upgrades.cart_additional_seats_changed_in_checkout",{additionalSeatCountsBefore:JSON.stringify(a),additionalSeatCountsAfter:JSON.stringify(f),tier:e.tier}),i(f),h()},htmlAttributes:{"data-testid":"additional-seats--confirm"},children:(0,x.tx)("checkout.additional_seats.confirm")})]})})]})})},"AdditionalSeatsModal");function E({seatTypes:e,additionalSeatCounts:t,setAdditionalSeats:a,tier:r}){let l=(0,i.wA)(),n=(0,y.u)();return(0,s.jsx)(h.$z,{variant:"ghost","aria-label":(0,x.t)("checkout.additional_seats.add_seats_to_assign_later"),htmlAttributes:{"data-testid":"additional-seats--button"},trackingOptions:n,onClick:()=>{l((0,f.to)({type:j,data:{seatTypes:e,additionalSeatCounts:t,setAdditionalSeats:a,tier:r}}))},iconPrefix:(0,s.jsx)(m.A,{}),children:(0,x.tx)("checkout.additional_seats.add_seats_to_assign_later")})}},784219:(e,t,a)=>{a.d(t,{x:()=>l});var s=a(104076),r=a(236631),i=a(659062);function l({title:e,children:t,dataTestId:a}){return(0,s.jsxs)("div",{style:i.sx.p24.colorBg.add({borderRadius:"13px",height:"fit-content"}).$,"data-testid":a,children:[e&&(0,s.jsx)("h3",{className:r.s.mb16.fontMedium.font15.$,children:e}),t]})}},183058:(e,t,a)=>{a.d(t,{j:()=>w});var s=a(104076),r=a(659062),i=a(555013),l=a(236631),n=a(192075),d=a(244205),o=a(608175),c=a(984887),m=a(784219);function _(e){let t=e.shippingAddress&&!(0,c.$V)(e.shippingAddress);return(0,s.jsxs)(m.x,{title:(0,n.t)("checkout.cart_plan_details.subtitle"),dataTestId:"cart-plan-details",children:[(0,s.jsx)(u,{header:e.tier===o.Ju.ORG?(0,n.t)("checkout.cart_plan_details.organization_name"):(0,n.t)("checkout.cart_plan_details.team_name"),value:e.displayName,dataTestId:"cart-plan-details-plan-name"}),e.legalName&&(0,s.jsx)(u,{header:(0,n.t)("checkout.cart_plan_details.legal_name"),value:e.legalName,dataTestId:"cart-plan-details-legal-name"}),(0,s.jsx)(u,{header:(0,n.t)("checkout.cart_plan_details.invoice_email"),value:e.userEmail,dataTestId:"cart-plan-details-invoice-email"}),e.billingAddress&&(0,s.jsx)(u,{header:(0,n.t)("checkout.cart_plan_details.billing_address"),value:p(e.billingAddress),dataTestId:"cart-plan-details-billing-address"}),t&&(0,s.jsx)(u,{header:(0,n.t)("checkout.cart_plan_details.shipping_address"),value:p(e.shippingAddress),dataTestId:"cart-plan-details-shipping-address"}),(0,s.jsx)(i.Ph,{onClick:e.navigateToEditDetails,className:l.s.font13.py12.$,trackingProperties:{trackingDescriptor:d.c.EDIT_PLAN_DETAILS},"data-testid":"cart-plan-details-edit-details",trusted:!0,children:(0,n.tx)("checkout.cart_plan_details.edit_details")})]})}function u({header:e,value:t,dataTestId:a}){return(0,s.jsxs)("div",{className:l.s.flex.flexColumn.py16.bb1.bSolid.colorBorder.itemsStart.$,"data-testid":a,children:[(0,s.jsx)("p",{className:l.s.font13.lh24.spacingWide.colorTextSecondary.pb4.$,children:e}),(0,s.jsx)("p",{className:l.s.font13.lh24.colorText.breakWord.$,children:t})]})}function p(e){return[e?.line1,e?.line2,e?.city,e?.region,e?.country,e?.postal_code].filter(function(e){return e}).join(", ")}var h=a(716976),x=a(951002),g=a(989941),y=a(623411),f=a(827695),v=a(130249),S=a(917296),T=a(104034),j=a(430230);let E=(0,s.jsx)(i.Us,{target:"_blank",trusted:!0,href:"/pricing",children:(0,n.tx)("checkout.monthly_price")});function N({title:e,countByBillableProductKey:t,billingInterval:a,currency:i,taxPercent:_,isRequestPending:u,tier:p,onSubmit:x,onSubmitTrackingProperties:E}){let[N,A]=h.useState(!1),w=u||!N,C=(0,s.jsx)(g.S,{label:(0,s.jsx)(y.J,{children:(0,s.jsx)("span",{className:l.s.font13.$,children:p===o.Ju.ORG?(0,s.jsx)(S.W,{}):(0,s.jsx)(T.Um,{})})}),checked:N,onChange:A}),I=(0,s.jsx)("div",{className:l.s.flex.justifyCenter.itemsCenter.$,"data-testid":"cart-review-submit-loading",children:(0,s.jsx)(f.k,{})});return(0,s.jsxs)(m.x,{title:e,dataTestId:"cart-review",children:[(0,s.jsx)("div",{className:l.s.mt16.$,children:(0,s.jsx)(j.O,{countByBillableProductKey:t,billingInterval:a,currency:i,taxPercent:_??0,isCartReviewSummary:!0,tier:p})}),(0,s.jsx)(b,{tier:p,isAnnual:a===c.NW.YEAR}),(0,s.jsx)("div",{className:l.s.my24.$,style:r.sx.add({marginLeft:"-10px"}).$,"data-testid":"cart-review-terms-checkbox",children:C}),(0,s.jsx)(v.lR,{onClick:x,disabled:w,htmlAttributes:{"data-testid":"cart-review-submit-button"},trackingProperties:{trackingDescriptor:d.c.COMPLETE_PURCHASE,...E},children:u?I:(0,n.tx)("checkout.complete_purchase")})]})}function b({tier:e,isAnnual:t}){let a=e===o.Ju.ORG?"https://help.figma.com/hc/articles/360040328293-Manage-billing-on-the-Organization-and-Enterprise-plans":"https://help.figma.com/hc/articles/360041061034-Manage-billing-on-the-Professional-plan";return(0,s.jsx)("div",{className:l.s.mt24.$,"data-testid":"cart-review-upgrade-information-banner",children:(0,s.jsxs)("div",{className:l.s.py8.px16.colorBgSecondary.bRadius5.flex.flexColumn.gap4.$,children:[(0,s.jsx)("p",{className:l.s.textBodyMediumStrong.$,children:(0,n.tx)("checkout.how_do_new_seat_additions_and_upgrades_work")}),(0,s.jsx)("p",{children:function(e,t){switch(e){case o.Ju.ORG:return(0,n.tx)("checkout.cart_review_upgrade_info_org");case o.Ju.PRO:return t?(0,n.tx)("checkout.cart_review_upgrade_info_pro_annual",{monthlyPriceLink:E}):(0,n.tx)("checkout.cart_review_upgrade_info_pro_monthly");default:(0,x.wc)(e)}}(e,t)}),(0,s.jsx)(i.Ph,{className:l.s.textBodyMediumStrong.$,style:r.sx.add({height:"16px"}).$,target:"_blank",href:a,trusted:!0,children:(0,n.tx)("checkout.learn_more")})]})})}var A=a(785034);function w(e){return(0,s.jsxs)("div",{style:r.sx.grid.add({gridTemplateColumns:"400px 1fr",gap:"48px"}).$,"data-testid":"cart-review-step",children:[(0,s.jsx)(_,{...e}),e.hasUpgradeSucceeded?(0,s.jsx)(A.f,{}):(0,s.jsx)(N,{...e})]})}},134798:(e,t,a)=>{a.d(t,{$$:()=>h,Ed:()=>x,MZ:()=>c,WQ:()=>d,f8:()=>n,md:()=>o,n5:()=>p,wh:()=>m});var s=a(385446),r=a.n(s),i=a(649693),l=a(418149);let n=1,d=1;function o(e,t){let a={};for(let s of Object.keys(e)){let r=e[s]||"";t.includes(s)&&(0,i.dA)(r)&&(a[s]=r)}return a}function c(e,t,a){return{minimumPaidSeats:1,defaultAdditionalSeatType:i.ud.EXPERT,selectedTeamIds:[e],selectedUserSeatTypes:t,additionalSeatCounts:a}}function m(e,t,a){return{minimumPaidSeats:1,defaultAdditionalSeatType:i.ud.EXPERT,selectedTeamIds:e,selectedUserSeatTypes:t,additionalSeatCounts:a}}function _(e){return{type:"error",message:e}}function u(e){return{type:"success",value:e}}function p(e,t){var a,s,r;switch(t.type){case"changeSeatType":return a=t.userId,s=t.seatType,a in e.selectedUserSeatTypes?u({...e,selectedUserSeatTypes:{...e.selectedUserSeatTypes,[a]:s}}):_(`Tried to change seat for not-present user ${a}`);case"setAdditionalSeats":return Object.values(r=t.additionalSeatCounts).some(e=>e<0)?_("Blocked attempt to set negative additional seats"):u({...e,additionalSeatCounts:r})}}function h(e,t,a){return{...e,[t]:Math.max(0,(e[t]||0)+a)}}function x(e){let t=new Set(l.N_.toArray()),a=new Set(Object.keys(e));return!(!r()(t,a)||Object.values(e).find(e=>Number.isNaN(e)||e<0))}},473893:(e,t,a)=>{a.d(t,{z:()=>E});var s=a(104076),r=a(716976),i=a(293422);if(443==a.j)var l=a(827695);if(443==a.j)var n=a(368581);if(443==a.j)var d=a(902892);if(443==a.j)var o=a(623411);var c=a(520741),m=a(236631),_=a(192075),u=a(659062),p=a(503801),h=a(900215),x=a(244205),g=a(111297),y=a(506192),f=a(412469),v=a(984887),S=a(784219),T=a(430230);let j=(0,g.tf)(i.Pw);function E({title:e,countByBillableProductKey:t,tier:a,billingInterval:i,currency:c,buttonText:g,isButtonDisabled:E,isLoading:b,onClickNext:A,onSwitchCurrency:w,onSwitchBillingInterval:C,footer:I,canEnforcePaidSeatMinimum:R,trackingProperties:P}){let k=!!t,M=(0,f._Z)(),O=(0,y.Um)(),[D,L]=function(e,t,a,s){let[i,l]=r.useState(!1),n=r.useCallback((e,t)=>!!(s&&e&&!(0,p.A)(e,t)),[s]);r.useEffect(()=>{i&&!n(t,a)&&l(!1)},[t,a,s,i,n]);let d=r.useCallback(s=>{if(!i){if(n(t,a)){l(!0);return}e(s)}},[t,a,i,n,e]);return[i,d]}(A,t,a,R),U=(0,s.jsx)("div",{className:m.s.flex.justifyCenter.itemsCenter.$,"data-testid":"cart-sidebar-loading",children:(0,s.jsx)(l.k,{})});return(0,s.jsxs)(S.x,{title:e,dataTestId:"cart-sidebar",children:[(0,s.jsx)("div",{className:m.s.mt16.$,children:k?(0,s.jsxs)(s.Fragment,{children:[M&&(0,s.jsxs)("div",{className:m.s.flex.justifyBetween.itemsCenter.pb16.bb1.bSolid.colorBorder.$,"data-testid":"cart-sidebar-currency-switcher",children:[(0,s.jsx)("p",{children:(0,_.tx)("checkout.sidebar.currency_label")}),(0,s.jsx)(h.D,{currency:c,dropdownShown:O,supportedCurrencies:(0,f.B9)(),changeCurrency:e=>{w(e)},shortFormDisplay:!0,paddingOverride:0})]}),C&&k&&(0,s.jsx)("div",{className:m.s.my16.$,style:u.sx.add({marginLeft:"-8px"}).$,"data-testid":"cart-sidebar-billing-interval",children:(0,s.jsxs)(n.b,{legend:(0,s.jsx)(d.q,{children:(0,_.tx)("checkout.sidebar.switch_your_billing_interval")}),value:i,onChange:e=>C(e),children:[(0,s.jsx)(n.c,{value:v.NW.YEAR,label:(0,s.jsxs)(o.J,{className:m.s.flex.itemsCenter.gap16.$,children:[(0,_.tx)("checkout.sidebar.annual")," ",(0,s.jsx)("b",{className:m.s.colorTextSuccess.fontSemiBold.colorBgSuccessTertiary.bRadius2.px4.block.$,style:u.sx.add({fontSize:"10px"}).$,children:(0,_.tx)("checkout.sidebar.save_up_to_20")})]})}),(0,s.jsx)(n.c,{value:v.NW.MONTH,label:(0,s.jsx)(o.J,{children:(0,_.tx)("checkout.sidebar.monthly")})})]})}),(0,s.jsx)("div",{className:m.s.pt16.$,children:(0,s.jsx)(T.O,{countByBillableProductKey:t,billingInterval:i,currency:c,isCartReviewSummary:!1,tier:a})})]}):(0,s.jsx)("p",{className:m.s.colorTextSecondary.$,children:(0,_.tx)("checkout.sidebar.cannot_calculate_subtotal")})}),(0,s.jsxs)("div",{style:u.sx.add({marginTop:"80px"}).$,children:[D&&(0,s.jsx)(N,{}),(0,s.jsx)(j,{onClick:L,disabled:E||b,htmlAttributes:{"data-testid":"cart-sidebar-button"},trackingProperties:{trackingDescriptor:x.c.CART_SIDEBAR,...P},children:b?U:g}),I&&(0,s.jsx)("div",{className:m.s.mt16.$,"data-testid":"cart-sidebar-footer",children:I})]})]})}function N(){return(0,s.jsx)("div",{className:m.s.my8.$,"data-testid":"cart-sidebar-paid-seat-minimum-banner",children:(0,s.jsx)(c._,{color:c.S.WARNING,text:(0,s.jsx)("p",{style:u.sx.lh14.add({fontSize:"9px"}).$,children:(0,_.tx)("checkout.sidebar.paid_seat_minimum_banner")})})})}},239904:(e,t,a)=>{a.d(t,{d:()=>P});var s=a(104076),r=a(716976),i=a(903927),l=a(989941),n=a(623411),d=a(219199),o=a(555013),c=a(679359),m=a(192075),_=a(525980),u=a(104034),p=a(459494),h=a(293422),x=a(236631),g=a(147046),y=a(366535),f=a(111297),v=a(229910),S=a(984887);function T(e){return"org"===e.variant?(0,s.jsx)(E,{...e}):(0,s.jsx)(N,{...e})}let j=(0,f.tf)(h.$n);function E(e){let t=e.canSeeBillingAddressExp&&e.billingAddress,a=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,S.$V)(e.shippingAddress);return(0,s.jsxs)("div",{children:[(0,s.jsx)(b,{subtitle:(0,m.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.details":"org_self_serve.review_step.organization_details")}),(0,s.jsx)(A,{header:(0,m.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.company_legal_name":"org_self_serve.review_step.company_name"),value:e.legalName}),(0,s.jsx)(A,{header:(0,m.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.display_name":"org_self_serve.review_step.company_display_name"),value:e.displayName}),!e.canSeeBillingAddressExp&&(0,s.jsx)(A,{header:(0,m.tx)("org_self_serve.review_step.domain"),value:e.domain}),!e.canSeeBillingAddressExp&&e.totalTeams>0&&(0,s.jsx)(A,{header:(0,m.tx)("org_self_serve.review_step.teams"),value:e.totalTeams.toString()}),e.canSeeBillingAddressExp&&(0,s.jsx)(A,{header:(0,m.tx)("org_self_serve.review_step.billing_email"),value:e.userEmail}),e.canSeeBillingAddressExp&&(0,s.jsx)(o.Ph,{onClick:e.navigateToEditOrganizationDetails,trackingEventName:"Edit organization details - checkout flow",trusted:!0,children:(0,m.tx)("org_self_serve.review_step.edit_organization")}),t&&(0,s.jsx)(A,{header:(0,m.tx)("org_self_serve.review_step.billing_address"),value:w(e.billingAddress)}),a&&(0,s.jsx)(A,{header:(0,m.tx)("org_self_serve.review_step.shipping_address"),value:w(e.shippingAddress)}),e.canSeeBillingAddressExp&&(0,s.jsx)(o.Ph,{onClick:e.navigateToEditPaymentDetails,trackingEventName:"Edit payment details - checkout flow",trusted:!0,children:(0,m.tx)("org_self_serve.review_step.edit_payment")})]})}function N(e){let t=(0,i.wA)(),a=(0,i.d4)(e=>e.selectedView),r=e.canSeeBillingAddressExp&&e.billingAddress,l=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,S.$V)(e.shippingAddress);return(0,s.jsxs)("div",{children:[(0,s.jsx)(b,{subtitle:(0,m.tx)("pro_cart.review.details")}),(0,s.jsx)(A,{header:(0,m.tx)("pro_cart.review.team_name"),value:e.displayName}),(0,s.jsx)(A,{header:(0,m.tx)("pro_cart.review.company_name"),value:e.legalName}),r&&(0,s.jsx)(A,{header:(0,m.tx)("pro_cart.review.billing_address"),value:w(e.billingAddress)}),l&&(0,s.jsx)(A,{header:(0,m.tx)("pro_cart.review.shipping_address"),value:w(e.shippingAddress)}),(0,s.jsx)(j,{variant:"link",onClick:e.canSeeBillingAddressExp?()=>{t(g.sf({...a,paymentStep:S.tn.PAYMENT_AND_ADDRESS}))}:()=>{t((0,y.to)({type:v.L,data:{modalTitle:(0,m.t)("pro_cart.review.edit_details_modal_header"),displayName:e.displayName,legalName:e.legalName,updateNameImmediately:!1,canSeeBillingAddressExp:e.canSeeBillingAddressExp}}))},trackingEventName:"Edit team details - checkout flow",children:(0,m.tx)(e.canSeeBillingAddressExp?"pro_cart.review.edit_details":"pro_cart.review.edit_all_details")})]})}function b({subtitle:e}){return(0,s.jsx)("div",{className:x.s.font15.fontMedium.lh24.colorText.$,children:e})}function A({header:e,value:t}){return(0,s.jsxs)("dl",{className:x.s.flex.flexColumn.mt16.$,children:[(0,s.jsx)("dt",{className:x.s.font11.lh16.spacingWide.colorText.$,children:e}),(0,s.jsx)("dd",{className:x.s.font13.lh24.fontMedium.colorText.breakWord.mb16.$,children:t})]})}function w(e){return[e?.line1,e?.line2,e?.city,e?.region,e?.country,e?.postal_code].filter(function(e){return e}).join(", ")}var C=a(463756),I=a(412469),R=a(524254);function P(e){let[t,a]=r.useState(!1),h=new I.vr(e.currency),[x,g]=r.useState(!1),y=(0,i.d4)(e=>e.payment),f=(0,i.d4)(e=>e.payment,(e,t)=>x||e===t),v=(0,i.d4)(t=>e.selectedView.teamId?t.teams[e.selectedView.teamId].name:e.teamName)??"",j=(0,p.Ik)(),E=y.displayName||v,N=y.legalName||v,b=y.billingPeriod===S.tY.STUDENT,A=!!(0,C.p)(e.selectedView,y),w=A||b,P=y.submitPending||!A&&!t,k=(0,_.s)(),{estimatedDesignCost:M,estimatedWhiteboardCost:O}=(0,C.m)({currency:e.currency}),D=y.numWhiteboardEditors,L=M(y.numDesignEditors,y.billingPeriod),U=O(D,y.billingPeriod),B=w?0:y.taxes?.total||L+U,V=new URLSearchParams(d.Ay.location.search),G=V.get("onCompleteRedirectFileKey"),z=V.get("onCompleteRedirectNodeId"),{trackingDescriptor:$,buttonText:F,finePrint:H}=(0,u.V8)({isPromo:A,isEducationTeam:b,claimsEndAtDate:y.promo?.claims_end_at}),q=async t=>{t.preventDefault(),await g(!0),e.onClickConfirm()};return(0,s.jsxs)("div",{className:R.HX,children:[(0,s.jsx)("div",{className:R.PT,children:(0,s.jsx)(T,{displayName:E??"",legalName:N??"",canSeeBillingAddressExp:e.canSeeBillingAddressExp,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,variant:"team"})}),(0,s.jsxs)("div",{className:R.Bo,children:[(0,s.jsx)("div",{className:R.TV,"data-testid":"review-step-upgrade-title",children:(0,m.tx)(b?"edu.checkout_team_name":j?y.billingPeriod===S.tY.ANNUAL?"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_yearly":"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_monthly":"pro_cart.review.upgrade_team_name_to_a_professional_team",{teamName:v})}),(!k||!w)&&(0,s.jsx)(u.$c,{payment:f,currency:e.currency,isPromo:A,isEducationTeam:b,hasCartStickerShock:j}),(0,s.jsx)("div",{className:R.pV}),(0,s.jsx)(o.Kz,{multiple:2}),f.taxes&&!!e.billingAddress&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Wy,{mainText:(0,m.tx)("pro_cart.info.subtotal"),priceText:h.formatMoney(A?0:f.taxes.sub_total||0,{showCents:!0}),"data-testid":"subtotal-summary"}),(0,s.jsx)(o.Kz,{multiple:1.5}),(0,s.jsx)(u.Wy,{mainText:(0,m.tx)("pro_cart.review.tax"),priceText:h.formatMoney(f.taxes?.tax_total||0,{showCents:!0}),subText:(0,m.tx)("pro_cart.review.tax_percent",{taxPercent:f.taxes.lines[0]?.tax_percent||0}),"data-testid":"tax-summary"}),(0,s.jsx)(o.Kz,{multiple:1.5})]}),(0,s.jsx)(u.Wy,{"data-testid":"confirm-total-summary",mainText:b?(0,m.tx)("pro_cart.review.total"):(0,m.tx)("pro_cart.review.total_due_today"),priceText:h.formatMoney(B,{showCents:!0,showFullFormat:(0,I._Z)()}),subText:A?(0,m.tx)("pro_cart.review.you_will_not_be_charged_during_the_free_period",{days:f.promo.promo_value}):void 0}),(0,s.jsx)(o.Kz,{multiple:2}),(0,s.jsxs)("div",{children:[H,!A&&(0,s.jsx)("div",{className:R.Gn,children:(0,s.jsx)(l.S,{checked:t,onChange:a,label:(0,s.jsx)(n.J,{children:(0,s.jsx)("span",{children:(0,s.jsx)(u.Um,{})})})})})]}),(0,s.jsx)(o.Kz,{multiple:2.5}),(0,s.jsx)(o.Kz,{multiple:2.5}),(0,s.jsx)(o.vd,{className:R.fK,onClick:q,trackingProperties:{teamId:e.selectedView.teamId,inPublishDraftExp:!!(z&&G),trackingDescriptor:$},disabled:P,dataTestId:"confirm-purchase-button",children:y.submitPending?(0,s.jsx)(c.kt,{className:R.S}):F})]})]})}},935835:(e,t,a)=>{a.d(t,{I:()=>m,y:()=>_});var s=a(104076),r=a(555013),i=a(388816),l=a(652539),n=a(192075),d=a(244205),o=a(524254);if(443==a.j)var c=a(100203);var m=(e=>(e.STARTER="starter",e.PRO="pro",e.ORG="org",e))(m||{});function _({type:e,teamName:t,setTeamName:a,onNext:m,upgradeExistingTeam:_,promo:u}){let p={starter:{title:(0,n.tx)("all_carts.create_team.create_a_new_team"),subtitle:(0,n.tx)("all_carts.create_team.after_creating_a_team"),placeholder:(0,n.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:(0,n.tx)("all_carts.create_team.create_team"),trackingDescriptor:d.c.SEND_INVITES},pro:{title:(0,n.tx)("pro_cart.create_team.create_a_professional_team"),subtitle:(0,n.tx)("pro_cart.create_team.itll_have_unlimited_files_and_collaborative_features"),placeholder:(0,n.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:u?(0,n.tx)("pro_cart.sidebar.next_review"):(0,n.tx)("pro_cart.create_team.next_set_editors.seat_rename"),trackingDescriptor:u?d.c.REVIEW:d.c.SET_EDITORS},org:{title:(0,n.tx)("org_self_serve.create_team_step.create_an_org_team"),subtitle:(0,n.tx)("org_self_serve.create_team_step.itll_have_unlimited_files_and_advanced_security"),placeholder:(0,n.t)("org_self_serve.create_team_step.enter_a_name_for_your_team"),next:(0,n.tx)("org_self_serve.create_team_step.next_select_team"),trackingDescriptor:d.c.SELECT_TEAM}}[e];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:o.Fb,children:p.title}),(0,s.jsx)(r.Kz,{multiple:.5}),(0,s.jsx)("div",{className:o.b0,children:p.subtitle}),(0,s.jsxs)("div",{className:o.F0,children:[(0,s.jsx)(l.B,{svg:c.A,className:o.Pr}),(0,s.jsx)(i.L,{className:o.Zy,onChange:e=>a(e.target.value),value:t,placeholder:p.placeholder})]}),(0,s.jsx)(r.vd,{className:o.eA,onClick:m,trackingProperties:{trackingDescriptor:p.trackingDescriptor},disabled:!t.trim(),children:p.next}),!!_&&(0,s.jsx)(r.Us,{className:o.x,onClick:_,trusted:!0,trackingProperties:{trackingDescriptor:d.c.UPGRADE_EXISTING_TEAM},children:(0,n.tx)("pro_cart.create_team.upgrade_an_existing_team_instead")})]})}},785034:(e,t,a)=>{a.d(t,{f:()=>d});var s=a(104076);if(443==a.j)var r=a(827695);var i=a(236631),l=a(659062),n=a(784219);function d(){return(0,s.jsx)(n.x,{title:null,dataTestId:"loading-cart-card",children:(0,s.jsx)("div",{className:i.s.flex.flexColumn.itemsCenter.justifyCenter.wFull.$,style:l.sx.add({height:"208px"}).$,children:(0,s.jsx)(r.k,{})})})}},430230:(e,t,a)=>{a.d(t,{O:()=>A});var s=a(104076);if(443==a.j)var r=a(951002);if(443==a.j)var i=a(382629);var l=a(638004);if(443==a.j)var n=a(381671);var d=a(833805),o=a(550209),c=a(236631),m=a(192075),_=a(659062),u=a(171660),p=a(373533),h=a(236753),x=a(788499),g=a(502907),y=a(111297),f=a(205729),v=a(649693),S=a(418149),T=a(781611),j=a(412469),E=a(608175),N=a(984887),b=a(563554);function A({countByBillableProductKey:e,billingInterval:t,currency:a,isCartReviewSummary:r,taxPercent:i,tier:l}){let o=(0,f.jv)({billableProductKeys:S.N_,baseQuery:{currency:a,tier:l,renewalTerm:t,unit:t}}),g=(0,f.jv)({billableProductKeys:S.N_,baseQuery:{currency:a,tier:l,renewalTerm:t,unit:N.NW.MONTH}}),[v,j]=(0,d.mI)(o,g);if(!v.data||!j.data)throw Error("Price data is null");let E=(0,h.s$)(v.data),A=(0,h.s$)(j.data),R=i||0,P=e=>(0,p.up)(e,a,{showCents:r}),k=(0,p.Vh)(e,E),M=(0,p.kV)(e,E,R),O=(0,p.N9)(e,E,R),D=P(k),L=P(M),U=P(O),B=(0,s.jsx)(u.E,{fontWeight:"medium",color:"tertiary",fontSize:11,children:(0,m.tx)("checkout.review_in_tax_disclaimer")}),V=t===N.NW.YEAR;return(0,s.jsx)(y.fu,{name:b.e0.CART_REVIEW_PURCHASE_SUMMARY,properties:{tier:l,billingInterval:t,countBySeatType:(0,x.gS)(e),currency:a,taxPercent:R,subtotal:k,taxTotal:M,total:O},enabled:r,children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:_.sx.add({marginBottom:"24px"}).$,children:Object.keys(e).sort(T.AG).map(t=>(0,s.jsx)(w,{billableProductKey:t,count:e[t]||0,currency:a,isAnnual:V,isCartReviewSummary:r,paymentPrices:E,lineItemPrices:A},t))}),(0,s.jsxs)("div",{className:c.s.flex.justifyBetween.py4.$,"data-testid":"purchase-summary-subtotal",children:[(0,s.jsx)("h3",{className:c.s.fontMedium.if(r,c.s.font13.lh24).$,children:(0,m.tx)("checkout.subtotal")}),(0,s.jsx)("p",{className:c.s.if(r,c.s.font13.lh24).$,children:I({price:D,isCartReviewSummary:r,isAnnual:V})})]}),!r&&(0,s.jsx)(u.E,{fontWeight:"regular",color:"tertiary",fontSize:11,children:(0,m.tx)("checkout.tax_disclaimer_revised",{checkoutStep:B})}),r&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:c.s.flex.justifyBetween.py4.itemsCenter.$,"data-testid":"purchase-summary-taxes",children:[(0,s.jsxs)("div",{className:c.s.flexColumn.$,children:[(0,s.jsx)("h3",{className:c.s.font13.lh24.$,children:(0,m.tx)("checkout.purchase_summary.tax")}),(0,s.jsx)("h3",{className:c.s.colorTextSecondary.font13.lh24.$,children:(0,m.tx)("pro_cart.review.tax_percent",{taxPercent:R})})]}),(0,s.jsx)("p",{className:c.s.font13.lh24.$,children:I({price:L,isAnnual:V,isCartReviewSummary:r})})]}),(0,s.jsxs)("div",{className:c.s.flex.justifyBetween.py4.$,"data-testid":"purchase-summary-total-due",children:[(0,s.jsx)("h3",{className:c.s.fontMedium.font13.lh24.$,children:(0,m.tx)("checkout.purchase_summary.total_due_today")}),(0,s.jsx)("p",{className:c.s.font13.lh24.$,children:I({price:U,isAnnual:V,isCartReviewSummary:r})})]}),(0,s.jsx)("div",{"data-testid":"purchase-summary-plan-renewal",children:(0,s.jsxs)("p",{className:c.s.font13.lh24.flex.$,children:[(0,s.jsx)(n.w,{className:c.s.minW24.$}),(0,s.jsx)(C,{tier:l,isAnnual:V})]})})]})]})})}function w({billableProductKey:e,count:t,currency:a,isAnnual:r,isCartReviewSummary:n,paymentPrices:d,lineItemPrices:_}){if(!(0,v.dA)(e))return(0,o.$D)(l.e.MONETIZATION_UPGRADES,Error(`Received invalid billable product key ${e}`)),null;let u=d[e];if((0,i.uy)(u))return(0,o.$D)(l.e.BILLING_EXPERIENCE,Error(`Received null payment price on purchase summaryfor ${e}`)),null;let p=_[e];if((0,i.uy)(p))return(0,o.$D)(l.e.BILLING_EXPERIENCE,Error(`Received null line item price on purchase summary for ${e}`)),null;let h=new j.vr(a),x=h.formatMoney(u*t,{showCents:n}),y=c.s.font13.lh24,f=(0,m.t)("checkout.price_per_month",{price:h.formatMoney(p)});return(0,s.jsxs)("div",{"data-testid":`purchase-summary-${e}-row`,className:c.s.flex.justifyBetween.py8.bb1.bSolid.colorBorder.if(n,c.s.itemsCenter,c.s.itemsStart).$,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:c.s.if(n,y).$,children:(0,m.tx)("checkout.purchase_summary.cart_line_item",{quantity:t,productLabel:(0,g.tI)(e)})}),(0,s.jsx)("p",{className:c.s.colorTextSecondary.if(n,y).$,children:(0,m.tx)(r?"checkout.product_cost_breakdown_annually":"checkout.product_cost_breakdown_monthly",{price:f,quantity:t})})]}),(0,s.jsx)("p",{className:c.s.if(n,y).$,children:I({price:x,isCartReviewSummary:n,isAnnual:r})})]})}function C({tier:e,isAnnual:t}){switch(e){case E.Ju.ORG:return(0,m.tx)("checkout.purchase_summary.plan_renewal_org");case E.Ju.PRO:return t?(0,m.tx)("checkout.purchase_summary.plan_renewal_pro_annual"):(0,m.tx)("checkout.purchase_summary.plan_renewal_pro_monthly");default:(0,r.wc)(e)}}function I({price:e,isAnnual:t,isCartReviewSummary:a}){return a?e:t?(0,m.t)("checkout.price_per_year",{price:e}):(0,m.t)("checkout.price_per_month",{price:e})}},948058:(e,t,a)=>{a.d(t,{T:()=>B});var s=a(104076),r=a(716976),i=a(999083),l=a(420680),n=a(282856),d=a(804937),o=a(883765),c=a(72138),m=a(236631),_=a(192075),u=a(963566),p=a(236753),h=a(788499),x=a(542663),g=a(459494),y=a(111297),f=a(608175),v=a(563554),S=a(755462),T=a(903927),j=a(382629),E=a(684742),N=a(293422),b=a(602755),A=a(708669);a(120440);var w=a(871898),C=a(366535),I=a(592726),R=a(826160),P=a(753151);let k="select_seats_table--sidePadding--rdwOD",M="select_seats_table--userColumn--0bg1B",O="select_seats_table--seatColumn--dUkDj",D="select_seats_table--teamColumn--kxWk-",L="select_seats_table--descriptionColumn--nvbAl";function U({user:e,seatTypes:t,selectedSeatType:a,changeSeatType:r,tier:i,teamId:l}){let n=(0,T.wA)(),d=(0,I.TA)(),o=e.id===d,c=(0,g.Dj)(),u=i===f.Ju.PRO&&c(),p=()=>{n((0,C.to)({type:P.Y,data:{user:e,seatTypes:t,selectedSeatType:a,setSelectedSeatType:r,tier:i,teamId:l}}))};if((0,j.uy)(t[a]))return null;let h=(0,s.jsxs)(E.E,{className:"xh8yej3 x1whlmpv x133fa97 x19y5rnk x1bamp8i xkezfkh","aria-label":(0,_.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:p,children:[(0,s.jsx)("span",{className:"x1db2dqx",children:(0,s.jsx)(w.B,{type:a,size:"24"})}),(0,s.jsx)("span",{children:t[a].displayName}),(0,s.jsx)(b.O,{className:"x8x9d4c"})]});return(0,s.jsxs)("tr",{"data-testid":`select_seat_row--${e.id}`,children:[(0,s.jsx)("td",{"aria-hidden":!0,className:k}),(0,s.jsx)("td",{className:M,"data-testid":"select_seats_table_user_cell",children:(0,s.jsx)(R.az,{entity:e,includeUserEmailAddress:!0,size:24,showIsMe:o})}),(0,s.jsx)("td",{className:O,children:u?h:(0,s.jsx)(N.IK,{variant:"ghost","aria-label":(0,_.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:p,iconPrefix:(0,s.jsx)(w.B,{type:a,size:"24"}),children:(0,s.jsxs)("span",{className:m.s.flex.justifyBetween.ml2.$,children:[t[a].displayName,(0,s.jsx)(A.k,{})]})})}),i===f.Ju.ORG&&(0,s.jsx)("td",{className:D,children:e.teams}),(0,s.jsx)("td",{className:L,children:t[a].description}),(0,s.jsx)("td",{"aria-hidden":!0,className:k})]})}function B({users:e,seatTypes:t,selectSeatsState:a,changeUserSeatType:T,setAdditionalSeats:j,tier:E}){let N=(0,r.useRef)(null),b=(0,x.u)(),A=(0,u.f)({tableContainerRef:N}),[w,C]=r.useState(a),[I,R]=r.useState(!1),P=r.useMemo(()=>{let t=[...e];return(0,i.v7)(t,e=>e.handle,{isDescending:I}),t},[e,I]),B=(0,p.UL)((0,p.iB)(a.selectedUserSeatTypes)),V=(0,p.UL)(a.additionalSeatCounts),G=(0,g.Dj)(),z=E===f.Ju.PRO&&G();return(0,s.jsx)(y.fu,{name:v.e0.SELECT_SEATS_TABLE,properties:{selectedUserSeatTypes:(0,h.Tj)(w.selectedUserSeatTypes),countBySeatType:(0,h.gS)((0,p.O$)(w.selectedUserSeatTypes,w.additionalSeatCounts)),selectedTeamIds:(0,h.gu)(w.selectedTeamIds),userIds:(0,h.gu)(e.map(e=>e.id))},trackingOptions:b,children:(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"select_seats_table--tableContainer--ft8tm",ref:N,"data-testid":"select-seats-table",children:[(0,s.jsx)(c.P,{maxHeight:A,className:"select_seats_table--scrollContainer--HMiGx",hideScrollbar:!0,horizontalScrollingDisabled:!0,children:(0,s.jsxs)("table",{className:"select_seats_table--table--hBe3G",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{"aria-hidden":!0,className:k}),(0,s.jsxs)("th",{className:M,children:[(0,_.tx)("checkout.select_seats_table.user_column")," ",(0,s.jsx)("div",{className:m.s.inlineBlock.$,"data-testid":"select-seats-table-sort-users-button",children:(0,s.jsx)(l.K,{onClick:()=>R(e=>!e),"aria-label":(0,_.t)("checkout.select_seats_table.sort"),children:I?(0,s.jsx)(n.d,{"data-testid":"select-seats-table-icon-arrow-up"}):(0,s.jsx)(d.Q,{"data-testid":"select-seats-table-icon-arrow-down"})})})]}),(0,s.jsx)("th",{className:O,children:z?(0,_.tx)("checkout.select_seats_table.seat_column_exp"):(0,_.tx)("checkout.select_seats_table.seat_column")}),E===f.Ju.ORG&&(0,s.jsx)("th",{className:D,children:(0,_.tx)("checkout.select_seats_table.team_column")}),(0,s.jsx)("th",{className:L,children:(0,_.tx)("checkout.select_seats_table.description_column")}),(0,s.jsx)("th",{"aria-hidden":!0,className:k})]})}),(0,s.jsx)("tbody",{children:P.map(e=>(0,s.jsx)(U,{user:e,seatTypes:t,selectedSeatType:a.selectedUserSeatTypes[e.id],changeSeatType:t=>{o.az.trackDefinedEvent("monetization_upgrades.user_seat_selection_changed_in_checkout",{targetUserId:e.id,previousSeatType:a.selectedUserSeatTypes[e.id],newSeatType:t,tier:E,teamId:E===f.Ju.PRO?w.selectedTeamIds[0]:void 0}),T(e.id,t)},tier:E,teamId:E===f.Ju.PRO?w.selectedTeamIds[0]:void 0},e.id))})]})}),(0,s.jsxs)("div",{className:m.s.py12.px24.bt1.bSolid.colorBorder.flex.itemsCenter.justifyBetween.$,children:[(0,s.jsx)(S.m,{tier:E,seatTypes:t,additionalSeatCounts:a.additionalSeatCounts,setAdditionalSeats:j}),(0,s.jsx)("p",{children:(0,_.tx)("checkout.select_seats_table.team_members_count",{assignedSeatsText:(0,_.tx)("checkout.select_seats_table.assigned_seats",{count:B}),unassignedSeatsText:(0,_.tx)("checkout.select_seats_table.unassigned_seats",{count:V})})})]})]})})})}},753151:(e,t,a)=>{a.d(t,{Y:()=>h});var s=a(104076),r=a(929302),i=a(91478),l=a(268389),n=a(236631),d=a(192075),o=a(911990),c=a(772180),m=a(637416),_=a(542663),u=a(111297),p=a(649693);let h=(0,a(959834).Ju)(function(e){let t=(0,_.u)(),{user:a,seatTypes:h,selectedSeatType:x,setSelectedSeatType:g,open:y,onClose:f,tier:v,teamId:S}=e,T=r.hS({open:y,onClose:f});return(0,s.jsx)(u.fu,{name:"Select User Seat Type Modal",properties:{teamId:S},trackingOptions:t,children:(0,s.jsx)(i.bL,{manager:T,width:480,htmlAttributes:{"data-testid":"select-user-seat-type--modal"},children:(0,s.jsx)(l.vo,{children:(0,s.jsx)(l.nB,{children:(0,s.jsxs)(o.Y,{direction:"vertical",spacing:0,padding:{horizontal:8,vertical:16},children:[(0,s.jsx)("div",{className:n.s.mb24.$,children:(0,s.jsx)(m.j,{user:a,text:(0,d.t)("modify_plan_user_seat_modal.choose_seat",{name:a.handle})})}),(0,s.jsx)(c.m,{currentSeatType:x,setNextSeatType:e=>{g(e),f()},availableSeatCounts:null,pricing:Object.fromEntries(Object.entries(h).filter(([e,t])=>e!==p.Gu.VIEW&&!!t).map(([e,t])=>[e,t.displayPrice])),learnMoreLinkHref:"/pricing",displayPricing:!0,canSetCurrentSeatType:!0,tier:v})]})})})})})},"SelectUserSeatTypeModal")},454307:(e,t,a)=>{a.d(t,{kR:()=>E,vU:()=>N});var s=a(104076),r=a(903927),i=a(951002),l=a(883765),n=a(755444),d=a(186180),o=a(192075);if(443==a.j)var c=a(111679);var m=a(147046),_=a(244205),u=a(111297),p=a(134391),h=a(592726),x=a(71004),g=a(608175),y=a(984887),f=a(377026),v=a(524254);function S(e){return(0,s.jsx)(u.$z,{type:"button",className:v.Nd,trackingProperties:{trackingDescriptor:_.c.CANCEL},onClick:e.onClick,dataTestId:"upgrade-breadcrumb-menu-cancel",children:(0,o.tx)("pro_cart.breadcrumbs.cancel")})}var T=(e=>(e[e.PLAN_COMPARISON=0]="PLAN_COMPARISON",e[e.CREATE_TEAM=1]="CREATE_TEAM",e[e.ADD_COLLABORATORS=2]="ADD_COLLABORATORS",e[e.ADJUST_EDITORS=3]="ADJUST_EDITORS",e[e.SET_EDITORS=4]="SET_EDITORS",e[e.PAYMENT_AND_ADDRESS=5]="PAYMENT_AND_ADDRESS",e[e.CONFIRM_PAY=6]="CONFIRM_PAY",e))(T||{});function j(e,t,a,s){let r=t===y.tY.STUDENT,l=[];switch(e){case f.SC.CREATE_AND_UPGRADE:l.push(0),l.push(1),r?l.push(4):a||(l.push(4),l.push(5)),l.push(6);break;case f.SC.UPGRADE_EXISTING_TEAM:s===f.Sc.TEAM?(l.push(3),r||l.push(5)):r?(l.push(0),l.push(3)):a?l.push(0):(l.push(0),l.push(4),l.push(5)),l.push(6);break;case f.SC.CREATE:l.push(1),l.push(2),l.push(0),s===f.Sc.TEAM&&(r?l.push(4):a||(l.push(4),l.push(5)),l.push(6));break;default:(0,i.xb)(e)}return l.map(e=>(function(e){switch(e){case 0:return{step:y.tn.PLAN_COMPARISON,text:(0,o.t)("pro_cart.breadcrumbs.choose_plan")};case 1:return{step:y.tn.CREATE_TEAM,text:(0,o.t)("pro_cart.breadcrumbs.create_team")};case 2:return{step:y.tn.ADD_COLLABORATORS,text:(0,o.t)("pro_cart.breadcrumbs.add_team_members")};case 3:return{step:y.tn.CHOOSE_PLAN,text:(0,o.t)("pro_cart.breadcrumbs.adjust_editors.seat_rename")};case 4:return{step:y.tn.CHOOSE_PLAN,text:(0,o.t)("pro_cart.breadcrumbs.set_editors.seat_rename")};case 5:return{step:y.tn.PAYMENT_AND_ADDRESS,text:(0,o.t)("pro_cart.breadcrumbs.payment_information")};case 6:return{step:y.tn.CONFIRM_PAY,text:(0,o.t)("pro_cart.breadcrumbs.review")}}})(e))}function E(e,t,a,s,r,i){let l=j(t,a,s,r).map(e=>e.step),n=l.indexOf(e);return i=i||l[0],-1===n?i:l[n+1]}function N(e){let{selectedView:t}=e,{teamId:a,paymentStep:i,teamFlowType:o}=t,_=(0,r.wA)(),u=(0,r.d4)(e=>e.payment.billingPeriod),T=h.iZ()?.id,E=j(o,u,(0,r.d4)(e=>e.payment.promo),e.selectedView.planType||f.Sc.UNDETERMINED),N=E.findIndex(e=>e.step===i);return(0,s.jsxs)("div",{className:v.N6,"data-testid":"cart-breadcrumb-menu-pro",children:[(0,s.jsx)(S,{onClick:()=>{((0,n.sj)(),e.isCampfireCart?(0,x.OI)(_):(0,x.Mt)(_),(0,f.h5)(o)&&null===a&&(0,p.Al)(T),T)?a&&(!t.previousView||"fullscreen"!==t.previousView.view)?_(c._l({workspace:{userId:T,teamId:a,orgId:null},view:{view:"recentsAndSharing"}})):_(m.sf(t.previousView||{view:"recentsAndSharing"})):_(m.sf(t.previousView||(a?{view:"team",teamId:a}:{view:"recentsAndSharing"}))),t.callbackOnClose?.()}}),E.map((r,n)=>(0,s.jsx)(d.On,{selected:i===r.step,number:n+1,text:r.text,canClick:n<N,lightText:!0,onClick:()=>{l.az.trackDefinedEvent("monetization_upgrades.checkout_breadcrumb_navigation",{fromStep:i,toStep:r.step,tier:g.Ju.PRO,isCampfireCart:!!e.isCampfireCart,teamId:a??void 0}),_(m.sf({...t,paymentStep:r.step,billingPeriod:u===y.tY.UNSPECIFIED?void 0:u,planType:(0,f.ck)(o,r.step)?f.Sc.UNDETERMINED:t.planType,teamFlowType:(0,f.jX)(o)&&r.step===y.tn.PLAN_COMPARISON?f.SC.CREATE_AND_UPGRADE:t.teamFlowType}))}},r.text))]})}},402858:(e,t,a)=>{a.r(t),a.d(t,{TeamUpgradePageBillingRemodel:()=>eX});var s=a(104076),r=a(716976),i=a(903927),l=a(951002),n=a(638004),d=a(883765),o=a(310725),c=a(219199),m=a(653899),_=a(328341),u=a(755444),p=a(833805),h=a(572761),x=a(889438),g=a(1188),y=a(520741),f=a(236631),v=a(256384),S=a(259161),T=a(192075),j=a(659062),E=a(373533),N=a(236753),b=a(788499),A=a(906356),w=a(312156),C=a(183058),I=a(473893),R=a(935835),P=a(785034),k=a(454307),M=a(555013),O=a(524254);function D({disableInviteButton:e,collaborators:t,setCollaborators:a,willSendInvites:r,skipInviteStep:i}){let l=(e,s)=>{s>=t.length||a(t.map((t,a)=>a===s?e:t))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:O.Fb,children:(0,T.tx)("pro_cart.add_collaborators.add_collaborators_to_your_team")}),(0,s.jsx)(M.Kz,{multiple:.5}),(0,s.jsx)("h2",{className:O.b0,children:(0,T.tx)("pro_cart.add_collaborators.well_add_them_to_your_team")}),(0,s.jsx)(M.Kz,{multiple:4}),(0,s.jsxs)("div",{style:j.sx.flex.flexColumn.add({maxWidth:"400px"}).mlAuto.mrAuto.gap12.$,children:[t.map((e,t)=>(0,s.jsx)(M.il,{value:e,onChange:e=>l(e.target.value,t),placeholder:(0,T.t)("pro_cart.add_collaborators.email")},`collaborator-email-input-${t}`)),(0,s.jsx)(M.Us,{onClick:()=>{a([...t,""])},trusted:!0,style:j.sx.alignLeft.font14.fontMedium.$,children:(0,T.tx)("pro_cart.add_collaborators.add_another")})]}),(0,s.jsxs)("div",{style:j.sx.flex.flexColumn.itemsCenter.mlAuto.mrAuto.mt24.gap24.fontMedium.font14.$,children:[(0,s.jsx)(M.vd,{disabled:!!e,style:j.sx.font14.add({height:"44px",width:"110px"}).$,onClick:r,children:(0,T.tx)("pro_cart.add_collaborators.sent_invites")}),(0,s.jsx)(M.Ph,{trusted:!0,onClick:i,style:j.sx.colorTextSecondary.alignCenter.$,children:(0,T.tx)("pro_cart.add_collaborators.skip_for_now")})]})]})}var L=a(307279),U=a(671828),B=a(329065),V=a(944350),G=a(613997);function z({chooseStarterPlan:e,chooseEduPlan:t,chooseProPlan:a,chooseOrgPlan:r,currency:i,updateCurrency:l,upgradeExistingTeam:n}){let d=(0,L.U)(i);return(0,s.jsxs)("div",{style:j.sx.grid.gap16.p36.pb24.selectNone.mxAuto.add({width:"945px",maxWidth:"1049px"}).$,children:[(0,s.jsx)(U.f,{currency:i,chooseStarterPlan:e,chooseEduPlan:t,chooseProPlan:a,chooseOrgPlan:r,updateCurrency:l,withUpgradeExistingTeamOption:n,prices:d,teamPlan:V.Ag.STARTER}),(0,s.jsx)(G.hK,{height:8}),(0,s.jsx)(B.L,{})]})}var $=a(542663),F=a(111679),H=a(729226),q=a(147046),W=a(366535),X=a(483200),Y=a(432135),J=a(443192),K=a(459494),Z=a(244205),Q=a(111297),ee=a(205729),et=a(400136),ea=a(649693),es=a(418149),er=a(134391),ei=a(554886),el=a(537307),en=a(937505),ed=a(592726),eo=a(77975),ec=a(710211),em=a(412469),e_=a(853039),eu=a(71004),ep=a(562311),eh=a(904017),ex=a(469229),eg=a(295253),ey=a(608175),ef=a(984887),ev=a(377026),eS=a(563554),eT=a(181793),ej=a(791400),eE=a(623411),eN=a(989941),eb=a(652539),eA=a(784219),ew=a(249586),eC=a(943325),eI=a(461749),eR=a(689190),eP=a(364616);let ek=(0,Q.h3)(e=>{let{dataTestId:t,children:a,...r}=e;return(0,s.jsx)("select",{...r,"data-testid":t,children:a})});function eM(e){let t=e.paymentMethods.filter(e=>e.type===eC.lB.CARD||e.type===eC.lB.SEPA);return(0,s.jsx)(s.Fragment,{children:t.map(e=>{let t=function(e){if(e.type===eC.lB.CARD)return function(e){let t=e.display_brand in eU?eU[e.display_brand]:(0,T.t)("checkout.other");return`${t} \u2022\u2022\u2022\u2022 ${e.last4}`}(e.object);if(e.type===eC.lB.SEPA)return function(e){let t=e.country?e.country.toUpperCase():(0,T.t)("checkout.other");return`SEPA ${t} \u2022\u2022\u2022\u2022 ${e.last4}`}(e.object);throw Error(`Unknown payment method type: ${e.type}`)}(e),a=(0,N.DS)(e.address);return(0,s.jsxs)("option",{className:f.s.flex.justifyBetween.gap2.$,value:e.id,children:[(0,s.jsx)("span",{className:f.s.font13.$,children:t}),a&&(0,s.jsx)("span",{className:f.s.colorTextSecondary.font13.$,children:` - ${a}`})]},e.id)})})}function eO(e){return(0,s.jsx)("div",{className:eR.ri,children:(0,s.jsxs)("div",{className:f.s.flex.relative.wFull.itemsCenter.$,children:[(0,s.jsx)(ek,{name:"selected_saved_payment_method",trackingFieldName:"SelectExistingPaymentMethod",trackingPopulationLevel:e.selectedPaymentMethod?.id&&e.enableSavedPaymentMethods?ew._R.POPULATED_COMPLETE:ew._R.NOT_POPULATED,onChange:t=>{let a=t.target.value,s=e.paymentMethods.find(e=>e.id===a);s&&e.setSelectedPaymentMethod(s)},value:e.selectedPaymentMethod?.id,children:(0,s.jsx)(eM,{paymentMethods:e.paymentMethods})}),(0,s.jsx)(eb.B,{style:j.sx.add({position:"absolute",right:"16px",pointerEvents:"none",color:"var(--color-icon)",fill:"var(--color-icon)"}).$,svg:eP.A})]})})}function eD(e){let{enableSavedPaymentMethods:t,setEnableSavedPaymentMethods:a}=e,r=(0,s.jsx)(eE.J,{children:(0,s.jsx)("span",{className:f.s.font13.$,children:(0,T.t)("checkout.use_saved_payment_method")})});return(0,s.jsx)("div",{className:f.s.mb6.if(!t,f.s.mb0).$,children:(0,s.jsx)(eN.S,{label:r,onChange:e=>{a(e)},checked:t})})}function eL(e){let{paymentMethods:t,setSelectedPaymentMethod:a,setEnableSavedPaymentMethods:r,enableSavedPaymentMethods:l,selectedPaymentMethod:n}=e,{error:d,errorCode:o}=(0,i.d4)(e=>e.payment),c=!!d&&null===o;return(0,s.jsxs)(eA.x,{title:(0,T.t)("checkout.payment_details"),children:[t.length>0&&(0,s.jsxs)("div",{className:f.s.alignLeft.$,children:[(0,s.jsx)(eD,{enableSavedPaymentMethods:l,setEnableSavedPaymentMethods:r}),l&&(0,s.jsx)(eO,{selectedPaymentMethod:n,enableSavedPaymentMethods:l,setSelectedPaymentMethod:a,paymentMethods:t})]}),(0,s.jsx)("div",{className:f.s.alignLeft.$,children:(0,s.jsx)(eI.S,{billingAddress:e.billingAddress,canSeeBillingAddressExp:e.canSeeBillingAddressExp,createPaymentElement:e.createPaymentElement,error:e.error,hide:e.enableSavedPaymentMethods,isCampfireCart:e.isCampfireCart,legalCompanyName:e.legalCompanyName,nameOnPaymentMethod:e.nameOnPaymentMethod,onRegionalVatGstIdChange:e.onRegionalVatGstIdChange,onVatGstIdChange:e.onVatGstIdChange,paymentError:c?d:void 0,paymentFlow:e.paymentFlow,paymentMethodType:e.paymentMethodType,regionalVatGstId:e.regionalVatGstId,shippingAddress:e.shippingAddress,unmountPaymentElement:e.unmountPaymentElement,updateBillingAddress:e.updateBillingAddress,updateLegalCompanyName:e.updateLegalCompanyName,updateNameOnPaymentMethod:e.updateNameOnPaymentMethod,updateShippingAddress:e.updateShippingAddress,vatGstId:e.vatGstId})})]})}let eU={american_express:"American Express",cartes_bancaires:"Cartes Bancaires",diners_club:"Diners Club",discover:"Discover",eftpos_australia:"Eftpos Australia",interac:"Interac",jcb:"JCB",mastercard:"Mastercard",union_pay:"Union Pay",visa:"Visa"};var eB=a(382629),eV=a(876299),eG=a(134798),ez=a(948058);function e$(e){let t={...e.additionalSeatCounts};return Object.values(e.selectedUserSeatTypes).forEach(e=>{(0,ea.a_)(e)&&e in t&&t[e]++}),{countBySeatType:t,selectedUserSeatTypes:e.selectedUserSeatTypes}}let eF=(e,t,a,s)=>{let[i,l]=(0,r.useState)(()=>{let r=function(e,t,a){let s;let{countBySeatType:r,selectedUserSeatTypes:i}=e||{countBySeatType:{},selectedUserSeatTypes:{}},l=t.map(e=>e.user.id),n=(0,eG.md)(i,l);return t.forEach(e=>{let t=e.user.id;n[t]||(n[t]=e.recommended_seat_type?.key??ea.Gu.VIEW)}),s=(0,eG.Ed)(r)?{...r}:{developer:0,collaborator:0,expert:0},Object.values(n).forEach(e=>{"view"!==e&&(0,eB.Vq)(s[e])&&s[e]>0&&s[e]--}),(0,eG.MZ)(a,n,s)}(a,t,e);return s(e$(r)),r}),n=(0,r.useCallback)(e=>{try{l(t=>{let a=function(e,t){let a=(0,eG.n5)(e,t);switch(a.type){case"success":return a.value;case"validation":throw Error("failed validation");case"error":throw Error("sent error")}}(t,e);return s(e$(a)),a})}catch(e){}},[s]);return{changeUserSeatType:(0,r.useCallback)((e,t)=>{n({type:"changeSeatType",userId:e,seatType:t})},[n]),setAdditionalSeats:e=>n({type:"setAdditionalSeats",additionalSeatCounts:e}),selectSeatsState:i}};function eH({teamId:e,currency:t,renewalTerm:a,eligibleTeamUsers:r,initCampfireSeats:i,onUpdateCampfireSeats:l}){let n=(0,eV.G)({currency:t,tier:ey.Ju.PRO,renewalTerm:a,showCents:!1}),[d]=(0,p.mI)(n);if(null===d.data)throw Error("Seat types data is null");let o=d.data,{changeUserSeatType:c,selectSeatsState:m,setAdditionalSeats:_}=eF(e,r,i,l),u=r.map(e=>{let t=e.user;return{id:t.id,img_url:t.img_url,handle:t.handle,email:t.email}});return(0,s.jsx)(ez.T,{users:u,seatTypes:o,changeUserSeatType:c,selectSeatsState:m,setAdditionalSeats:_,tier:ey.Ju.PRO})}let eq=ec.M4.Query({fetch:async e=>(await eT.V.getEligibleUpgradeData(e)).data.meta,stalenessPolicy:"never"});function eW(e){let t;let a=(0,ed.iZ)(),l=a?.id,n=(0,u.DC)(),g=(0,i.d4)(e=>e.payment),S=(0,i.d4)(e=>e.teams),M=e.selectedView.paymentStep,O=(0,i.d4)(e=>e.roles.byTeamId),L=(0,eh.D6)("TeamUpgradeCart"),U=L.data?.permission===V.Xn.ADMIN,[B,G]=(0,r.useState)(n?.team_name??""),[Z,el]=(0,r.useState)(er.kt),ec=(0,e_.PS)((0,en.FC)()),eT=(0,K.e5)({userId:l,teams:Object.values(S),rolesByTeamId:O}),[eE,eN]=(0,r.useState)(!1),[eb,eA]=(0,r.useState)(n?.currency||g.currency||(0,em.LN)()),ew=e=>{eA(e),to(X.MN({currency:e}))},eC=g.billingPeriod,{editorStatusChanges:eI}=g,{ignoreCurrentPlan:eR}=e.selectedView,eP=e.selectedView.teamId,ek=(0,i.d4)(t=>(0,ex.Np)(t,{...e.selectedView,paymentStep:ef.tn.CONFIRM_PAY})),eM=(0,i.d4)(t=>(0,ex.Np)(t,{...e.selectedView,paymentStep:ef.tn.PAYMENT_AND_ADDRESS})),eO=(0,K.Mh)(),eD=void 0===g.cartSelections,eU=(0,_.ZC)(eD),eB=es.N_.dict(e=>g.cartSelections?.countBySeatType?.[e]||0),eV=eC&&(0,e_.ne)(eC)||ef.NW.YEAR,eG=(0,ee.jv)({billableProductKeys:es.N_,baseQuery:{currency:eb,tier:ey.Ju.PRO,renewalTerm:eV,unit:eV}}),[ez]=(0,p.mI)(eG),e$=(0,ee.vu)(ez);if(null===e$.data)throw Error("Price data is null");let eF=e$.data,eW=(0,N.s$)(eF),eX=(0,E.Vh)(eB,eW),[eJ,eK]=(0,r.useState)([]),[eZ,eQ]=(0,r.useState)(null),{createPaymentElement:e0,unmountPaymentElement:e1,savePayment:e5,saveWithPaymentMethod:e2,billingAddress:e7,updateBillingAddress:e3,shippingAddress:e4,updateShippingAddress:e9,customerLegalName:e6,setCustomerLegalName:e8,nameOnPaymentMethod:te,setNameOnPaymentMethod:tt,vatGstId:ta,setVatGstId:ts,regionalVatGstId:tr,setRegionalVatGstId:ti,paymentMethodType:tl,error:tn}=(0,et.lo)({setupIntentParams:{redirect_url:ek,error_redirect_url:eM,subtotal_estimate:eX,currency:eb,teamId:eP??void 0},setPaymentMethods:eK,customerInfo:{teamId:eP},paymentFlowSource:et.wn.PRO_UPGRADE,currency:eb,billingPeriod:eC,defaultCountry:(0,em.ub)(),initialBillingAddress:n?.billing_address,initialNameOnPaymentMethod:n?.name_on_payment_method,initialShippingAddress:n?.shipping_address,initialCustomerLegalName:n?.customer_legal_name,initialVatGstId:n?.vat_gst_id,initialRegionalVatGstId:n?.regional_vat_gst_id,teamName:n?.team_name||B,canSeeBillingAddressExp:eO,isCheckout:!0,isCampfireCart:!0}),td=tn?.code===et.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,to=(0,i.wA)(),tc=(0,eu.Ud)({teamId:eP,canSeeBillingAddressExp:eO}),[tm]=(0,p.IT)(eq({teamId:eP}),{enabled:!!eP}),t_="loaded"!==tm.status,tu={user:{id:l,img_url:a.img_url,handle:a.handle,email:a.email},id:"",team_id:eP,recommended_seat_type:{key:ea.ud.EXPERT,license_types:[]}};(0,r.useEffect)(()=>{"loaded"===tm.status&&(0,b.R9)({eligibleTeamIds:[eP],eligibleTeamUsers:tm.data.eligible_team_users,tier:ey.Ju.PRO,step:M})},[tm]);let tp=td||g.submitPending,th=r.useCallback(()=>{to(q.sf({...e.selectedView,paymentStep:ef.tn.CHOOSE_PLAN,previousView:e.selectedView.previousView,ignoreCurrentPlan:eR,billingPeriod:eC}))},[to,e.selectedView,eR,eC]),tx=eP?S[eP]?.name:B,tg=g.displayName||tx;(0,er.pI)({loadingPaidEditors:tc,teamId:eP,teamName:eP?void 0:B,setTeamName:eP?void 0:G,collaborators:eP||e.selectedView.teamFlowType!==ev.SC.CREATE?void 0:Z,setCollaborators:eP||e.selectedView.teamFlowType!==ev.SC.CREATE?void 0:el});let ty=(0,i.d4)(e=>e.currentUserOrgId),tf=eR?null:ty,tv=(0,i.d4)(e=>tf?e.orgById[tf]:null),tS=(0,ej.Q)({currentOrgId:tf,currentTeamId:null}),tT=tS.data?.currentUser?.baseOrgUser?.workspaceUsers,tj=tT?.find(e=>e?.isMainWorkspace)?.workspaceId,{cannotCreateTeamReason:tE}=(0,eo.LM)(tv,tj??null),tN=(0,i.d4)(e=>(0,ep.isOrgUserExternallyRestrictedFromState)(e));(0,m.h)(()=>{to(J.b({entered_pro_cart_flow:!0}))}),(0,m.h)(()=>{let e=document.createElement("div");return e.style.position="fixed",e.style.inset="0",e.style.background="var(--color-bg-secondary)",e.style.zIndex="-1",document.body.appendChild(e),()=>{document.body.removeChild(e)}});let[tb,tA]=(0,r.useState)(!1);(0,r.useEffect)(()=>{M===ef.tn.PAYMENT_AND_ADDRESS&&td&&th()}),(0,r.useEffect)(()=>{M===ef.tn.CONFIRM_PAY&&!tc&&eD&&(0,d.sx)("pro_cart_selections_undefined_on_review_step",{teamId:eP,userId:l})},[eD,tc,M,l,eP]),(0,r.useEffect)(()=>{M===ef.tn.CONFIRM_PAY&&eU&&!eD&&(0,d.sx)("monetization_upgrades.hydrated_pro_cart_selections",{teamId:eP,loadingPaidEditors:tc})},[eD,eU,tc,M,eP]);let tw=(0,i.d4)(e=>!!e.user&&(0,x.cn)(e.user));(0,r.useEffect)(()=>{tw&&e.selectedView.isEduTeam?to(X.Lo({billingPeriod:ef.tY.STUDENT})):e.selectedView.isEduTeam&&to(X.Lo({billingPeriod:ef.tY.UNSPECIFIED}))},[to,e.selectedView.isEduTeam,tw]),(0,r.useEffect)(()=>{e.selectedView.teamFlowType===ev.SC.CREATE_AND_UPGRADE&&(tN||tE===eo.z4.TEAM_CREATION_CONTROL)&&(c.Ay.redirect("/"),to(v.s.error((0,T.t)("team_creation.missing_team_creation_controls"))))},[e.selectedView.teamFlowType,tN,tE,to]);let tC=g.currencyToSwitch;(0,r.useEffect)(()=>{tC&&eA(tC)},[eA,tC]),(0,r.useEffect)(()=>{eJ[0]&&(eQ(eJ[0]),eN(!0))},[eJ,eQ,eN]);let tI=eC===ef.tY.STUDENT,tR=Z.filter(e=>e&&e.trim()).map(e=>e.trim()),tP=tR.filter(e=>!(0,o.xf)(e)),tk=!!a&&tR.filter(e=>e===a.email).length>0,tM=async t=>{t.preventDefault();let a=new URL(window.location.href).searchParams,s=a.get("onCompleteRedirectFileKey"),r=a.get("onCompleteRedirectNodeId");t.currentTarget&&t.currentTarget.blur();let i=(0,k.kR)(e.selectedView.paymentStep,e.selectedView.teamFlowType,eC,g.promo,e.selectedView.planType||ev.Sc.UNDETERMINED);M===ef.tn.CREATE_TEAM&&(G(B.trim()),to(q.sf({...e.selectedView,teamId:null,paymentStep:i,ignoreCurrentPlan:eR,billingPeriod:eC}))),M===ef.tn.ADD_COLLABORATORS&&(tP.length?to(v.s.error((0,T.t)("pro_cart.add_collaborators.error.email_is_invalid",{string:tP[0]}))):tk?to(v.s.error((0,T.t)("team_view.team_permissions_modal.youre_not_able_to_send_an_invite_to_yourself"))):to(q.sf({...e.selectedView,paymentStep:i,ignoreCurrentPlan:eR,billingPeriod:eC}))),M===ef.tn.CHOOSE_PLAN?tI?to(q.sf({...e.selectedView,paymentStep:i,billingPeriod:ef.tY.STUDENT,ignoreCurrentPlan:eR})):(to(X.Je({editorStatusChanges:eI})),to(q.sf({...e.selectedView,paymentStep:i,billingPeriod:g.billingPeriod,...s?{searchParams:{onCompleteRedirectFileKey:s,onCompleteRedirectNodeId:r}}:{},ignoreCurrentPlan:eR}))):M===ef.tn.PAYMENT_AND_ADDRESS&&(to(X.I2({submitPending:!0})),eE&&eZ?await e2(eZ):await e5(),to(X.I2({submitPending:!1})))},tO=e.selectedView.teamFlowType===ev.SC.CREATE?()=>{to((0,ei.KQ)({teamName:B,orgAccess:V.bU.PUBLIC,inviteEmails:tR,teamFlowType:e.selectedView.teamFlowType,onSuccess:()=>{(0,er.Al)(a?.id)},ignoreCurrentPlan:eR}))}:void 0;[ev.SC.CREATE_AND_UPGRADE,ev.SC.UPGRADE_EXISTING_TEAM].includes(e.selectedView.teamFlowType)&&(1===ec.length?t=t=>{t=t||e.selectedView.billingPeriod;let a=ev.SC.UPGRADE_EXISTING_TEAM;to(q.sf({...e.selectedView,teamFlowType:a,teamId:ec[0].id,paymentStep:(0,k.kR)(e.selectedView.paymentStep,a,t||null,g.promo,ev.Sc.TEAM,ef.tn.CHOOSE_PLAN),planType:ev.Sc.UNDETERMINED,billingPeriod:t,ignoreCurrentPlan:eR}))}:ec.length>1&&(t=e=>{e&&to(X.Lo({billingPeriod:e})),to((0,W.to)({type:A.dR,data:{plan:w.I.PRO,upsellSource:eg.b.UPGRADE_EXISTING_FROM_TEAM_CREATION}}))}));let tD=a&&er.lX({teamId:eP,userId:a.id})?.is3DS;return e.selectedView.teamFlowType===ev.SC.CREATE_AND_UPGRADE&&(tN||tE===eo.z4.TEAM_CREATION_CONTROL)?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(Q.fu,{name:eS.e0.TEAM_CHECKOUT_FLOW,properties:{teamId:e.selectedView.teamId,planType:e.selectedView.planType,entryPoint:e.selectedView.entryPoint,step:M,currency:eb,renewalTerm:eV,prices:(0,b.Jh)(eF)},enabled:!(tc||t_),trackingOptions:(0,$.u)(),children:(0,s.jsxs)("div",{"data-testid":"team-upgrade-billing-remodel",className:f.s.selectNone.$,children:[(0,s.jsx)(k.vU,{selectedView:e.selectedView,isCampfireCart:!0}),(0,s.jsxs)("div",{style:j.sx.mxAuto.add({padding:"98px 48px 48px",maxWidth:"1400px"}).$,children:[M!==ef.tn.CREATE_TEAM&&(0,s.jsx)(eY,{step:M,teamName:tx??""}),M===ef.tn.PLAN_COMPARISON&&(0,s.jsx)(z,{chooseStarterPlan:t?void 0:tO,chooseEduPlan:()=>{eP?to(X.Vm({teamId:eP})):to((0,W.to)({type:H.q}))},chooseProPlan:t=>{to(X.Lo({billingPeriod:t}));let a=(0,ev.h5)(e.selectedView.teamFlowType)?e.selectedView.teamFlowType:ev.SC.CREATE_AND_UPGRADE;to(q.sf({...e.selectedView,teamFlowType:a,paymentStep:(0,k.kR)(e.selectedView.paymentStep,a,t,g.promo,ev.Sc.TEAM),billingPeriod:t,planType:ev.Sc.TEAM,openInNewTab:!1,ignoreCurrentPlan:eR}))},chooseOrgPlan:()=>{to(X.Bq({currency:eb,newTeamProps:{teamFlowType:e.selectedView.teamFlowType,newTeamName:B,inviteEmails:tR,previousView:e.selectedView},upsellSource:eg.b.UPGRADE_NEW_TEAM_V2}))},currency:eb,updateCurrency:ew,upgradeExistingTeam:t}),M===ef.tn.CREATE_TEAM&&(0,s.jsx)(R.y,{type:e.selectedView.teamFlowType===ev.SC.CREATE?R.I.STARTER:R.I.PRO,teamName:B,setTeamName:G,onNext:tM,upgradeExistingTeam:t?()=>t?.(eC):void 0,promo:g.promo}),M===ef.tn.ADD_COLLABORATORS&&(0,s.jsx)(D,{disableInviteButton:!tR.length,collaborators:Z,setCollaborators:el,willSendInvites:tM,skipInviteStep:()=>{if(el(er.kt),l){let e=(0,er.lX)({teamId:null,userId:l});e&&(0,er.dT)(l,{...e,newCollaborators:er.kt})}to(q.sf({...e.selectedView,paymentStep:ef.tn.PLAN_COMPARISON,ignoreCurrentPlan:eR}))}}),M===ef.tn.CONFIRM_PAY?(0,s.jsxs)(s.Fragment,{children:[tD&&(0,s.jsx)("div",{className:f.s.mxAuto.alignLeft.mb16.$,children:(0,s.jsx)(y._,{color:y.S.INFORMATION,text:(0,T.t)("pro_cart.review.extra_validation")})}),tc||eD?(0,s.jsx)(P.f,{}):(0,s.jsx)(C.j,{billingAddress:e7,billingInterval:eV,countByBillableProductKey:eB,currency:eb,displayName:tg??"",hasUpgradeSucceeded:tb,isRequestPending:g.submitPending,legalName:g.legalName,navigateToEditDetails:()=>{to(q.sf({...e.selectedView,paymentStep:ef.tn.PAYMENT_AND_ADDRESS,previousView:e.selectedView.previousView,ignoreCurrentPlan:eR,billingPeriod:eC}))},onSubmit:()=>{let t=()=>{tA(!0),(0,u.sj)(),(0,eu.OI)(to),(0,ev.h5)(e.selectedView.teamFlowType)&&null===eP&&(0,er.Al)(l)};if(e.selectedView.teamId&&tI)to(X.Nj({teamId:e.selectedView.teamId}));else if(e.selectedView.teamId&&g.promo){let a=e.selectedView.teamId;to(Y.S_({teamId:a,teamName:S[a].name,promoCode:g.promo?.code||"",onSuccess:()=>{t(),(0,h._H)(),to(X.Ay({promo:null})),l?e.selectedView.previousView?q.sf(e.selectedView.previousView):F._l({workspace:{userId:l,orgId:null,teamId:a},view:{view:"allProjects"}}):to(q.sf(e.selectedView.previousView||{view:"team",teamId:a}))},onError:()=>{(0,h._H)(),to(X.Ay({promo:null})),to(q.sf({...e.selectedView,paymentStep:ef.tn.PLAN_COMPARISON,ignoreCurrentPlan:eR}))}}))}else{to(J.b({completed_pro_cart_flow:!0}));let{subtotal:a,taxTotal:s,total:r}=(0,N.ZY)({countBySeatType:eB,applicablePrices:eW,taxPercent:g.taxes?.tax_percent??0}),i=(0,N.GL)({subtotal:a,taxTotal:s,total:r});to(X.I2({submitPending:!0})),to((0,Y.gk)({teamId:e.selectedView.teamId,selectedCurrency:eb,teamName:B,teamFlowType:e.selectedView.teamFlowType,invites:tR,hasSelectedStudentTeam:tI,onSuccess:t,displayedCostBreakdown:i,isCampfireCart:!0,inStarterTeamLoopholes:eT,displayedPriceKeys:(0,N.vm)(eF)}))}},onSubmitTrackingProperties:{selectedUserSeatTypes:(0,b.Tj)(g.cartSelections?.selectedUserSeatTypes),countBySeatType:(0,b.gS)(eB),isTeamAdmin:U,...(0,N.ZY)({countBySeatType:eB,applicablePrices:eW,taxPercent:g.taxes?.tax_percent??0})},shippingAddress:e4,taxPercent:g.taxes?.tax_percent,tier:ey.Ju.PRO,title:(0,T.t)("checkout.upgrade_to_a_professional_plan"),userEmail:a?.email||""})]}):(0,s.jsxs)("div",{style:j.sx.grid.add({gridTemplateColumns:"1fr 280px",gap:"48px"}).$,children:[M===ef.tn.CHOOSE_PLAN&&(tc||t_&&!eT?(0,s.jsx)(P.f,{}):(0,s.jsx)(eH,{teamId:e.selectedView.teamId??"",currency:eb,renewalTerm:eV,eligibleTeamUsers:tm.data?.eligible_team_users??[tu],initCampfireSeats:g.cartSelections,onUpdateCampfireSeats:e=>to(X.qU({cartSelections:e}))})),M===ef.tn.PAYMENT_AND_ADDRESS&&(0,s.jsx)(eL,{billingAddress:e7,canSeeBillingAddressExp:eO,createPaymentElement:e0,enableSavedPaymentMethods:eE,error:tn,isCampfireCart:!0,legalCompanyName:e6,nameOnPaymentMethod:te,onRegionalVatGstIdChange:ti,onVatGstIdChange:ts,paymentFlow:et.wn.PRO_UPGRADE,paymentMethodType:tl,paymentMethods:eJ,regionalVatGstId:tr,selectedPaymentMethod:eZ,setEnableSavedPaymentMethods:eN,setSelectedPaymentMethod:eQ,shippingAddress:e4,unmountPaymentElement:e1,updateBillingAddress:e3,updateLegalCompanyName:e8,updateNameOnPaymentMethod:tt,updateShippingAddress:e9,vatGstId:ta}),[ef.tn.CHOOSE_PLAN,ef.tn.PAYMENT_AND_ADDRESS].includes(M)&&(0,s.jsx)(I.z,{billingInterval:eV,buttonText:M===ef.tn.PAYMENT_AND_ADDRESS?(0,T.t)("pro_cart.sidebar.next_review"):(0,T.t)("pro_cart.sidebar.next_payment_information"),canEnforcePaidSeatMinimum:M===ef.tn.CHOOSE_PLAN,countByBillableProductKey:eB,currency:eb,isButtonDisabled:tp,isLoading:g.submitPending,onClickNext:tM,onSwitchBillingInterval:e=>{d.az.trackDefinedEvent("monetization_upgrades.checkout_change_renewal_term",{teamId:eP??void 0,renewalTerm:e}),to(X.Lo({billingPeriod:(0,e_.JV)(e)}))},onSwitchCurrency:ew,tier:ey.Ju.PRO,title:(0,T.t)("checkout.your_professional_plan"),trackingProperties:{selectedUserSeatTypes:(0,b.Tj)(g.cartSelections?.selectedUserSeatTypes),countBySeatType:(0,b.gS)(eB),savedPaymentMethodId:eE?eZ?.id:void 0}})]})]})]})})}function eX(e){return(0,s.jsx)(g.tH,{team:n.e.MONETIZATION_UPGRADES,boundaryKey:"TeamUpgradeBillingRemodel",fallback:g.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:el.y4,children:(0,s.jsx)(eW,{...e})})}function eY({step:e,teamName:t}){let a=(0,K.Dj)(),r=(0,s.jsx)(S.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:Z.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,T.tx)("checkout.learn_more_about_seats")});return(0,s.jsxs)("div",{className:f.s.mb32.$,"data-testid":"cart-pro-header",children:[(0,s.jsx)("h2",{className:f.s.font15.lh24.fontMedium.$,children:function(e,t,a){switch(t=t||(0,T.t)("checkout.select_seats_header.your_team"),e){case ef.tn.PLAN_COMPARISON:return(0,T.tx)("pro_cart.choose_plan.choose_a_plan_for_your_new_team");case ef.tn.CHOOSE_PLAN:if(a)return(0,T.tx)("checkout.select_seats_header_exp",{teamName:t});return(0,T.tx)("checkout.select_seats_header",{teamName:t});case ef.tn.PAYMENT_AND_ADDRESS:return(0,T.tx)("checkout.enter_your_payment_details");case ef.tn.CONFIRM_PAY:return(0,T.tx)("checkout.everything_look_good");default:(0,l.wc)(e)}}(e,t,a())}),e===ef.tn.CHOOSE_PLAN&&(0,s.jsx)("p",{className:f.s.colorTextSecondary.font13.mt8.$,children:(0,T.tx)("checkout.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:r})}),e===ef.tn.CONFIRM_PAY&&(0,s.jsx)("p",{className:f.s.colorTextSecondary.font13.mt8.$,children:(0,T.tx)("checkout.confirm_your_plan_seats_and_payment_details_then_you_re_all_set")})]})}},716562:(e,t,a)=>{a.r(t),a.d(t,{TierUpgradeFlow:()=>tG});var s=a(104076),r=a(716976),i=a(638004);a(120440);var l=a(449572),n=a(550209),d=a(1188),o=a(903927),c=a(238198),m=a(130249),_=a(192075),u=a(259161),p=a(414085),h=a(244205);let x={[p.f.SELECT_TEAMS]:{name:(0,_.tx)("org_self_serve.headers.teams_to_upgrade"),getPageTitle:()=>(0,_.tx)("checkout.org_self_serve.select_teams_title"),buttonText:(0,_.tx)("checkout.org_self_serve.next_select_seats")},[p.f.SELECT_SEATS]:{name:(0,_.tx)("pro_cart.breadcrumbs.set_editors.seat_rename"),getPageTitle:e=>e?(0,_.tx)("checkout.select_seats_header",{teamName:e}):(0,_.tx)("checkout.org_self_serve.select_seats_header"),pageSubtitle:(0,_.tx)("checkout.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:(0,s.jsx)(u.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:h.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,_.tx)("checkout.learn_more_about_seats")})}),buttonText:(0,_.tx)("pro_cart.sidebar.next_payment_information")},[p.f.PAYMENT_AND_ADDRESS]:{name:(0,_.tx)("pro_cart.breadcrumbs.payment_information"),getPageTitle:()=>(0,_.tx)("checkout.enter_your_payment_details"),buttonText:(0,_.tx)("pro_cart.sidebar.next_review")},[p.f.REVIEW]:{name:(0,_.tx)("pro_cart.breadcrumbs.review"),getPageTitle:()=>(0,_.tx)("checkout.everything_look_good"),pageSubtitle:(0,_.tx)("checkout.confirm_your_plan_seats_and_payment_details_then_you_re_all_set")}};var g=a(111679),y=a(147046),f=a(657878),v=a(592726),S=a(691138);function T({steps:e,currentStep:t,setStep:a,teamId:r}){let i=(0,o.wA)(),l=v.iZ()?.id,n=(0,f._6)(),d=e.filter(e=>e!==p.f.ORG_CONFIRMATION);return(0,s.jsxs)("div",{className:"xixxii4 x78zum5 x1vqgdyp xh8yej3 x18tqr4w x1n5zjp5",children:[(0,s.jsx)(m.e6,{className:"x10l6tqk xomnu4r x1qpfodn xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",onClick:()=>{let e="teamUpgrade"===n.view?n.previousView:null;r&&e?.view!=="fullscreen"?i(g._l({workspace:{userId:l,teamId:r,orgId:null},view:{view:"recentsAndSharing"}})):i(y.sf(e||{view:"recentsAndSharing"})),"teamUpgrade"===n.view&&n.callbackOnClose?.()},children:(0,_.t)("checkout.cancel")}),(0,s.jsx)("ol",{className:"x78zum5 x6s0dn4 xl56j7k xh8yej3",children:d.map((e,r)=>{var i;return(0,s.jsx)("li",{children:(0,s.jsxs)(m.e6,{onClick:()=>a(e),"aria-current":e===t?"step":void 0,...{0:{className:"x78zum5 x6s0dn4 xl56j7k xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},1:{className:"x78zum5 x6s0dn4 xl56j7k xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l xnbbluu"}}[(e!==t)<<0],children:[(0,s.jsx)("span",{className:S.Q,children:(0,_.t)("checkout.voice_over.steps",{stepNumber:r+1,totalSteps:d.length})}),(0,s.jsx)("span",{className:"x17qaar8",children:(i=r+1)>=1&&i<=20?String.fromCodePoint(9312+(i-1)):i.toString()}),x[e].name,r<d.length-1&&(0,s.jsx)(c.a,{className:"xe5c7bq"})]})},r)})})]})}var j=a(293422),E=a(368581),N=a(902892),b=a(623411),A=a(821655),w=a(369729),C=a(827695),I=(e=>(e.CARD_ERROR="card_error",e.ESTIMATE_CALCULATION_ERROR="estimate_calculation_error",e.INVALID_PAID_SEAT_TOTAL="invalid_paid_seat_total",e.INVALID_LEGAL_NAME="invalid_legal_name",e.UPGRADE_ERROR="upgrade_error",e))(I||{}),R=(e=>(e.INIT="init",e.ON_TOGGLE_TEAM="on_toggle_team",e.UPDATE_USER_SEAT_TYPE="update_user_seat_type",e.UPDATE_STATE_FROM_NEW_TEAM_SELECTIONS="update_state_from_new_team_selections",e.UPDATE_ADDITIONAL_SEATS="update_additional_seats",e.UPDATE_DISPLAY_NAME="update_display_name",e.UPDATE_LEGAL_NAME="update_legal_name",e.SET_RENEWAL_TERM="set_renewal_term",e.SET_CURRENCY="set_currency",e.SET_TAX_PERCENT="set_tax_percent",e.SET_ERROR="set_error",e.SET_IS_SUBMITTING="set_is_submitting",e.SET_HAS_DIFFERENT_LEGAL_NAME="set_has_different_legal_name",e))(R||{}),P=a(900215),k=a(111297),M=a(506192),O=a(412469),D=a(608175),L=a(984887);function U({title:e,children:t,dataTestId:a}){return(0,s.jsxs)("div",{className:"x1a4ebq4 x9h44rk x1bamp8i xg7h5cd","data-testid":a,children:[e&&(0,s.jsx)("h2",{className:"x12sbs06 xor4psk x1ncjjhx xk50ysn x2i041 x14terfx",children:e}),t]})}var B=a(382629),V=a(833805),G=a(205729),z=a(418149);function $({currency:e,tier:t,renewalTerm:a,unit:s}){let r=(0,G.jv)({billableProductKeys:z.N_,baseQuery:{currency:e,tier:t,renewalTerm:a,unit:s??a}}),[i]=(0,V.mI)(r),l=(0,G.vu)(i);if(null===l.data)throw Error("Price data is null");return l.data}var F=a(373533),H=a(236753),q=a(788499),W=a(502907),X=a(649693),Y=a(781611),J=a(563554);function K({isCartReviewSummary:e=!1,state:t}){let{countBySeatType:a,renewalTerm:r,currency:i,taxPercent:l,tier:n,applicablePriceData:d}=t,o=$({currency:i,tier:n,renewalTerm:r,unit:L.NW.MONTH}),c=(0,H.s$)(d),m=(0,H.s$)(o),u=l||0,p=t=>(0,F.up)(t,i,{showCents:e}),h=(0,F.Vh)(a,c),x=(0,F.kV)(a,c,u),g=(0,F.N9)(a,c,u),y=p(h),f=p(x),v=p(g),S=r===L.NW.YEAR;return(0,s.jsx)(k.fu,{name:J.e0.CART_REVIEW_PURCHASE_SUMMARY,properties:{tier:n,renewalTerm:r,countBySeatType:(0,q.gS)(a),currency:i,taxPercent:u,subtotal:h,taxTotal:x,total:g},enabled:e,children:(0,s.jsxs)("table",{className:"xh8yej3 x1mwwwfo x1gukg7c",children:[(0,s.jsx)("tbody",{children:Object.keys(a).sort(Y.AG).map(t=>(0,s.jsx)(Z,{billableProductKey:t,count:a[t]||0,currency:i,isAnnual:S,isCartReviewSummary:e,paymentPrices:c,lineItemPrices:m},t))}),(0,s.jsxs)("tfoot",{children:[(0,s.jsx)("tr",{className:"x16dsc37","data-testid":"purchase-summary-subtotal",children:(0,s.jsx)(Q,{label:(0,_.tx)("checkout.subtotal"),amount:ee({price:y,isCartReviewSummary:e,isAnnual:S}),withBoldedLabel:!0,withExtraTopPadding:!0})}),e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("tr",{className:"x16dsc37","data-testid":"purchase-summary-taxes",children:(0,s.jsx)(Q,{label:(0,_.tx)("checkout.purchase_summary.tax"),subtext:(0,_.tx)("pro_cart.review.tax_percent",{taxPercent:u}),amount:ee({price:f,isAnnual:S,isCartReviewSummary:e})})}),(0,s.jsx)("tr",{className:"x16dsc37","data-testid":"purchase-summary-total-due",children:(0,s.jsx)(Q,{label:(0,_.tx)("checkout.purchase_summary.total_due_today"),amount:ee({price:v,isAnnual:S,isCartReviewSummary:e})})})]})]})]})})}function Z({billableProductKey:e,count:t,currency:a,isAnnual:r,isCartReviewSummary:l,paymentPrices:d,lineItemPrices:o}){if(!(0,X.dA)(e))return(0,n.$D)(i.e.MONETIZATION_UPGRADES,Error(`Received invalid billable product key ${e}`)),null;let c=d[e];if((0,B.uy)(c))return(0,n.$D)(i.e.BILLING_EXPERIENCE,Error(`Received null payment price on purchase summary for ${e}`)),null;let m=o[e];if((0,B.uy)(m))return(0,n.$D)(i.e.BILLING_EXPERIENCE,Error(`Received null line item price on purchase summary for ${e}`)),null;let u=new O.vr(a),p=u.formatMoney(c*t,{showCents:l}),h=(0,_.t)("checkout.price_per_month",{price:u.formatMoney(m)});return(0,s.jsx)("tr",{className:"x16dsc37 x1n5zjp5","data-testid":`purchase-summary-${e}-row`,children:(0,s.jsx)(Q,{label:(0,_.tx)("checkout.purchase_summary.cart_line_item",{quantity:t,productLabel:(0,W.tI)(e)}),subtext:(0,_.tx)(r?"checkout.product_cost_breakdown_annually":"checkout.product_cost_breakdown_monthly",{price:h,quantity:t}),amount:ee({price:p,isCartReviewSummary:l,isAnnual:r})})})}function Q({label:e,subtext:t,amount:a,withBoldedLabel:r=!1,withExtraTopPadding:i=!1}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("td",{...{0:{className:"x1uil0o3"},1:{className:"x1uil0o3 x1mg88bx"}}[!!i<<0],children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{...{0:{},1:{className:"x6xwguf"}}[!!r<<0],children:e}),t&&(0,s.jsx)("p",{className:"x1n0bwc9",children:t})]})}),(0,s.jsx)("td",{...{0:{className:"x1hr2gdg x1uil0o3"},1:{className:"x1hr2gdg x1uil0o3 x1mg88bx"}}[!!i<<0],children:(0,s.jsx)("p",{children:a})})]})}function ee({price:e,isAnnual:t,isCartReviewSummary:a}){return a?e:t?(0,_.t)("checkout.price_per_year",{price:e}):(0,_.t)("checkout.price_per_month",{price:e})}let et=(0,k.tf)(j.Pw);function ea({state:e,dispatch:t,buttonText:a,isButtonDisabled:r,canSwitchRenewalTerm:i,onClickNext:l,footer:n,trackingProperties:d}){let{tier:o,countBySeatType:c,renewalTerm:m,currency:u,cartSelectionError:p,isSubmitting:x}=e,g=!!c,y=(0,O._Z)(),f=(0,M.Um)(),v=e=>{t({type:R.SET_CURRENCY,payload:{currency:e}})},S=e=>{t({type:R.SET_RENEWAL_TERM,payload:{renewalTerm:e}})};return(0,s.jsxs)(U,{title:o===D.Ju.PRO?(0,_.t)("checkout.your_professional_plan"):(0,_.t)("checkout.your_organization_plan"),dataTestId:"cart-sidebar",children:[(0,s.jsx)("div",{className:"xehsoiq",children:g?(0,s.jsxs)(s.Fragment,{children:[y&&(0,s.jsxs)("div",{className:"x78zum5 x1qughib x6s0dn4 x1vamu9a x1n5zjp5","data-testid":"cart-sidebar-currency-switcher",children:[(0,s.jsx)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1akne3o",children:(0,_.tx)("checkout.sidebar.currency_label")}),(0,s.jsx)(P.D,{currency:u,dropdownShown:f,supportedCurrencies:(0,O.B9)(),changeCurrency:e=>{v(e)},shortFormDisplay:!0,paddingOverride:0})]}),i&&g&&(0,s.jsx)("fieldset",{className:"xehsoiq x12sbs06 x1bawvfr","data-testid":"cart-sidebar-billing-interval",children:(0,s.jsxs)(E.b,{legend:(0,s.jsx)(N.q,{children:(0,_.tx)("checkout.sidebar.switch_your_billing_interval")}),value:m,onChange:e=>S(e),children:[(0,s.jsx)(E.c,{value:L.NW.YEAR,label:(0,s.jsxs)(b.J,{className:"x78zum5 x6s0dn4 x1i71x30",children:[(0,_.tx)("checkout.sidebar.annual")," ",(0,s.jsx)("span",{className:"x1kpbbgt x1k6wstc x171ca4a x11bue6r x1m7dvi7 xq6u9c4 xpf8o86 x192jxwq xilkfi8 x1cmmqis x1rg5ohu",children:(0,_.tx)("checkout.sidebar.save_up_to_20")})]})}),(0,s.jsx)(E.c,{value:L.NW.MONTH,label:(0,s.jsx)(b.J,{children:(0,_.tx)("checkout.sidebar.monthly")})})]})}),(0,s.jsxs)("div",{className:"x1w4f5ud",children:[(0,s.jsx)(K,{isCartReviewSummary:!1,state:e}),(0,s.jsx)("p",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x3vvef7",children:(0,_.tx)("checkout.tax_disclaimer_revised",{checkoutStep:(0,s.jsx)("span",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,_.tx)("checkout.review_in_tax_disclaimer")})})})]})]}):(0,s.jsx)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1n0bwc9",children:(0,_.tx)("checkout.sidebar.cannot_calculate_subtotal")})}),(0,s.jsxs)("div",{className:"x1pdq3kb",children:[p&&(0,s.jsx)("div",{className:"xehsoiq x12sbs06",children:(0,s.jsx)(A.$y,{variant:"warn",children:(0,s.jsx)(w.Q,{children:p.message})})}),a&&(0,s.jsx)(et,{onClick:l,disabled:r||x,htmlAttributes:{"data-testid":"cart-sidebar-button"},trackingProperties:{trackingDescriptor:h.c.CART_SIDEBAR,...d},children:x?(0,s.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4","data-testid":"cart-sidebar-loading",children:(0,s.jsx)(C.k,{})}):a}),n&&(0,s.jsx)("div",{className:"xehsoiq","data-testid":"cart-sidebar-footer",children:n})]})]})}function es({step:e,teamName:t}){return(0,s.jsxs)("div",{className:"xf1vcxl","data-testid":"cart-header",children:[(0,s.jsx)("h1",{className:"xjz7g13 xuo4v2q xjnky0o xn4joj7 x1ul8uiu",children:x[e]?.getPageTitle(t)}),x[e]?.pageSubtitle&&(0,s.jsx)("p",{className:"x1swbamy xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",children:x[e]?.pageSubtitle})]})}var er=a(219199);function ei(){return(0,s.jsxs)("div",{className:"xht4xr3 x1lnnyxz x1a4ebq4 x9h44rk x1bamp8i xg7h5cd",children:[(0,s.jsx)("h1",{className:"xjz7g13 xuo4v2q xjnky0o xn4joj7 x1ul8uiu x12sbs06 x2b8uid",children:(0,_.t)("checkout.org_confirmation.title")}),(0,s.jsx)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x12sbs06",children:(0,_.t)("checkout.org_confirmation.body")}),(0,s.jsx)("div",{className:"x78zum5 x13a6bvl",children:(0,s.jsx)(j.WW,{onClick:()=>{er.Ay.redirect("/files/recent")},children:(0,_.t)("checkout.org_confirmation.button")})})]})}var el=a(989941),en=a(555013),ed=(e=>(e.PRO_UPGRADE="pro_upgrade",e.PRO_CHANGE_PAYMENT="pro_change_payment",e.ORG_UPGRADE="org_upgrade",e.ORG_CHANGE_PAYMENT="org_change_payment",e.COMMUNITY_CHECKOUT="community_checkout",e))(ed||{}),eo=(e=>(e.CREATE_PAYMENT_METHOD_ERROR="create-payment-method-error",e.CREATE_INTENT_ERROR="create-intent-error",e.CONFIRM_INTENT_ERROR="confirm-intent-error",e.CURRENCY_VALIDATION_ERROR="currency-validation-error",e.MISSING_STRIPE_ELEMENTS_ERROR="missing-stripe-elements-error",e.MISSING_PAYMENT_METHOD_ERROR="missing-payment-method-error",e.UNINITIALIZED_STRIPE_ELEMENTS_ERROR="uninitialized-stripe-elements-error",e.STRIPE_ELEMENTS_VALIDATION_ERROR="stripe-elements-validation-error",e))(eo||{});function ec(e){var t;return"object"==typeof e&&null!==e&&"code"in e&&"string"==typeof(t=e.code)&&Object.values(eo).includes(t)&&"message"in e&&"string"==typeof e.message}var em=a(812714),e_=a(520741),eu=(e=>(e.ADDRESS_VALIDATION_ERROR="address-validation-error",e.CURRENCY_VALIDATION_ERROR="currency-validation-error",e.MISSING_PAYMENT_METHOD_ERROR="missing-payment-method-error",e.NAME_ON_PAYMENT_METHOD_REQUIRED="name-on-payment-method-required",e.PAYMENT_METHOD_VALIDATION_ERROR="payment-method-validation-error",e.VAT_GST_ID_VERIFICATION_ERROR="vat-gst-id-verification-error",e))(eu||{}),ep=(e=>(e.INIT_SAVED_PAYMENT_METHODS="init_saved_payment_methods",e.SET_ERRORS="set_errors",e.SET_STRIPE_PAYMENT_METHOD="set_stripe_payment_method",e.SET_SAVED_PAYMENT_METHOD="set_saved_payment_method",e.TOGGLE_DIFFERENT_SHIPPING_ADDRESS="toggle_different_shipping_address",e.TOGGLE_USE_SAVED_PAYMENT_METHOD="toggle_use_saved_payment_method",e.UPDATE_BILLING_ADDRESS="update_billing_address",e.UPDATE_NAME_ON_PAYMENT_METHOD="update_name_on_payment_method",e.UPDATE_REGIONAL_VAT_GST_ID="update_regional_vat_gst_id",e.UPDATE_SHIPPING_ADDRESS="update_shipping_address",e.UPDATE_VAT_GST_ID="update_vat_gst_id",e))(ep||{});function eh(e){var t;return"object"==typeof e&&null!==e&&"code"in e&&"string"==typeof(t=e.code)&&Object.values(eu).includes(t)&&"message"in e&&"string"==typeof e.message}var ex=a(883765),eg=a(653899),ey=a(679359),ef=a(652539),ev=a(236631),eS=a(659062),eT=a(755444),ej=a(904017),eE=a(943325),eN=a(850896),eb=a(492073),eA=a(338052),ew=a(827999);let eC="stripe-payment-element",eI=(0,eA.D)(e=>{let t=(0,ej.S2)().unwrapOr(null),[a,s]=(0,r.useState)(null),[l,d]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[m,u]=(0,r.useState)(null),[p,h]=(0,r.useState)(!1),[x,g]=(0,r.useState)(!1),[y,f]=(0,r.useState)(void 0),v=(0,r.useRef)(null),S=(0,eT.Ay)().user_data,T=(0,ew.X)(),j=(0,ew.W)(S);async function E(){if(v.current)return v.current;try{let t=(await (0,eE.eV)()).elements({mode:"setup",paymentMethodCreation:"manual",currency:e.currency,paymentMethodConfiguration:e.stripePaymentMethodConfiguration,...T});return v.current=t,t}catch(e){(0,ex.sx)("setup_intent_creation_failed",A(),{forwardToDatadog:!0}),b({error:e,code:eo.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,message:(0,_.t)("payments.errors.error_loading_payment_form")})}}async function N(e){if(o&&!p)return{succeeded:!0,clientSecret:o,customerId:l};try{let{data:{meta:{client_secret:t,customer_id:a}}}=await eb.m.createSetupIntent(e);return(0,ex.sx)("setup_intent_creation_attempted",A(),{forwardToDatadog:!0}),c(t),d(a),h(!1),{succeeded:!0,clientSecret:t,customerId:a}}catch(e){return{succeeded:!1,clientSecret:null,customerId:null}}}function b({error:e,code:t,message:a,extra:r={}}){s({code:t,message:a}),t===eo.CURRENCY_VALIDATION_ERROR||(0,eN.At)(e)||(0,eN.VT)(e)||(0,eN.um)(e)||(0,n.$D)(i.e.BILLING,Error(`[Billing] ${"string"==typeof e?e:e.code??"StripeError"}`),t=>{let a="object"==typeof e?{stripe_error_details:(0,n.V5)((0,eE.pV)(e)),...r}:r;return t.setExtras(a),(0,eN.q1)(e)&&(t.setTag("stripe_error_type",e.type),(0,eN.At)(e)&&t.setLevel("warning")),t})}function A(){return{planParentId:t?.key.parentId,paymentFlowSource:e.paymentFlowSource,currency:e.currency,isCampfireCart:!0}}function w(){return document.querySelectorAll("[name*=privateStripeFrame]").length}function C(e){let t;return((0,eN.At)(e)||(0,eN.VT)(e)||(0,eN.um)(e))&&(t=e.message),t??(0,_.t)("payments.errors.confirm_setup_error")}return(0,r.useEffect)(()=>{let t=v.current;t&&t.update({currency:e.currency})},[e.currency]),{createPaymentElement:async(e={})=>{let t=await E();if(!t){let e={code:eo.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,message:(0,_.t)("payments.errors.error_loading_payment_form")};return b({...e,error:"Failed to get stripe elements"}),e}let a=t.getElement("payment")??t.create("payment",j);return a.on("ready",t=>{(0,ex.sx)("Payment Form Loaded",{...A(),paymentMethod:y??eE.lB.CARD,availableCurrencies:(0,O.B9)()}),y||f(eE.lB.CARD),e.ready?.(t)}),a.on("change",t=>{let a=t.value?.type;(0,ex.sx)("Choose Payment Method Type",{...A(),paymentMethod:a}),f(a),e.change?.(t)}),a.mount(`#${eC}`),null},unmountPaymentElement:async()=>{let e=await E();e?.getElement("payment")?.unmount()},createPaymentMethod:async e=>{if(!v.current){let e={code:eo.MISSING_STRIPE_ELEMENTS_ERROR,message:(0,_.t)("payments.errors.confirm_setup_error")};return b({...e,error:"Cannot create payment method without Stripe elements"}),e}s(null);let{error:t}=await v.current.submit();if(t){let e=C(t),a={code:eo.STRIPE_ELEMENTS_VALIDATION_ERROR,message:e};return s(a),a}let a=w(),r=setInterval(()=>{a!==w()&&((0,ex.sx)("Stripe Authentication Modal"),clearInterval(r),g(!0))},1e3);(0,ex.sx)("Add payment method",{...A(),paymentMethod:y},{forwardToDatadog:!0});let i=await (0,eE.eV)(),{error:l,paymentMethod:n}=await i.createPaymentMethod({elements:v.current,params:{billing_details:e}});if(clearInterval(r),l){let e={code:eo.CREATE_PAYMENT_METHOD_ERROR,message:C(l)};return b({...e,error:l}),e}return n},confirmIntent:async({paymentMethod:e,createIntentParams:t})=>{if(!e){let e={code:eo.MISSING_PAYMENT_METHOD_ERROR,message:(0,_.t)("payments.errors.confirm_setup_error")};return b({...e,error:"Payment method is required to confirm intent"}),e}let[a,{succeeded:s,clientSecret:r,customerId:i}]=await Promise.all([(0,eE.eV)(),N(t)]);if(!s){let e={code:eo.CREATE_INTENT_ERROR,message:(0,_.t)("payments.errors.confirm_setup_error")};return b({...e,error:"Failed to create Setup Intent to confirm"}),e}let{error:l,setupIntent:n}=await a.confirmSetup({clientSecret:r,redirect:"if_required",confirmParams:{return_url:`https://${window.location.host}`,payment_method:e}});if(l){let e={code:eo.CONFIRM_INTENT_ERROR,message:C(l)};return b({...e,error:l}),e}if("succeeded"!==n.status){let e={code:eo.CONFIRM_INTENT_ERROR,message:(0,_.t)("payments.errors.confirm_setup_error")};return b({...e,error:`SetupIntent confirmed with status ${n.status}`}),e}{let e={...n,customer:i};return d(i),u(n),h(!0),e}},paymentMethodType:y,error:a,stripeIntent:m,stripeCustomerId:l,is3ds:x}});var eR=a(309537),eP=a(914790),ek=a(433566);function eM({createPaymentElement:e,unmountPaymentElement:t,paymentElementEventHandlers:a,paymentFlow:i,state:l,dispatch:n,canUpdateVatIds:d,shouldRenderErrors:o=!0}){let[c,m]=(0,r.useState)(!1),{vatGstId:u,regionalVatGstId:p,nameOnPaymentMethod:h,hasDifferentShippingAddress:x,errors:g,stripeError:y,paymentMethodType:f,billingAddress:v,shippingAddress:S}=l,T=i===ed.PRO_UPGRADE||i===ed.ORG_UPGRADE,j={paymentFlow:i,paymentMethodType:f,isCampfireCart:!0},E=[...g,y].filter(e=>!!e).map(e=>e.message);return(0,eg.h)(()=>((async function(){await e({ready:e=>{m(!0),a?.ready?.(e)},change:a?.change})})(),()=>{t()})),(0,r.useEffect)(()=>{y&&ex.az.trackDefinedEvent("monetization_upgrades.checkout_payment_error",{...j,message:y.message})},[y]),y?.code===eo.UNINITIALIZED_STRIPE_ELEMENTS_ERROR?(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k x2b8uid",children:[(0,s.jsx)(ef.B,{svg:ek.A,className:"x1w6u5r6 x1fz3pi1 xqql8cr"}),(0,s.jsx)("p",{className:"x1874spd x1t2kcbv x1n0bwc9 x1evy7pa",children:y.message})]}):(0,s.jsxs)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l","data-testid":"stripe-payment-form",children:[o&&E.length>0&&(0,s.jsx)("div",{className:"x1buy44e",children:E.map((e,t)=>(0,s.jsx)("div",{className:"x611mgq",children:(0,s.jsx)(e_._,{color:e_.S.ERROR,"aria-live":"polite",text:e})},t))}),(0,s.jsx)("div",{id:eC}),c?(0,s.jsxs)("div",{style:eS.sx.add({marginTop:"7px"}).if(f&&eE.d2.includes(f),{marginTop:"15px"}).$,children:[(0,s.jsx)(en.Lf,{value:h,htmlName:"name_on_card",label:(0,_.t)("pro_cart.payment.name_on_payment_method_label"),placeholder:(0,_.t)("pro_cart.payment.name_on_payment_method"),onChange:e=>{n({type:ep.UPDATE_NAME_ON_PAYMENT_METHOD,payload:e.target.value.trim()})},autoCompleteName:"name on payment method",trackingFieldName:"Name On Payment Method",dataTestId:"name-on-payment-method"}),(0,s.jsx)(eR.X,{address:v,updateAddress:e=>{n({type:ep.UPDATE_BILLING_ADDRESS,payload:e})},isBillingAddress:!0,canSeeBillingAddressExp:!0}),d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eP.A,{onChange:e=>n({type:ep.UPDATE_VAT_GST_ID,payload:e}),country:v.country,vatId:u,isCommunityCheckout:i===ed.COMMUNITY_CHECKOUT}),(0,s.jsx)(eP.A,{onChange:e=>n({type:ep.UPDATE_REGIONAL_VAT_GST_ID,payload:e}),country:v.country,region:v.region,vatId:p,isCommunityCheckout:i===ed.COMMUNITY_CHECKOUT,variant:"regional"})]}),f===eE.lB.SEPA&&(0,s.jsx)("p",{className:"x1n0bwc9 x1j6dyjg x1d3mw78 xqp8s7e",children:(0,_.tx)("pro_cart.payment.sepa_direct_debit_mandate")}),T&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"x78zum5 x6s0dn4 xpgiz1h x1u94j8j x13q985h",style:eS.sx.if(x,{marginBottom:"24px"}).$,"data-testid":"stripe-payment-shipping-address-checkbox",children:(0,s.jsx)(el.S,{label:(0,s.jsx)(b.J,{children:(0,s.jsx)("span",{className:ev.s.font13.$,children:(0,_.tx)("checkout.i_have_a_different_shipping_address")})}),checked:x,onChange:()=>{n({type:ep.TOGGLE_DIFFERENT_SHIPPING_ADDRESS})}})})}),x&&S&&(0,s.jsx)(eR.X,{address:S,updateAddress:e=>{n({type:ep.UPDATE_SHIPPING_ADDRESS,payload:e})},canSeeBillingAddressExp:!0})]}):(0,s.jsx)("div",{className:"x78zum5 xaehx54 x6s0dn4 xl56j7k",children:(0,s.jsx)(ey.kt,{})})]})}var eO=a(249586),eD=a(364616);let eL=(0,k.h3)(e=>{let{dataTestId:t,children:a,...r}=e;return(0,s.jsx)("select",{...r,"data-testid":t,children:a})});function eU({selectedPaymentMethod:e,setSelectedPaymentMethod:t,paymentMethods:a}){return(0,s.jsx)("div",{className:"x78zum5 xdt5ytf xl56j7k x1n2onr6 x1bamp8i x11k6fmb x1yjdb4r x9f619 x192jxwq xh8yej3 xn3w4p2 x1gnnqk1 x11ugzjr","data-testid":"payment-method-dropdown",children:(0,s.jsxs)("div",{className:"x78zum5 x1n2onr6 xh8yej3 x6s0dn4",children:[(0,s.jsx)(eL,{className:"x1akne3o xf3scy2 x1yjdb4r x5kalc8 x1vy7i8i x1mvmbdv xjyslct x1iyjqo2 x1se2ifz x1gs6z28 x1a2a7pz x1x7eeca",name:"selected_saved_payment_method",dataTestId:"payment-method-select",trackingFieldName:"SelectExistingPaymentMethod",trackingPopulationLevel:e?.id?eO._R.POPULATED_COMPLETE:eO._R.NOT_POPULATED,onChange:e=>{let s=e.target.value,r=a.find(e=>e.id===s);r&&t(r)},value:e?.id,children:a.map(e=>(0,s.jsx)(eB,{paymentMethod:e},e.id))}),(0,s.jsx)(ef.B,{className:"x10l6tqk x1f6937p x47corl x1epfdc x1ja3g5x",svg:eD.A})]})})}function eB({paymentMethod:e}){return(0,r.createElement)("option",{className:"x78zum5 x1qughib x1nfngrj",value:e.id,key:e.id},(0,s.jsx)("span",{className:"xemv814",children:e.payment_method}),e.billing_address&&(0,s.jsx)("span",{className:"x1n0bwc9 xemv814",children:` - ${(0,H.DS)(e.billing_address)}`}))}function eV(e){let{isUsingSavedPaymentMethod:t,savedPaymentMethod:a,savedPaymentMethods:r,errors:i}=e.state,l=(0,em.k)().cart_rewrite_full_send_saved_payment,n=()=>{e.dispatch({type:ep.TOGGLE_USE_SAVED_PAYMENT_METHOD})};return(0,s.jsxs)(s.Fragment,{children:[i.length>0&&(0,s.jsx)("div",{className:"x1buy44e",children:i.map((e,t)=>(0,s.jsx)("div",{className:"x611mgq",children:(0,s.jsx)(e_._,{dataTestId:"inline-banner",color:e_.S.ERROR,text:e.message})},t))}),l&&r.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(el.S,{label:(0,s.jsx)(b.J,{children:(0,s.jsx)("span",{className:"xemv814",children:(0,_.t)("checkout.use_saved_payment_method")})}),onChange:()=>{n()},checked:t}),(0,s.jsx)("div",{className:"x19ueytk"}),t&&(0,s.jsx)(eU,{selectedPaymentMethod:a,setSelectedPaymentMethod:t=>{e.dispatch({type:ep.SET_SAVED_PAYMENT_METHOD,payload:t})},paymentMethods:r})]}),(0,s.jsx)("div",{...{0:{},1:{className:"xqtp20y xb3r6kr xg01cxk"}}[!!(l&&t)<<0],children:(0,s.jsx)(eM,{...e,shouldRenderErrors:!1})})]})}function eG({state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:i}){let{tier:l,hasDifferentLegalName:n,legalName:d,displayName:o}=e,[c,m]=(0,r.useState)(!1),u=(0,r.useMemo)(()=>({...e,errors:e.paymentFormErrors}),[e]);return(0,s.jsxs)("div",{children:[l===D.Ju.ORG&&(0,s.jsx)("div",{className:"xpezlj7",children:(0,s.jsx)(U,{title:(0,_.t)("checkout.organization_details"),children:(0,s.jsxs)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",children:[(0,s.jsx)(en.Lf,{htmlName:"legal_org_name",label:(0,_.t)("org_self_serve.details_step.legal_company_name"),value:d,onChange:e=>{let a=e.target.value;t({type:R.UPDATE_LEGAL_NAME,payload:{legalName:a.trim()}})}}),(0,s.jsx)(en.Lf,{htmlName:"org_name",label:(0,_.t)("org_self_serve.details_step.company_display_name"),placeholder:(0,_.t)("org_self_serve.details_step.company_display_name__different_from_company_name_sub_text"),value:o,onChange:e=>{let a=e.target.value;t({type:R.UPDATE_DISPLAY_NAME,payload:{displayName:a.trim()}})}})]})})}),(0,s.jsxs)(U,{title:(0,_.t)("checkout.payment_details"),children:[(0,s.jsx)("div",{className:"xdpxx8g",children:(0,s.jsx)(eV,{canUpdateVatIds:!0,createPaymentElement:a,dispatch:t,paymentFlow:l===D.Ju.ORG?ed.ORG_UPGRADE:ed.PRO_UPGRADE,state:u,unmountPaymentElement:i,paymentElementEventHandlers:{ready:()=>m(!0)}})}),c&&l===D.Ju.PRO&&(0,s.jsxs)("div",{className:"xpgiz1h xemv814",children:[(0,s.jsx)(el.S,{label:(0,s.jsx)(b.J,{children:(0,s.jsx)("span",{className:"xemv814",children:(0,_.tx)("checkout.i_have_a_different_legal_name")})}),checked:n,onChange:()=>{t({type:R.SET_HAS_DIFFERENT_LEGAL_NAME,payload:{hasDifferentLegalName:!n}})}}),(0,s.jsx)("div",{className:"x19ueytk"}),n&&(0,s.jsx)(en.Lf,{value:d||"",htmlName:"legal_company_name",label:(0,_.t)("pro_cart.payment.legal_company_name_label"),placeholder:(0,_.t)("pro_cart.payment.legal_company_name_placeholder"),onChange:e=>{t({type:R.UPDATE_LEGAL_NAME,payload:{legalName:e.target.value.trim()}})},autoCompleteName:"legal company name",trackingFieldName:"Legal Company Name",dataTestId:"legal-company-name"})]})]})]})}var ez=a(951002),e$=a(475477),eF=a(381671);let eH=(0,s.jsx)(u.Ph,{newTab:!0,trusted:!0,href:"/pricing",children:(0,_.tx)("checkout.monthly_price")});function eq({state:e,onSubmit:t}){let{renewalTerm:a,isSubmitting:i,tier:l}=e,[n,d]=r.useState(!1),o=(0,s.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4","data-testid":"cart-review-submit-loading",children:(0,s.jsx)(C.k,{})});return(0,s.jsxs)(U,{title:l===D.Ju.ORG?(0,_.t)("checkout.upgrade_to_an_organization_plan"):(0,_.t)("checkout.upgrade_to_a_professional_plan"),dataTestId:"cart-review",children:[(0,s.jsxs)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l xpgiz1h",children:[(0,s.jsx)(K,{state:e,isCartReviewSummary:!0}),(0,s.jsx)("div",{"data-testid":"purchase-summary-plan-renewal",children:(0,s.jsxs)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x78zum5",children:[(0,s.jsx)(eF.w,{className:"xrxf7wd"}),(0,s.jsx)(eJ,{tier:l,isAnnual:a===L.NW.YEAR})]})})]}),(0,s.jsx)(eW,{tier:l,isAnnual:a===L.NW.YEAR}),(0,s.jsx)("div",{className:"x1bz8wuu x1hk0uxs x18wv8x9","data-testid":"cart-review-terms-checkbox",children:(0,s.jsx)(el.S,{label:(0,s.jsx)(b.J,{children:(0,s.jsx)("span",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l",children:l===D.Ju.ORG?(0,s.jsx)(eX,{}):(0,s.jsx)(eY,{})})}),checked:n,onChange:d})}),(0,s.jsx)(m.lR,{onClick:t,disabled:i||!n,htmlAttributes:{"data-testid":"cart-review-submit-button"},trackingProperties:{trackingDescriptor:h.c.COMPLETE_PURCHASE},children:i?o:(0,_.tx)("checkout.complete_purchase")})]})}function eW({tier:e,isAnnual:t}){let a=e===D.Ju.ORG?"https://help.figma.com/hc/articles/360040328293-Manage-billing-on-the-Organization-and-Enterprise-plans":"https://help.figma.com/hc/articles/360041061034-Manage-billing-on-the-Professional-plan";return(0,s.jsx)("div",{className:"x1bz8wuu","data-testid":"cart-review-upgrade-information-banner",children:(0,s.jsxs)("div",{className:"x1vi7shn xp6roeo x1nz7w5u xyx8554 x1v8gsql x19y5rnk x78zum5 xdt5ytf xg2d0mh",children:[(0,s.jsx)("p",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,_.tx)("checkout.how_do_new_seat_additions_and_upgrades_work")}),(0,s.jsx)("p",{children:function(e,t){switch(e){case D.Ju.ORG:return(0,_.tx)("checkout.cart_review_upgrade_info_org");case D.Ju.PRO:return t?(0,_.tx)("checkout.cart_review_upgrade_info_pro_annual",{monthlyPriceLink:eH}):(0,_.tx)("checkout.cart_review_upgrade_info_pro_monthly");default:(0,ez.wc)(e)}}(e,t)}),(0,s.jsx)("div",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh xlup9mm",children:(0,s.jsx)(u.Ph,{newTab:!0,href:a,trusted:!0,children:(0,_.tx)("checkout.learn_more")})})]})})}function eX(){return(0,_.tx)("org_self_serve.review_step.i_agree_to_msa_and_renewal_links",{msaLink:(0,s.jsx)(e$.N,{href:"/ssa",newTab:!0,trusted:!0,children:(0,_.tx)("org_self_serve.review_step.software_services_agreement")}),renewalLink:(0,s.jsx)(e$.N,{href:(0,_.dS)("/renewal-and-cancellation"),newTab:!0,trusted:!0,children:(0,_.tx)("org_self_serve.review_step.renewal_and_cancellation_terms")})})}function eY(){return(0,_.tx)("pro_cart.review.agree_with_privacy_and_cancellation",{termsOfServiceLink:(0,s.jsx)(u.Ph,{href:"/tos",newTab:!0,trusted:!0,children:(0,_.tx)("pro_cart.review.tos")}),privacyLink:(0,s.jsx)(u.Ph,{href:"/privacy",newTab:!0,trusted:!0,children:(0,_.tx)("pro_cart.review.privacy_policy")}),cancellationLink:(0,s.jsx)(u.Ph,{href:"/pricing-faq/#how-do-i-cancel-my-paid-plan",newTab:!0,trusted:!0,children:(0,_.tx)("pro_cart.review.cancellation_policy")})})}function eJ({tier:e,isAnnual:t}){switch(e){case D.Ju.ORG:return(0,_.tx)("checkout.purchase_summary.plan_renewal_org");case D.Ju.PRO:return t?(0,_.tx)("checkout.purchase_summary.plan_renewal_pro_annual"):(0,_.tx)("checkout.purchase_summary.plan_renewal_pro_monthly");default:(0,ez.wc)(e)}}function eK({navigateToEditDetails:e,state:t}){let a=(0,eT.Ay)().user_data,{displayName:r,legalName:i,tier:l,shippingAddress:n,billingAddress:d,hasDifferentShippingAddress:o}=t;return(0,s.jsxs)(U,{title:(0,_.t)("checkout.cart_plan_details.subtitle"),dataTestId:"cart-plan-details",children:[(0,s.jsx)(eZ,{header:l===D.Ju.ORG?(0,_.t)("checkout.cart_plan_details.organization_name"):(0,_.t)("checkout.cart_plan_details.team_name"),value:r,dataTestId:"cart-plan-details-plan-name"}),i&&(0,s.jsx)(eZ,{header:(0,_.t)("checkout.cart_plan_details.legal_name"),value:i,dataTestId:"cart-plan-details-legal-name"}),(0,s.jsx)(eZ,{header:(0,_.t)("checkout.cart_plan_details.invoice_email"),value:a?.email??"",dataTestId:"cart-plan-details-invoice-email"}),d&&(0,s.jsx)(eZ,{header:(0,_.t)("checkout.cart_plan_details.billing_address"),value:(0,H.DS)(d),dataTestId:"cart-plan-details-billing-address"}),o&&(0,s.jsx)(eZ,{header:(0,_.t)("checkout.cart_plan_details.shipping_address"),value:(0,H.DS)(n),dataTestId:"cart-plan-details-shipping-address"}),(0,s.jsx)("div",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1w4f5ud x1vamu9a",children:(0,s.jsx)(m.rb,{onClick:e,trackingProperties:{trackingDescriptor:h.c.EDIT_PLAN_DETAILS},"data-testid":"cart-plan-details-edit-details",children:(0,_.tx)("checkout.cart_plan_details.edit_details")})})]})}function eZ({header:e,value:t,dataTestId:a}){return(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf xuzqwsy xpezlj7 x1n5zjp5 x1cy8zhl","data-testid":a,children:[(0,s.jsx)("h4",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1n0bwc9 x1ihwiht",children:e}),(0,s.jsx)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1akne3o x13faqbe",children:t})]})}function eQ(e){return(0,s.jsxs)("div",{style:eS.sx.grid.add({gridTemplateColumns:"400px 1fr",gap:"48px"}).$,"data-testid":"cart-review-step",children:[(0,s.jsx)(eK,{...e}),(0,s.jsx)(eq,{...e})]})}var e0=a(999083),e1=a(420680),e5=a(282856),e2=a(804937),e7=a(708669),e3=a(72138),e4=a(876299),e9=a(963566),e6=a(560806),e8=a(755462),te=a(753151),tt=a(871898),ta=a(366535),ts=a(826160);function tr({state:e,teamId:t,shouldShowTeamColumn:a,dispatch:i}){let{tier:l,selectedUserSeatTypes:n,additionalSeatsCount:d,eligibleUsersByUserId:o,eligibleTeamsByTeamId:c,selectedTeamIds:m,currentUpgradingUserId:u}=e,p=(0,e6.s)({eligibleUsersByUserId:o,eligibleTeamsByTeamId:c,selectedTeamIds:Array.from(m),currentUpgradingUserId:u}),h=(0,r.useRef)(null),x=(0,e9.f)({tableContainerRef:h}),[g,y]=r.useState(!1),f=r.useMemo(()=>{let e=[...p];return(0,e0.v7)(e,e=>e.handle,{isDescending:g}),e},[p,g]),v=(0,H.UL)((0,H.iB)(n)),S=(0,H.UL)(d),T=(0,e4.G)({currency:e.currency,tier:e.tier,renewalTerm:e.renewalTerm,showCents:!1}),[j]=(0,V.mI)(T);if(null===j.data)throw Error("No seat types data");let E=j.data,N=(e,t)=>{i({type:R.UPDATE_USER_SEAT_TYPE,payload:{userId:e,seatType:t}})};return(0,s.jsx)("div",{"data-testid":"select-seats-step",children:(0,s.jsxs)("div",{className:"x1yjdb4r x1mxnbhz x1bamp8i",ref:h,children:[(0,s.jsx)(e3.P,{maxHeight:x,className:"x19j9cuy x1vp1w89",hideScrollbar:!0,horizontalScrollingDisabled:!0,children:(0,s.jsxs)("table",{className:"xh8yej3 x140o2bo",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{"aria-hidden":!0,className:"xrxf7wd xmqvhtb x10lmdbm xj6lqsg xdpxx8g xxymvpz x19j9cuy"}),(0,s.jsxs)("th",{className:"x1qx9l9d x13ruybi xdpxx8g xxymvpz x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r x19j9cuy",children:[(0,_.tx)("checkout.select_seats_table.user_column")," ",(0,s.jsx)("div",{className:"x1rg5ohu","data-testid":"select-seats-table-sort-users-button",children:(0,s.jsx)(e1.K,{onClick:()=>y(e=>!e),"aria-label":(0,_.t)("checkout.select_seats_table.sort"),children:g?(0,s.jsx)(e5.d,{"data-testid":"select-seats-table-icon-arrow-up"}):(0,s.jsx)(e2.Q,{"data-testid":"select-seats-table-icon-arrow-down"})})})]}),(0,s.jsx)("th",{className:"x1exxlbk x1w4f5ud x1vamu9a xyx8554 xdpxx8g xxymvpz x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r x1igx7t4",children:(0,_.tx)("checkout.select_seats_table.seat_column")}),a&&(0,s.jsx)("th",{className:"xq1dxzn x13ruybi xdpxx8g xxymvpz xb3r6kr xuxw1ft xlyipyv x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r",children:(0,_.tx)("checkout.select_seats_table.team_column")}),(0,s.jsx)("th",{className:"x1qx9l9d x13ruybi xdpxx8g xxymvpz x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r x1vp1w89",children:(0,_.tx)("checkout.select_seats_table.description_column")}),(0,s.jsx)("th",{"aria-hidden":!0,className:"xrxf7wd xmqvhtb x10lmdbm xj6lqsg xdpxx8g xxymvpz x1vp1w89"})]})}),(0,s.jsx)("tbody",{className:"x1yjdb4r x499qwo",children:f.map(e=>(0,s.jsx)(ti,{user:e,seatTypes:E,selectedSeatType:n[e.id],changeSeatType:a=>{ex.az.trackDefinedEvent("monetization_upgrades.user_seat_selection_changed_in_checkout",{targetUserId:e.id,previousSeatType:n[e.id],newSeatType:a,tier:l,teamId:t??void 0}),N(e.id,a)},tier:l,teamId:t??void 0,shouldShowTeamColumn:a},e.id))})]})}),(0,s.jsxs)("div",{className:"x1xvsi7n xdmjnt8 x1nz7w5u xyx8554 xdyg6lv x78zum5 x6s0dn4 x1qughib",children:[(0,s.jsx)(e8.m,{tier:l,seatTypes:E,additionalSeatCounts:d,setAdditionalSeats:e=>{i({type:R.UPDATE_ADDITIONAL_SEATS,payload:e})}}),(0,s.jsx)("p",{children:(0,_.tx)("checkout.select_seats_table.team_members_count",{assignedSeatsText:(0,_.tx)("checkout.select_seats_table.assigned_seats",{count:v}),unassignedSeatsText:(0,_.tx)("checkout.select_seats_table.unassigned_seats",{count:S})})})]})]})})}function ti({user:e,seatTypes:t,selectedSeatType:a,changeSeatType:r,tier:i,shouldShowTeamColumn:l,teamId:n}){let d=(0,o.wA)(),c=(0,v.TA)(),m=e.id===c;return(0,B.uy)(t[a])?null:(0,s.jsxs)("tr",{"data-testid":`select_seat_row--${e.id}`,children:[(0,s.jsx)("td",{"aria-hidden":!0,className:"xrxf7wd xmqvhtb x10lmdbm xj6lqsg xdpxx8g xxymvpz"}),(0,s.jsx)("td",{className:"x1qx9l9d x13ruybi xdpxx8g xxymvpz","data-testid":"select_seats_table_user_cell",children:(0,s.jsx)(ts.az,{entity:e,includeUserEmailAddress:!0,size:24,showIsMe:m})}),(0,s.jsx)("td",{className:"x1exxlbk x1w4f5ud x1vamu9a x8rdmch xyx8554 xdpxx8g xxymvpz",children:(0,s.jsx)(j.IK,{variant:"ghost","aria-label":(0,_.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:()=>{d((0,ta.to)({type:te.Y,data:{user:e,seatTypes:t,selectedSeatType:a,setSelectedSeatType:r,tier:i,teamId:n}}))},iconPrefix:(0,s.jsx)(tt.B,{type:a,size:"24"}),children:(0,s.jsxs)("span",{className:"x78zum5 x1qughib xrybvsa",children:[t[a].displayName,(0,s.jsx)(e7.k,{})]})})}),l&&(0,s.jsx)("td",{className:"xq1dxzn x13ruybi xdpxx8g xxymvpz xb3r6kr xuxw1ft xlyipyv",children:e.teams}),(0,s.jsx)("td",{className:"x1qx9l9d x13ruybi xdpxx8g xxymvpz x1n0bwc9",children:t[a].description}),(0,s.jsx)("td",{"aria-hidden":!0,className:"xrxf7wd xmqvhtb x10lmdbm xj6lqsg xdpxx8g xxymvpz"})]})}var tl=a(138105),tn=a(503801);function td({error:e,additionalSeatsCount:t,selectedUserSeatTypes:a,tier:s}){let r=(0,H.O$)(a,t);return(0,tn.A)(r,s)?e?.code===I.INVALID_PAID_SEAT_TOTAL?null:e:{code:I.INVALID_PAID_SEAT_TOTAL,message:(0,_.t)("checkout.sidebar.paid_seat_minimum_banner")}}var to=a(599448),tc=a(281684),tm=a(181793),t_=a(913610),tu=a(507665),tp=a(572537),th=a(710211);let tx=th.M4.Query({fetch:async e=>e?(await tm.V.getSavedPaymentMethods({planType:e?.type,planId:e?.parentId})).data.meta:{payment_methods:[]},stalenessPolicy:"never"}),tg={stripePaymentMethod:void 0,savedPaymentMethod:void 0,vatGstId:"",regionalVatGstId:"",nameOnPaymentMethod:"",hasDifferentShippingAddress:!1,errors:[],savedPaymentMethods:[],isUsingSavedPaymentMethod:!1};function ty(e,t){switch(t.type){case ep.TOGGLE_DIFFERENT_SHIPPING_ADDRESS:return{...e,hasDifferentShippingAddress:!e.hasDifferentShippingAddress};case ep.INIT_SAVED_PAYMENT_METHODS:return{...e,savedPaymentMethods:t.payload,isUsingSavedPaymentMethod:t.payload.length>0,stripePaymentMethod:t.payload?.[0]?.id,savedPaymentMethod:t.payload?.[0]};case ep.UPDATE_VAT_GST_ID:return{...e,vatGstId:t.payload};case ep.UPDATE_REGIONAL_VAT_GST_ID:return{...e,regionalVatGstId:t.payload};case ep.UPDATE_NAME_ON_PAYMENT_METHOD:return{...e,nameOnPaymentMethod:t.payload};case ep.SET_ERRORS:return{...e,errors:t.payload};case ep.SET_STRIPE_PAYMENT_METHOD:return{...e,stripePaymentMethod:t.payload};case ep.TOGGLE_USE_SAVED_PAYMENT_METHOD:let a=e.isUsingSavedPaymentMethod;return{...e,isUsingSavedPaymentMethod:!a,stripePaymentMethod:a?void 0:e.savedPaymentMethod?.id};case ep.SET_SAVED_PAYMENT_METHOD:return{...e,savedPaymentMethod:t.payload,stripePaymentMethod:t.payload?.id};default:(0,ez.xb)(t)}}async function tf({billingAddress:e,shippingAddress:t,teamId:a,isCheckout:s}){try{await tu.$.validateAddresses({billingAddress:e,shippingAddress:t,teamId:a,isCheckout:s})}catch(e){return{code:eu.ADDRESS_VALIDATION_ERROR,message:(0,tc.J)(e)||e.message}}}async function tv({currency:e,billingAddress:t,shippingAddress:a,teamId:s,isCheckout:r}){try{await tu.$.validateCurrency({currency:e,billingAddress:t,shippingAddress:a,teamId:s,isCheckout:r})}catch(a){return(0,n.$D)(i.e.BILLING_EXPERIENCE,Error("[Billing] Currency/Address Mismatch"),a=>(a.setExtras({country:t.country,currency:e}),a)),{code:eu.CURRENCY_VALIDATION_ERROR,message:(0,_.t)("payments.errors.currency_mismatch_with_country_error",{selected_currency:e.toUpperCase()})}}}async function tS({vatGstId:e,country:t,region:a}){if(e)try{let s=await (0,t_.r)(e,t,a);if(!s.data.meta.valid)return{code:eu.VAT_GST_ID_VERIFICATION_ERROR,message:(0,tc.J)(s,(0,_.t)("tax.vat.vat_gst_validation_failed"))}}catch(e){return{code:eu.VAT_GST_ID_VERIFICATION_ERROR,message:e?.data?.message||(0,_.t)("tax.vat.vat_gst_validation_failed")}}}var tT=a(844882),tj=a(944350);let tE=th.M4.Query({fetch:async e=>(await tm.V.getEligibleUpgradeData(e)).data.meta,stalenessPolicy:"never"});var tN=a(58212),tb=a(638641),tA=a(952385),tw=a(443192),tC=a(176203),tI=a(562552);async function tR({requestBody:e,teamId:t,userId:a,reduxDispatch:s,handleError:r}){try{let{data:{meta:{team:r}}}=await eb.m.createTeamSubscription(t??"",e);r&&s(tA.yJ({team:r,userInitiated:!1})),(0,ex.sx)("Pro Team Purchased (GTM)"),s(tw.b({completed_pro_cart_flow:!0}));let i=new URLSearchParams(er.Ay.location.search);if(i.get("onCompleteRedirectFileKey")){let e=decodeURIComponent(i.get("onCompleteRedirectFileKey")),t=decodeURIComponent(i.get("onCompleteRedirectNodeId"));s(y.sf({view:"fullscreen",fileKey:e,nodeId:t,teamToMoveFileToOnNavigate:r.id,editorType:tC.nT.Design}))}else{let e={userId:a,teamId:r.id,orgId:null};s(g._l({workspace:e,view:{view:"allProjects",isProUpgrade:!0}}))}}catch(e){return r(e)}return null}async function tP({requestBody:e,user:t,upsellSource:a,handleError:s}){try{await tI.Eh.createNewOrg(e),(0,ex.sx)("Self Serve Org Purchased (GTM)"),(0,eO.uE)("Self Serve Org Purchased",{user:t},{org_name:e.org_name,upsellSource:a})}catch(e){return s(e)}return null}let tk={eligibleTeamsByTeamId:{},eligibleUsersByUserId:{},currentUpgradingUserId:"",taxPercent:0,selectedUserSeatTypes:{},additionalSeatsCount:z.N_.dict(()=>0),selectedTeamIds:new Set,hasDifferentLegalName:!1,displayName:"",legalName:"",isLoading:!0,isSubmitting:!1,error:null};function tM({currency:e,renewalTerm:t,...a}){return{...tk,...a,currency:e??(0,O.LN)(),renewalTerm:t??L.NW.YEAR}}function tO(e,t){switch(t.type){case R.UPDATE_DISPLAY_NAME:return{...e,displayName:t.payload.displayName};case R.UPDATE_LEGAL_NAME:return{...e,legalName:t.payload.legalName,error:e.error?.code===I.INVALID_LEGAL_NAME?null:e.error};case R.SET_RENEWAL_TERM:return{...e,renewalTerm:t.payload.renewalTerm};case R.SET_CURRENCY:return{...e,currency:t.payload.currency};case R.SET_TAX_PERCENT:return{...e,taxPercent:t.payload.taxPercent};case R.SET_ERROR:return{...e,error:t.payload.error};case R.SET_IS_SUBMITTING:return{...e,isSubmitting:t.payload.isSubmitting};case R.SET_HAS_DIFFERENT_LEGAL_NAME:return{...e,hasDifferentLegalName:t.payload.hasDifferentLegalName};case R.INIT:return{...e,...t.payload,isLoading:!1};case R.UPDATE_ADDITIONAL_SEATS:return{...e,additionalSeatsCount:t.payload,error:td({error:e.error,additionalSeatsCount:t.payload,selectedUserSeatTypes:e.selectedUserSeatTypes,tier:e.tier})};case R.UPDATE_USER_SEAT_TYPE:{let{userId:a,seatType:s}=t.payload,r={...e.selectedUserSeatTypes,[a]:s};return{...e,selectedUserSeatTypes:r,error:td({error:e.error,additionalSeatsCount:e.additionalSeatsCount,selectedUserSeatTypes:r,tier:e.tier})}}case R.ON_TOGGLE_TEAM:{let{selectedTeamIds:a}=e,{toggledTeam:s}=t.payload,r=a.has(s);ex.az.trackDefinedEvent("monetization_upgrades.checkout_change_team_selection",{teamId:s,selectedTeam:!r});let i=new Set(a);return r?i.delete(s):i.add(s),{...e,selectedTeamIds:i}}case R.UPDATE_STATE_FROM_NEW_TEAM_SELECTIONS:{let{eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r,currentUpgradingUserId:i}=e;return{...e,selectedUserSeatTypes:(0,to.h)({eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r,currentUpgradingUserId:i})}}default:return e}}var tD=a(768399),tL=a(785034),tU=a(537307),tB=a(59849);function tV({teamId:e,...t}){let{state:a,dispatch:d,createPaymentElement:c,unmountPaymentElement:m,validateUserSeatTypeSelections:u,validatePaymentInputs:h,collectPaymentDetails:g,performTierUpgrade:y}=function(e){let t=$({currency:e.currency??(0,O.LN)(),tier:e.tier,renewalTerm:e.renewalTerm??L.NW.YEAR});return function({teamId:e,applicablePriceData:t,...a}){let[s,i]=(0,r.useReducer)(tO,a,tM),{tier:l,currency:n,selectedUserSeatTypes:d,additionalSeatsCount:c,hasDifferentLegalName:m,legalName:u,error:p}=s,h=eT.tl().stripe_payment_method_configurations?.[l],{state:x,dispatch:g,createPaymentElement:y,unmountPaymentElement:f,createPaymentMethod:S,confirmIntent:T}=function({useStripeProps:e,currency:t,defaultCountry:a,isCheckout:s}){let i=(0,ej.S2)().unwrapOr(null),[l,n]=(0,r.useReducer)(ty,tg),{address:d,updateAddress:o,trimAddress:c}=(0,tp.U)({defaultCountry:a??(0,O.ub)()}),{address:m,updateAddress:u,trimAddress:p}=(0,tp.U)({defaultCountry:a??(0,O.ub)()}),{createPaymentElement:h,unmountPaymentElement:x,createPaymentMethod:g,confirmIntent:y,error:f,paymentMethodType:v,stripeIntent:S,stripeCustomerId:T,is3ds:j}=eI({...e,currency:t}),E={name:l.nameOnPaymentMethod,address:(0,eE.sH)(d)},N=l.isUsingSavedPaymentMethod?(0,eE._l)(l.savedPaymentMethod?.billing_address):d,b=l.hasDifferentShippingAddress?m:d,A=l.isUsingSavedPaymentMethod?l.savedPaymentMethod?.shipping_address?(0,eE._l)(l.savedPaymentMethod?.shipping_address):N:b,{status:w,savedPaymentMethods:C}=function(){let e=(0,ej.S2)().unwrapOr(null),[t]=(0,th.IT)(tx(e?.key),{enabled:!!e});return"loaded"===t.status?{status:t.status,savedPaymentMethods:t.data?.payment_methods??[]}:{status:t.status,savedPaymentMethods:[]}}();(0,r.useEffect)(()=>{"loaded"===w&&n({type:ep.INIT_SAVED_PAYMENT_METHODS,payload:C})},[w]);let I=async()=>{c(),p();let e=await k();if(n({type:ep.SET_ERRORS,payload:e}),e.length>0)return e;let t=await g(E);if(ec(t)||!t)return t;try{await tm.V.postValidatePayment({billingAddress:N,shippingAddress:A,paymentMethodId:t.id})}catch(t){let e=[{code:eu.PAYMENT_METHOD_VALIDATION_ERROR,message:t.message}];return n({type:ep.SET_ERRORS,payload:e}),e}return n({type:ep.SET_STRIPE_PAYMENT_METHOD,payload:t.id}),t.id},R=async({paymentMethod:a,createIntentParams:s})=>{let r=a||l.stripePaymentMethod;if(!r){let e=[{code:eu.MISSING_PAYMENT_METHOD_ERROR,message:(0,_.t)("payments.errors.missing_payment_method")}];return n({type:ep.SET_ERRORS,payload:e}),e}return await y({paymentMethod:r,createIntentParams:{...s,redirectUrl:"/",currency:t,billingAddress:N,shippingAddress:A,stripePaymentMethodConfiguration:e.stripePaymentMethodConfiguration}})},P=(0,r.useCallback)(e=>{switch(e.type){case ep.UPDATE_BILLING_ADDRESS:o(e.payload);break;case ep.UPDATE_SHIPPING_ADDRESS:u(e.payload);break;default:n(e)}},[o,u]);async function k(){let{vatGstId:e,regionalVatGstId:a,nameOnPaymentMethod:r}=l,n=await Promise.all([tf({billingAddress:N,shippingAddress:A,teamId:i?.key.parentId??null,isCheckout:!!s}),tv({currency:t,billingAddress:N,shippingAddress:A,teamId:i?.key.parentId??null,isCheckout:!!s}),tS({vatGstId:e,country:N.country}),tS({vatGstId:a,country:N.country,region:N.region})]);return r||n.unshift({code:eu.NAME_ON_PAYMENT_METHOD_REQUIRED,message:(0,_.t)("payments.errors.name_on_payment_method_required")}),n.filter(e=>!!e)}return{state:{...l,billingAddress:N,shippingAddress:A,stripeError:f,paymentMethodType:v,stripeIntent:S,is3ds:j,stripeCustomerId:T},dispatch:P,createPaymentElement:h,unmountPaymentElement:x,createPaymentMethod:I,confirmIntent:R}}({useStripeProps:{currency:n,paymentFlowSource:ed.PRO_UPGRADE,stripePaymentMethodConfiguration:h},currency:n,defaultCountry:(0,O.ub)(),isCheckout:!0}),{status:j,data:{eligibleTeams:E,eligibleTeamUsers:N,currentUpgradingUser:b}}=function(e){let t=(0,ej.S2)().unwrapOr(null),a=t?.type===tj.OL.TEAM?t:null,[s]=(0,th.IT)(tE({tier:e,teamId:a?.key.parentId}));return"loaded"===s.status?{status:s.status,data:{eligibleTeams:s.data.eligible_teams,eligibleTeamUsers:s.data.eligible_team_users,currentUpgradingUser:s.data.current_upgrading_user}}:{status:s.status,data:{eligibleTeams:[],eligibleTeamUsers:[],currentUpgradingUser:null}}}(l),A=(0,r.useMemo)(()=>(0,H.O$)(d,c),[d,c]),w=(0,r.useMemo)(()=>(0,H.s$)(t),[t]),C=(0,r.useMemo)(()=>({...s,...x,applicablePriceData:t,paymentFormErrors:x.errors,cartSelectionError:s.error,countBySeatType:A}),[s,x,t,A]),P=function({state:e,cartDispatch:t}){let a=(0,o.wA)(),s=(0,v.iZ)(),i=(0,ej.S2)().unwrapOr(null),l=function(e){let{tier:t,currency:a,renewalTerm:s,selectedUserSeatTypes:r,selectedTeamIds:i,displayName:l,legalName:n,taxPercent:d,applicablePriceData:o,vatGstId:c,regionalVatGstId:m,stripeIntent:_,stripeCustomerId:u,countBySeatType:p}=e,h=(0,H.s$)(o),{subtotal:x,taxTotal:g,total:y}=(0,H.ZY)({countBySeatType:p,applicablePrices:h,taxPercent:d}),f={selected_user_seat_types:(0,H.VB)(r),billing_interval:s,displayed_cost_breakdown:{subtotal:x,tax_total:g,total:y},displayed_price_keys:(0,H.vm)(o),selected_currency:a,vat_gst_id:c||null,regional_vat_gst_id:m||null};return t===D.Ju.PRO?{...f,legal_name:n||null,display_name:l||null,payment_method_id:_?.payment_method||"",count_by_billable_product:p}:{...f,requested_seats:p,org_name:l||n,legal_org_name:n,team_ids:Array.from(i),stripe_customer_id:u||null}}(e),n=(0,r.useCallback)(e=>{let s=(0,tc.J)(e,e.data?.message||(0,_.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again"));if("CARD_ERROR"!==e.data.reason)return a(tN.F.enqueue({type:"checkout-flow-error",message:s,error:!0,preventDismissal:!0,icon:tb.zX.WARNING_EXCLAMATION_WITH_TRIANGLE})),{code:I.UPGRADE_ERROR,message:s};{let e={code:I.CARD_ERROR,message:s};return t({type:R.SET_ERROR,payload:{error:e}}),e}},[t,a]);return(0,r.useCallback)(async()=>{if(t({type:R.SET_IS_SUBMITTING,payload:{isSubmitting:!0}}),e.tier===D.Ju.PRO){let e=await tR({requestBody:l,teamId:i?.key.parentId,userId:s.id,reduxDispatch:a,handleError:n});if(e)return t({type:R.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),e}else{let a=await tP({requestBody:l,user:s,upsellSource:e.upsellSource,handleError:n});if(a)return t({type:R.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),a}return null},[e.tier,e.upsellSource,t,a,l,i?.key.parentId,s,n])}({state:C,cartDispatch:i});(0,r.useEffect)(()=>{if("loaded"===j){let{eligibleTeamsByTeamId:e,selectedTeamIds:t,eligibleUsersByUserId:a,selectedUserSeatTypes:s}=(0,tl.W)(E,N,b);(0,q.R9)({eligibleTeamIds:E.map(e=>e.id).filter(e=>!!e),eligibleTeamUsers:N,tier:l}),i({type:R.INIT,payload:{eligibleTeamsByTeamId:e,selectedTeamIds:t,eligibleUsersByUserId:a,selectedUserSeatTypes:s,currentUpgradingUserId:b.user.id}})}},[j]);let k=(0,r.useCallback)(e=>{var t;"object"==typeof e&&null!==e&&"type"in e&&"string"==typeof(t=e.type)&&Object.values(ep).includes(t)?g(e):i(e)},[i,g]);async function M(){i({type:R.SET_IS_SUBMITTING,payload:{isSubmitting:!0}});let t=x.isUsingSavedPaymentMethod?x.stripePaymentMethod:await S();if(Array.isArray(t)&&t.every(eh)||ec(t))return i({type:R.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),t;let a=await T({paymentMethod:t,createIntentParams:{teamId:e,subtotalEstimate:(0,F.Vh)(A,w),currency:n,createStripeCustomer:!0}});if(ec(a))return i({type:R.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),a;try{let t=await tT.T.calculateEstimate({teamId:e,address:x.billingAddress,billingAddress:x.billingAddress,shippingAddress:x.shippingAddress,currency:n,vatGstId:x.vatGstId,regionalVatGstId:x.regionalVatGstId});i({type:R.SET_TAX_PERCENT,payload:{taxPercent:t.data.meta.estimate.tax_percent??0}})}catch(t){let e={code:I.ESTIMATE_CALCULATION_ERROR,message:(0,_.t)("payments.errors.estimate_calculation_error")};return i({type:R.SET_ERROR,payload:{error:e}}),i({type:R.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),e}return i({type:R.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),null}let L=(0,r.useCallback)(()=>{let e=td({error:p,additionalSeatsCount:c,selectedUserSeatTypes:d,tier:l});return e?(k({type:R.SET_ERROR,payload:{error:e}}),e):null},[k,p,c,d,l]),U=(0,r.useCallback)(()=>{if((l===D.Ju.ORG||l===D.Ju.PRO&&m)&&!u){let e={code:I.INVALID_LEGAL_NAME,message:(0,_.t)("checkout.errors.missing_legal_name")};return k({type:R.SET_ERROR,payload:{error:e}}),e}return null},[k,l,u,m]);return{state:C,dispatch:k,createPaymentElement:y,unmountPaymentElement:f,collectPaymentDetails:M,performTierUpgrade:P,validateUserSeatTypeSelections:L,validatePaymentInputs:U}}({...e,applicablePriceData:t})}({teamId:e,tier:t.tier,currency:t.currency,renewalTerm:t.renewalTerm,upsellSource:t.upsellSource}),{tier:f,currency:S,renewalTerm:j,applicablePriceData:E,eligibleTeamsByTeamId:N,isLoading:b,stripeError:A,cartSelectionError:w,selectedTeamIds:C}=a,P=(0,r.useMemo)(()=>b?[]:function({tier:e,eligibleTeams:t}){let a=[p.f.SELECT_SEATS,p.f.PAYMENT_AND_ADDRESS,p.f.REVIEW];if(e===D.Ju.PRO)return a;{let e=[...a,p.f.ORG_CONFIRMATION];return t.length>0?[p.f.SELECT_TEAMS,...e]:e}}({tier:f,eligibleTeams:Object.values(N)}),[b,f,N]),[M,U]=(0,r.useState)(P[0]);(0,r.useEffect)(()=>{b||M||U(P[0])},[b,M,P,U]);let B=(0,l.Rs)((0,tB.CJW)({teamId:e}),{enabled:!!e}).transform(({team:e})=>e?.name??"").unwrapOr(""),V=(0,r.useCallback)(e=>{let t=P.indexOf(e);if(-1===t){(0,n.$D)(i.e.MONETIZATION_UPGRADES,Error(`Invalid step: ${e}`),{extra:{steps:P,step:e}});return}U(P[t])},[P]),G=(0,r.useCallback)(e=>{let t=P.indexOf(M),a=P.indexOf(e);if(-1===a){(0,n.$D)(i.e.MONETIZATION_UPGRADES,Error(`Invalid step: ${e}`),{extra:{steps:P,step:e}});return}a>t||U(P[a])},[M,P]),z=(0,r.useCallback)(async()=>{let e=P.indexOf(M);switch(M){case p.f.SELECT_TEAMS:d({type:R.UPDATE_STATE_FROM_NEW_TEAM_SELECTIONS});break;case p.f.SELECT_SEATS:if(await u())return;break;case p.f.PAYMENT_AND_ADDRESS:if(h()||await g())return}V(P[Math.min(e+1,P.length-1)])},[M,P,V,u,h,g,d]),W=(0,r.useCallback)(async()=>{await y()||f!==D.Ju.ORG||V(p.f.ORG_CONFIRMATION)},[y,V,f]);return(0,r.useEffect)(()=>{M===p.f.PAYMENT_AND_ADDRESS&&A?.code===eo.UNINITIALIZED_STRIPE_ELEMENTS_ERROR&&V(p.f.SELECT_SEATS)},[A?.code,M,V]),(0,r.useEffect)(()=>{w?.code===I.CARD_ERROR&&V(p.f.PAYMENT_AND_ADDRESS)},[w?.code,V]),(0,r.useEffect)(()=>{B&&d({type:R.UPDATE_DISPLAY_NAME,payload:{displayName:B}})},[B,d]),(0,s.jsx)(k.fu,{name:J.e0.TIER_UPGRADE_FLOW,properties:{teamId:e,step:M,currency:S,renewalTerm:j,prices:(0,q.Jh)(E)},enabled:!b,children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(tL.f,{}),children:b?(0,s.jsx)(tL.f,{}):M===p.f.ORG_CONFIRMATION?(0,s.jsx)(ei,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T,{steps:P,currentStep:M,setStep:G,teamId:e}),(0,s.jsxs)("form",{className:"xg01n1d x1cmgiil x19bbpc0",children:[(0,s.jsx)(es,{step:M,teamName:B}),M===p.f.REVIEW?(0,s.jsx)(eQ,{state:a,onSubmit:W,navigateToEditDetails:()=>V(p.f.PAYMENT_AND_ADDRESS)}):(0,s.jsxs)("div",{className:"xrvj5dj x3uu4nb x1fwvi78",children:[M===p.f.SELECT_TEAMS&&(0,s.jsx)(tD.t,{newTeamName:null,teams:(0,H.Ds)(Object.values(N)),selectedTeamIds:C,onToggle:e=>{d({type:R.ON_TOGGLE_TEAM,payload:{toggledTeam:e}})}}),M===p.f.SELECT_SEATS&&(0,s.jsx)(tr,{state:a,teamId:e,dispatch:d,shouldShowTeamColumn:f===D.Ju.ORG}),M===p.f.PAYMENT_AND_ADDRESS&&(0,s.jsx)(eG,{state:a,dispatch:d,createPaymentElement:c,unmountPaymentElement:m}),(0,s.jsx)(ea,{buttonText:x[M]?.buttonText??null,state:a,dispatch:d,onClickNext:z,canSwitchRenewalTerm:f===D.Ju.PRO})]})]})]})})})}function tG(e){return(0,s.jsx)(d.tH,{team:i.e.MONETIZATION_UPGRADES,boundaryKey:"TeamUpgradeBillingRemodel",fallback:d.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:tU.y4,children:(0,s.jsx)(tV,{...e})})}},229910:(e,t,a)=>{a.d(t,{L:()=>T});var s=a(104076),r=a(716976),i=a(903927),l=a(511570),n=a.n(l),d=a(489625),o=a(555013),c=a(236631),m=a(256384),_=a(106141),u=a(192075),p=a(281684),h=a(366535),x=a(483200),g=a(507665),y=a(959834),f=a(432786),v=a(672815);let S=r.memo(function(e){let t=(0,i.wA)(),{displayName:a,legalName:l}=e,[y,S]=r.useState(a||""),[T,j]=r.useState(l||""),{isLoading:E,withLoading:N}=(0,_.R)(),b=()=>{t(h.Ce())},A=async a=>{a.preventDefault(),await N(async()=>{if(e.updateNameImmediately&&e.team)try{e.canSeeBillingAddressExp?await (0,d.WB)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:y}}},g.$.updateDisplayName({teamId:e.team.id,updatedDisplayName:y})):await (0,d.WB)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:y}}},g.$.updateTeamName({teamId:e.team.id,updatedDisplayName:y,updatedLegalName:T}))}catch(s){let a=e.canSeeBillingAddressExp?(0,u.t)("update_company_details_modal.update_display_name.error"):(0,u.t)("update_company_details_modal.update_team_name.error");throw t(m.s.error((0,p.J)(s)||a)),s}else t(x.yy({legalName:T,displayName:y}));b()})};return(0,s.jsx)(f.OJ,{onClose:b,title:e.modalTitle,minWidth:448,maxWidth:448,fixedTop:!0,children:(0,s.jsxs)("form",{onSubmit:A,className:c.s.p16.$,children:[(0,s.jsxs)("div",{className:c.s.mt4.$,children:[(0,s.jsxs)("label",{htmlFor:"teamName",className:c.s.colorTextSecondary.$,children:[(0,s.jsx)("strong",{className:c.s.block.colorText.$,children:(0,u.tx)("pro_cart.review.edit_details.team_name_label")}),(0,u.tx)("pro_cart.review.edit_details.team_name_description")]}),(0,s.jsx)(o.ks,{value:y,id:"teamName",onChange:e=>{S(e.target.value)},dataTestId:"company-team-name",className:c.s.block.mt8.wFull.$})]}),!e.canSeeBillingAddressExp&&(0,s.jsxs)("div",{className:c.s.mt20.$,children:[(0,s.jsxs)("label",{htmlFor:"legalName",className:c.s.colorTextSecondary.$,children:[(0,s.jsx)("strong",{className:c.s.block.colorText.$,children:(0,u.tx)("pro_cart.review.edit_details.company_name_label")}),(0,u.tx)("pro_cart.review.edit_details.company_name_description")]}),(0,s.jsx)(o.ks,{value:T,id:"legalName",onChange:e=>{j(e.target.value)},dataTestId:"company-name",className:c.s.block.mt8.wFull.$})]}),(0,s.jsxs)("div",{className:n()(v.v0,v.hF),children:[(0,s.jsx)(o.tM,{onClick:b,disabled:E,children:(0,u.tx)("pro_cart.review.edit_details.cancel")}),(0,s.jsx)(o.vd,{className:v.pL,disabled:E,type:"submit",children:(0,u.tx)("pro_cart.review.edit_details.save")})]})]})})}),T=(0,y.Ju)(S,"UpdateCompanyDetailsModal")},71004:(e,t,a)=>{a.d(t,{Mt:()=>w,OI:()=>A,Ud:()=>N});var s=a(716976),r=a(903927),i=a(883765),l=a(310725),n=a(328341),d=a(755444),o=a(432099),c=a(256384),m=a(192075),_=a(525980),u=a(147046),p=a(877100),h=a(483200),x=a(935167),g=a(418149),y=a(944350),f=a(984887),v=a(338052),S=a(134391),T=a(592726),j=a(530299),E=a(853039);let N=(0,v.D)(({teamId:e,canSeeBillingAddressExp:t})=>{let a=(0,r.wA)(),p=(0,r.d4)(e=>e.loadingState),g=(0,r.d4)(t=>e?t.teamUserByTeamId[e]:null),v=(0,r.d4)(e=>e.selectedView),N=(0,T.iZ)(),[A,C]=(0,s.useState)(!0),I=(0,n.ZC)(e),R=(0,_.s)(),P=x.Xw.loadingKeyForPayload({teamId:e}),k=(0,j.GH)(p,P),M=(0,d.DC)();(0,s.useEffect)(()=>{a(x.Xw({teamId:e}))},[a,e]);let O=function(){let e=(0,r.wA)();return(0,s.useCallback)(t=>{(0,i.sx)("Loaded Saved Cart State",{teamId:t.teamId,lastSavedAt:t.updatedAt}),e(h.eK(t))},[e])}();return(0,s.useEffect)(()=>{async function s(t){try{let s=await o.Ay.post("/api/subscriptions/teams/calculate_estimate",{...t,team_id:e});a(h.i({taxes:s.data.meta.estimate}))}catch(e){a(c.s.error((0,m.t)("payments.errors.estimate_calculation_error"))),a(u.sf({...v,paymentStep:f.tn.PAYMENT_AND_ADDRESS}))}C(!1)}if(void 0===I||I===e||A||(w(a),C(!0)),(!e||k)&&A){let n=(0,E.BR)(g,N),d=Object.entries(n).map(([e,t])=>{if((0,l.nD)(t.email||""))return e}).filter(e=>!!e);a(h.M2({figmaEmailTeamUsers:d}));let o=(0,S.lX)({teamId:e,userId:N?.id});if(o){o.editorStatusChanges=(0,S.nt)(o.editorStatusChanges,n);let l=(0,E.Ky)(n,o.editorStatusChanges,y._Y.DESIGN),c=(0,E.Ky)(n,o.editorStatusChanges,y._Y.WHITEBOARD),m=l+o.numEmptyDesignSeats,_=c+o.numEmptyWhiteboardSeats;if(O({numDesignEditors:m,numWhiteboardEditors:_,editorStatusChanges:o.editorStatusChanges,teamId:e,updatedAt:o.updatedAt,cartSelections:o.cartSelections}),M){var r;let e=(r=M.billing_period,f.tY[f.tY[r]]),i=t?{billing_address:M.billing_address,shipping_address:M.shipping_address||M.billing_address}:null;a(h.Lo({billingPeriod:e})),a(h.$h({vatGstId:M.vat_gst_id})),a(h.yy({legalName:M.customer_legal_name||M.company_name,displayName:M.display_name})),a(h.Ef({regionalVatGstId:M.regional_vat_gst_id})),s({address:M.address,editor_status_changes:o.editorStatusChanges,figma_email_team_users:d,selected_currency:M.currency,annual_quantity:(0,E.fD)(e,m),monthly_quantity:(0,E.Rq)(e,m),annual_whiteboard_quantity:(0,E.fD)(e,_),monthly_whiteboard_quantity:(0,E.Rq)(e,_),vat_gst_id:M.vat_gst_id,regional_vat_gst_id:M.regional_vat_gst_id,...i})}else"teamUpgrade"===v.view&&v.paymentStep===f.tn.CONFIRM_PAY&&v.billingPeriod!==f.tY.STUDENT&&i.az.trackDefinedEvent("monetization_upgrades.pro_checkout_confirmation_without_payment_flow_data",{isCampfireCart:R,teamId:e??void 0}),C(!1)}else C(!1)}},[a,k,g,I,e,N,A,M,v,O,t,R]),(0,s.useEffect)(()=>()=>{e&&b(a,e)},[a,e]),A}),b=(0,v.D)((e,t)=>{let a=x.Xw.loadingKeyForPayload({teamId:t});e(p.yH({key:a}))});function A(e){e(h.qU({cartSelections:{countBySeatType:g.N_.dict(e=>0),selectedUserSeatTypes:{}}}))}function w(e){e(h.Je({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[],figmake:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[],figmake:[]}}})),e(h.js({numDesignEditors:0})),e(h.Az({numWhiteboardEditors:0}))}},6817:(e,t,a)=>{a.d(t,{s:()=>m,K:()=>_});var s=a(104076),r=a(652539),i=a(236631),l=a(659062),n=a(111297),d=a(809027),o=a(97605);let c=e=>e.maxSeatsCount?Math.min(e.maxSeatsCount,99):99;function m(e){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:i.s.flex.itemsCenter.$,children:[(0,s.jsxs)("div",{className:"seat_counter--seatCounter--DiuEb",children:[(0,s.jsx)(n.$z,{disabled:e.numSeats<=e.minSeatsCount,innerText:`remove additional ${e.billableProductKey} seat`,className:"seat_counter--minusButton--e0dEs",onClick:e.decrementSeats,dataTestId:`remove-additional-${e.billableProductKey}`,children:(0,s.jsx)(r.B,{svg:d.A})}),(0,s.jsx)("input",{value:e.numSeats,maxLength:2,onChange:e.updateAdditionalSeatsText,className:"seat_counter--additionalSeatsInput--pOPr1",onFocus:e=>e.target.select()}),(0,s.jsx)(n.$z,{disabled:e.numSeats>=c(e),innerText:`add additional ${e.billableProductKey} seat`,className:"seat_counter--plusButton--ZEWEz",onClick:e.incrementSeats,dataTestId:`add-additional-${e.billableProductKey}`,children:(0,s.jsx)(r.B,{svg:o.A})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"seat_counter--headerText--xIHXf",children:e.headerText}),e.headerSubText&&(0,s.jsx)("div",{className:"seat_counter--headerSubText--c9SXC seat_counter--headerText--xIHXf",children:e.headerSubText}),e.clarificationText&&(0,s.jsx)("span",{style:l.sx.colorText.colorBgSecondary.h16.pl4.pr4.mt8.bRadius1.inlineBlock.add({fontSize:"9px"}).$,children:e.clarificationText})]})]})})}function _(e,t){return a=>{if(""===a.target.value){e(0);return}let s=parseInt(a.target.value);isNaN(s)||(s>99?e(99):t&&s>t?e(t):e(s))}}},99725:(e,t,a)=>{a.d(t,{I:()=>i});var s=a(104076),r=a(716976);class i extends r.Component{render(){return(0,s.jsxs)("div",{className:"persisted_error--container--ls5K4",style:{marginTop:this.props.marginTop??32},children:[(0,s.jsx)("div",{className:"persisted_error--sideBar--C-abH"}),(0,s.jsx)("div",{className:"persisted_error--message--EiciR",children:this.props.message})]})}}},640718:(e,t,a)=>{a.d(t,{o:()=>l});var s=a(104076),r=a(716976);if(443==a.j)var i=a(827695);function l(e){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(i.k,{}),children:e.children})}},106141:(e,t,a)=>{a.d(t,{R:()=>r});var s=a(716976);function r(){let[e,t]=s.useState(!1);return{isLoading:e,withLoading:async e=>{try{t(!0),await e()}finally{t(!1)}}}}},381671:(e,t,a)=>{a.d(t,{w:()=>r});var s=a(104076);let r=(0,a(716976).memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M17.523 12.036a.5.5 0 0 1 .449.546A5.999 5.999 0 0 1 7 15.314V17.5a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1H8.002q.066.089.137.175a5 5 0 0 0 8.838-2.69.5.5 0 0 1 .546-.45M17.5 6a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H16a5 5 0 0 0-8.977 2.515.5.5 0 1 1-.995-.097A6 6 0 0 1 17 8.685V6.5a.5.5 0 0 1 .5-.5"})})})}}]);

//# debugId=fef746dc-cd35-54e9-8687-2f91027670f4

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/6a52c77fad1c6525efa328d081c2d51caa4922a4/c5e2cae0-0b3d5c03e4b31e43.min.js.map